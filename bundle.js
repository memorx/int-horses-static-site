var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function o(e){return e()}function s(){return Object.create(null)}function r(e){e.forEach(o)}function i(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function l(e,t,n){e.$$.on_destroy.push(c(t,n))}function u(e,t,n,o){if(e){const s=d(e,t,n,o);return e[0](s)}}function d(e,t,o,s){return e[1]&&s?n(o.ctx.slice(),e[1](s(t))):o.ctx}function h(e,t,n,o){if(e[2]&&o){const s=e[2](o(n));if(void 0===t.dirty)return s;if("object"==typeof s){const e=[],n=Math.max(t.dirty.length,s.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|s[o];return e}return t.dirty|s}return t.dirty}function p(e,t,n,o,s,r){if(s){const i=d(t,n,o,r);e.p(i,s)}}function f(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function m(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function g(e,t){const n={};t=new Set(t);for(const o in e)t.has(o)||"$"===o[0]||(n[o]=e[o]);return n}const v="undefined"!=typeof window;let y=v?()=>window.performance.now():()=>Date.now(),w=v?e=>requestAnimationFrame(e):e;const b=new Set;function $(e){b.forEach((t=>{t.c(e)||(b.delete(t),t.f())})),0!==b.size&&w($)}function _(e){let t;return 0===b.size&&w($),{promise:new Promise((n=>{b.add(t={c:e,f:n})})),abort(){b.delete(t)}}}function x(e,t){e.appendChild(t)}function k(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function C(e){const t=H("style");return function(e,t){x(e.head||e,t),t.sheet}(k(e),t),t.sheet}function I(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function T(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function H(e){return document.createElement(e)}function N(e){return document.createTextNode(e)}function P(){return N(" ")}function E(){return N("")}function j(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function M(e){return function(t){return t.preventDefault(),e.call(this,t)}}function D(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const O=["width","height"];function z(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const o in t)null==t[o]?e.removeAttribute(o):"style"===o?e.style.cssText=t[o]:"__value"===o?e.value=e[o]=t[o]:n[o]&&n[o].set&&-1===O.indexOf(o)?e[o]=t[o]:D(e,o,t[o])}function L(e){return""===e?null:+e}function R(e,t){t=""+t,e.data!==t&&(e.data=t)}function A(e,t){e.value=null==t?"":t}function Z(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function F(e,t,n){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function U(e){const t=e.querySelector(":checked");return t&&t.__value}function W(e,t,{bubbles:n=!1,cancelable:o=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,o,t),s}class K{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){var o;this.e||(this.is_svg?this.e=(o=t.nodeName,document.createElementNS("http://www.w3.org/2000/svg",o)):this.e=H(11===t.nodeType?"TEMPLATE":t.nodeName),this.t="TEMPLATE"!==t.tagName?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)I(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(S)}}function J(e,t){return new e(t)}const X=new Map;let B,Y=0;function G(e,t,n,o,s,r,i,a=0){const c=16.666/o;let l="{\n";for(let e=0;e<=1;e+=c){const o=t+(n-t)*r(e);l+=100*e+`%{${i(o,1-o)}}\n`}const u=l+`100% {${i(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,h=k(e),{stylesheet:p,rules:f}=X.get(h)||function(e,t){const n={stylesheet:C(t),rules:{}};return X.set(e,n),n}(h,e);f[d]||(f[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${d} ${o}ms linear ${s}ms 1 both`,Y+=1,d}function V(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),s=n.length-o.length;s&&(e.style.animation=o.join(", "),Y-=s,Y||w((()=>{Y||(X.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&S(t)})),X.clear())})))}function q(e){B=e}function Q(){if(!B)throw new Error("Function called outside component initialization");return B}function ee(e){Q().$$.on_mount.push(e)}function te(e){Q().$$.on_destroy.push(e)}function ne(){const e=Q();return(t,n,{cancelable:o=!1}={})=>{const s=e.$$.callbacks[t];if(s){const r=W(t,n,{cancelable:o});return s.slice().forEach((t=>{t.call(e,r)})),!r.defaultPrevented}return!0}}function oe(e,t){return Q().$$.context.set(e,t),t}function se(e){return Q().$$.context.get(e)}const re=[],ie=[];let ae=[];const ce=[],le=Promise.resolve();let ue=!1;function de(e){ae.push(e)}const he=new Set;let pe,fe=0;function me(){if(0!==fe)return;const e=B;do{try{for(;fe<re.length;){const e=re[fe];fe++,q(e),ge(e.$$)}}catch(e){throw re.length=0,fe=0,e}for(q(null),re.length=0,fe=0;ie.length;)ie.pop()();for(let e=0;e<ae.length;e+=1){const t=ae[e];he.has(t)||(he.add(t),t())}ae.length=0}while(re.length);for(;ce.length;)ce.pop()();ue=!1,he.clear(),q(e)}function ge(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(de)}}function ve(){return pe||(pe=Promise.resolve(),pe.then((()=>{pe=null}))),pe}function ye(e,t,n){e.dispatchEvent(W(`${t?"intro":"outro"}${n}`))}const we=new Set;let be;function $e(){be={r:0,c:[],p:be}}function _e(){be.r||r(be.c),be=be.p}function xe(e,t){e&&e.i&&(we.delete(e),e.i(t))}function ke(e,t,n,o){if(e&&e.o){if(we.has(e))return;we.add(e),be.c.push((()=>{we.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}const Ce={duration:0};function Ie(e,t){const n=t.token={};function o(e,o,s,r){if(t.token!==n)return;t.resolved=r;let i=t.ctx;void 0!==s&&(i=i.slice(),i[s]=r);const a=e&&(t.current=e)(i);let c=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==o&&e&&($e(),ke(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),_e())})):t.block.d(1),a.c(),xe(a,1),a.m(t.mount(),t.anchor),c=!0),t.block=a,t.blocks&&(t.blocks[o]=a),c&&me()}if(!(s=e)||"object"!=typeof s&&"function"!=typeof s||"function"!=typeof s.then){if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved=e}else{const n=Q();if(e.then((e=>{q(n),o(t.then,1,t.value,e),q(null)}),(e=>{if(q(n),o(t.catch,2,t.error,e),q(null),!t.hasCatch)throw e})),t.current!==t.pending)return o(t.pending,0),!0}var s}function Se(e,t){ke(e,1,1,(()=>{t.delete(e.key)}))}function Te(e,t){const n={},o={},s={$$scope:1};let r=e.length;for(;r--;){const i=e[r],a=t[r];if(a){for(const e in i)e in a||(o[e]=1);for(const e in a)s[e]||(n[e]=a[e],s[e]=1);e[r]=a}else for(const e in i)s[e]=1}for(const e in o)e in n||(n[e]=void 0);return n}function He(e){return"object"==typeof e&&null!==e?e:{}}function Ne(e){e&&e.c()}function Pe(e,t,n,s){const{fragment:a,after_update:c}=e.$$;a&&a.m(t,n),s||de((()=>{const t=e.$$.on_mount.map(o).filter(i);e.$$.on_destroy?e.$$.on_destroy.push(...t):r(t),e.$$.on_mount=[]})),c.forEach(de)}function Ee(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];ae.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),ae=t}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function je(e,t){-1===e.$$.dirty[0]&&(re.push(e),ue||(ue=!0,le.then(me)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Me(t,n,o,i,a,c,l,u=[-1]){const d=B;q(t);const h=t.$$={fragment:null,ctx:[],props:c,update:e,not_equal:a,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:s(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};l&&l(h.root);let p=!1;if(h.ctx=o?o(t,n.props||{},((e,n,...o)=>{const s=o.length?o[0]:n;return h.ctx&&a(h.ctx[e],h.ctx[e]=s)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](s),p&&je(t,e)),n})):[],h.update(),p=!0,r(h.before_update),h.fragment=!!i&&i(h.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);h.fragment&&h.fragment.l(e),e.forEach(S)}else h.fragment&&h.fragment.c();n.intro&&xe(t.$$.fragment),Pe(t,n.target,n.anchor,n.customElement),me()}q(d)}class De{$destroy(){Ee(this,1),this.$destroy=e}$on(t,n){if(!i(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Oe={},ze={},Le={},Re=/^:(.+)/,Ae=e=>e.replace(/(^\/+|\/+$)/g,"").split("/"),Ze=e=>e.replace(/(^\/+|\/+$)/g,""),Fe=(e,t)=>({route:e,score:e.default?0:Ae(e.path).reduce(((e,t)=>(e+=4,""===t?e+=1:Re.test(t)?e+=2:"*"===t[0]?e-=5:e+=3,e)),0),index:t}),Ue=(e,t)=>{let n,o;const[s]=t.split("?"),r=Ae(s),i=""===r[0],a=(e=>e.map(Fe).sort(((e,t)=>e.score<t.score?1:e.score>t.score?-1:e.index-t.index)))(e);for(let e=0,s=a.length;e<s;e++){const s=a[e].route;let c=!1;if(s.default){o={route:s,params:{},uri:t};continue}const l=Ae(s.path),u={},d=Math.max(r.length,l.length);let h=0;for(;h<d;h++){const e=l[h],t=r[h];if(e&&"*"===e[0]){u["*"===e?"*":e.slice(1)]=r.slice(h).map(decodeURIComponent).join("/");break}if(void 0===t){c=!0;break}const n=Re.exec(e);if(n&&!i){const e=decodeURIComponent(t);u[n[1]]=e}else if(e!==t){c=!0;break}}if(!c){n={route:s,params:u,uri:"/"+r.slice(0,h).join("/")};break}}return n||o||null},We=(e,t)=>e+(t?`?${t}`:""),Ke=(e,t)=>`${Ze("/"===t?e:`${Ze(e)}/${Ze(t)}`)}/`,Je=()=>"undefined"!=typeof window&&"document"in window&&"location"in window,Xe=e=>({active:4&e}),Be=e=>({active:!!e[2]});function Ye(e){let t,o,s,r;const i=e[17].default,a=u(i,e,e[16],Be);let c=[{href:e[0]},{"aria-current":e[2]},e[1],e[6]],l={};for(let e=0;e<c.length;e+=1)l=n(l,c[e]);return{c(){t=H("a"),a&&a.c(),z(t,l)},m(n,i){I(n,t,i),a&&a.m(t,null),o=!0,s||(r=j(t,"click",e[5]),s=!0)},p(e,[n]){a&&a.p&&(!o||65540&n)&&p(a,i,e,e[16],o?h(i,e[16],n,Xe):f(e[16]),Be),z(t,l=Te(c,[(!o||1&n)&&{href:e[0]},(!o||4&n)&&{"aria-current":e[2]},2&n&&e[1],64&n&&e[6]]))},i(e){o||(xe(a,e),o=!0)},o(e){ke(a,e),o=!1},d(e){e&&S(t),a&&a.d(e),s=!1,r()}}}function Ge(e,t,o){let s;const r=["to","replace","state","getProps","preserveScroll"];let i,a,c=g(t,r),{$$slots:u={},$$scope:d}=t,{to:h="#"}=t,{replace:p=!1}=t,{state:f={}}=t,{getProps:v=(()=>({}))}=t,{preserveScroll:y=!1}=t;const w=se(Oe);l(e,w,(e=>o(14,i=e)));const{base:b}=se(ze);l(e,b,(e=>o(15,a=e)));const{navigate:$}=se(Le),_=ne();let x,k,C,I;return e.$$set=e=>{t=n(n({},t),m(e)),o(6,c=g(t,r)),"to"in e&&o(7,h=e.to),"replace"in e&&o(8,p=e.replace),"state"in e&&o(9,f=e.state),"getProps"in e&&o(10,v=e.getProps),"preserveScroll"in e&&o(11,y=e.preserveScroll),"$$scope"in e&&o(16,d=e.$$scope)},e.$$.update=()=>{32896&e.$$.dirty&&o(0,x=((e,t)=>{if(e.startsWith("/"))return e;const[n,o]=e.split("?"),[s]=t.split("?"),r=Ae(n),i=Ae(s);if(""===r[0])return We(s,o);if(!r[0].startsWith(".")){const e=i.concat(r).join("/");return We(("/"===s?"":"/")+e,o)}const a=i.concat(r),c=[];return a.forEach((e=>{".."===e?c.pop():"."!==e&&c.push(e)})),We("/"+c.join("/"),o)})(h,a.uri)),16385&e.$$.dirty&&o(12,k=i.pathname.startsWith(x)),16385&e.$$.dirty&&o(13,C=x===i.pathname),8192&e.$$.dirty&&o(2,s=C?"page":void 0),o(1,I=v({location:i,href:x,isPartiallyCurrent:k,isCurrent:C,existingProps:c}))},[x,I,s,w,b,e=>{if(_("click",e),(e=>!e.defaultPrevented&&0===e.button&&!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey))(e)){e.preventDefault();const t=i.pathname===x||p;$(x,{state:f,replace:t,preserveScroll:y})}},c,h,p,f,v,y,k,C,i,a,d,u]}class Ve extends De{constructor(e){super(),Me(this,e,Ge,Ye,a,{to:7,replace:8,state:9,getProps:10,preserveScroll:11})}}const qe=e=>({params:4&e}),Qe=e=>({params:e[2]});function et(e){let t,n,o,s;const r=[nt,tt],i=[];function a(e,t){return e[0]?0:1}return t=a(e),n=i[t]=r[t](e),{c(){n.c(),o=E()},m(e,n){i[t].m(e,n),I(e,o,n),s=!0},p(e,s){let c=t;t=a(e),t===c?i[t].p(e,s):($e(),ke(i[c],1,1,(()=>{i[c]=null})),_e(),n=i[t],n?n.p(e,s):(n=i[t]=r[t](e),n.c()),xe(n,1),n.m(o.parentNode,o))},i(e){s||(xe(n),s=!0)},o(e){ke(n),s=!1},d(e){i[t].d(e),e&&S(o)}}}function tt(e){let t;const n=e[8].default,o=u(n,e,e[7],Qe);return{c(){o&&o.c()},m(e,n){o&&o.m(e,n),t=!0},p(e,s){o&&o.p&&(!t||132&s)&&p(o,n,e,e[7],t?h(n,e[7],s,qe):f(e[7]),Qe)},i(e){t||(xe(o,e),t=!0)},o(e){ke(o,e),t=!1},d(e){o&&o.d(e)}}}function nt(e){let t,n,o,s={ctx:e,current:null,token:null,hasCatch:!1,pending:rt,then:st,catch:ot,value:12,blocks:[,,,]};return Ie(n=e[0],s),{c(){t=E(),s.block.c()},m(e,n){I(e,t,n),s.block.m(e,s.anchor=n),s.mount=()=>t.parentNode,s.anchor=t,o=!0},p(t,o){e=t,s.ctx=e,1&o&&n!==(n=e[0])&&Ie(n,s)||function(e,t,n){const o=t.slice(),{resolved:s}=e;e.current===e.then&&(o[e.value]=s),e.current===e.catch&&(o[e.error]=s),e.block.p(o,n)}(s,e,o)},i(e){o||(xe(s.block),o=!0)},o(e){for(let e=0;e<3;e+=1){ke(s.blocks[e])}o=!1},d(e){e&&S(t),s.block.d(e),s.token=null,s=null}}}function ot(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function st(e){let t,o,s;const r=[e[2],e[3]];var i=e[12]?.default||e[12];function a(e){let t={};for(let e=0;e<r.length;e+=1)t=n(t,r[e]);return{props:t}}return i&&(t=J(i,a())),{c(){t&&Ne(t.$$.fragment),o=E()},m(e,n){t&&Pe(t,e,n),I(e,o,n),s=!0},p(e,n){const s=12&n?Te(r,[4&n&&He(e[2]),8&n&&He(e[3])]):{};if(1&n&&i!==(i=e[12]?.default||e[12])){if(t){$e();const e=t;ke(e.$$.fragment,1,0,(()=>{Ee(e,1)})),_e()}i?(t=J(i,a()),Ne(t.$$.fragment),xe(t.$$.fragment,1),Pe(t,o.parentNode,o)):t=null}else i&&t.$set(s)},i(e){s||(t&&xe(t.$$.fragment,e),s=!0)},o(e){t&&ke(t.$$.fragment,e),s=!1},d(e){e&&S(o),t&&Ee(t,e)}}}function rt(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function it(e){let t,n,o=e[1]&&e[1].route===e[5]&&et(e);return{c(){o&&o.c(),t=E()},m(e,s){o&&o.m(e,s),I(e,t,s),n=!0},p(e,[n]){e[1]&&e[1].route===e[5]?o?(o.p(e,n),2&n&&xe(o,1)):(o=et(e),o.c(),xe(o,1),o.m(t.parentNode,t)):o&&($e(),ke(o,1,1,(()=>{o=null})),_e())},i(e){n||(xe(o),n=!0)},o(e){ke(o),n=!1},d(e){o&&o.d(e),e&&S(t)}}}function at(e,t,o){let s,{$$slots:r={},$$scope:i}=t,{path:a=""}=t,{component:c=null}=t,u={},d={};const{registerRoute:h,unregisterRoute:p,activeRoute:f}=se(ze);l(e,f,(e=>o(1,s=e)));const g={path:a,default:""===a};return h(g),te((()=>{p(g)})),e.$$set=e=>{o(11,t=n(n({},t),m(e))),"path"in e&&o(6,a=e.path),"component"in e&&o(0,c=e.component),"$$scope"in e&&o(7,i=e.$$scope)},e.$$.update=()=>{if(s&&s.route===g){o(2,u=s.params);const{component:e,path:n,...r}=t;o(3,d=r),e&&(e.toString().startsWith("class ")?o(0,c=e):o(0,c=e())),Je()&&!s.preserveScroll&&window?.scrollTo(0,0)}},t=m(t),[c,s,u,d,f,g,a,i,r]}class ct extends De{constructor(e){super(),Me(this,e,at,it,a,{path:6,component:0})}}const lt=[];function ut(t,n=e){let o;const s=new Set;function r(e){if(a(t,e)&&(t=e,o)){const e=!lt.length;for(const e of s)e[1](),lt.push(e,t);if(e){for(let e=0;e<lt.length;e+=2)lt[e][0](lt[e+1]);lt.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(i,a=e){const c=[i,a];return s.add(c),1===s.size&&(o=n(r)||e),i(t),()=>{s.delete(c),0===s.size&&o&&(o(),o=null)}}}}function dt(t,n,o){const s=!Array.isArray(t),a=s?[t]:t,l=n.length<2;return u=t=>{let o=!1;const u=[];let d=0,h=e;const p=()=>{if(d)return;h();const o=n(s?u[0]:u,t);l?t(o):h=i(o)?o:e},f=a.map(((e,t)=>c(e,(e=>{u[t]=e,d&=~(1<<t),o&&p()}),(()=>{d|=1<<t}))));return o=!0,p(),function(){r(f),h(),o=!1}},{subscribe:ut(o,u).subscribe};var u}const ht=e=>({...e.location,state:e.history.state,key:e.history.state&&e.history.state.key||"initial"}),pt=(e=>{const t=[];let n=ht(e);return{get location(){return n},listen(o){t.push(o);const s=()=>{n=ht(e),o({location:n,action:"POP"})};return e.addEventListener("popstate",s),()=>{e.removeEventListener("popstate",s);const n=t.indexOf(o);t.splice(n,1)}},navigate(o,{state:s,replace:r=!1,preserveScroll:i=!1,blurActiveElement:a=!0}={}){s={...s,key:Date.now()+""};try{r?e.history.replaceState(s,"",o):e.history.pushState(s,"",o)}catch(t){e.location[r?"replace":"assign"](o)}n=ht(e),t.forEach((e=>e({location:n,action:"PUSH",preserveScroll:i}))),a&&document.activeElement.blur()}}})(Je()?window:((e="/")=>{let t=0;const n=[{pathname:e,search:""}],o=[];return{get location(){return n[t]},addEventListener(e,t){},removeEventListener(e,t){},history:{get entries(){return n},get index(){return t},get state(){return o[t]},pushState(e,s,r){const[i,a=""]=r.split("?");t++,n.push({pathname:i,search:a}),o.push(e)},replaceState(e,s,r){const[i,a=""]=r.split("?");n[t]={pathname:i,search:a},o[t]=e}}}})()),ft=e=>({route:4&e,location:2&e}),mt=e=>({route:e[2]&&e[2].uri,location:e[1]}),gt=e=>({route:4&e,location:2&e}),vt=e=>({route:e[2]&&e[2].uri,location:e[1]});function yt(e){let t;const n=e[15].default,o=u(n,e,e[14],mt);return{c(){o&&o.c()},m(e,n){o&&o.m(e,n),t=!0},p(e,s){o&&o.p&&(!t||16390&s)&&p(o,n,e,e[14],t?h(n,e[14],s,ft):f(e[14]),mt)},i(e){t||(xe(o,e),t=!0)},o(e){ke(o,e),t=!1},d(e){o&&o.d(e)}}}function wt(t){let n,o,s=t[1].pathname,r=bt(t);return{c(){r.c(),n=E()},m(e,t){r.m(e,t),I(e,n,t),o=!0},p(t,o){2&o&&a(s,s=t[1].pathname)?($e(),ke(r,1,1,e),_e(),r=bt(t),r.c(),xe(r,1),r.m(n.parentNode,n)):r.p(t,o)},i(e){o||(xe(r),o=!0)},o(e){ke(r),o=!1},d(e){e&&S(n),r.d(e)}}}function bt(n){let o,s,a,c;const l=n[15].default,d=u(l,n,n[14],vt);return{c(){o=H("div"),d&&d.c()},m(e,t){I(e,o,t),d&&d.m(o,null),c=!0},p(e,t){d&&d.p&&(!c||16390&t)&&p(d,l,e,e[14],c?h(l,e[14],t,gt):f(e[14]),vt)},i(r){c||(xe(d,r),de((()=>{c&&(a&&a.end(1),s=function(n,o,s){const r={direction:"in"};let a,c,l=o(n,s,r),u=!1,d=0;function h(){a&&V(n,a)}function p(){const{delay:o=0,duration:s=300,easing:r=t,tick:i=e,css:p}=l||Ce;p&&(a=G(n,0,1,s,o,r,p,d++)),i(0,1);const f=y()+o,m=f+s;c&&c.abort(),u=!0,de((()=>ye(n,!0,"start"))),c=_((e=>{if(u){if(e>=m)return i(1,0),ye(n,!0,"end"),h(),u=!1;if(e>=f){const t=r((e-f)/s);i(t,1-t)}}return u}))}let f=!1;return{start(){f||(f=!0,V(n),i(l)?(l=l(r),ve().then(p)):p())},invalidate(){f=!1},end(){u&&(h(),u=!1)}}}(o,n[3],{}),s.start())})),c=!0)},o(l){ke(d,l),s&&s.invalidate(),a=function(n,o,s){const a={direction:"out"};let c,l=o(n,s,a),u=!0;const d=be;function h(){const{delay:o=0,duration:s=300,easing:i=t,tick:a=e,css:h}=l||Ce;h&&(c=G(n,1,0,s,o,i,h));const p=y()+o,f=p+s;de((()=>ye(n,!1,"start"))),_((e=>{if(u){if(e>=f)return a(0,1),ye(n,!1,"end"),--d.r||r(d.c),!1;if(e>=p){const t=i((e-p)/s);a(1-t,t)}}return u}))}return d.r+=1,i(l)?ve().then((()=>{l=l(a),h()})):h(),{end(e){e&&l.tick&&l.tick(1,0),u&&(c&&V(n,c),u=!1)}}}(o,n[3],{}),c=!1},d(e){e&&S(o),d&&d.d(e),e&&a&&a.end()}}}function $t(e){let t,n,o,s;const r=[wt,yt],i=[];function a(e,t){return e[0]?0:1}return t=a(e),n=i[t]=r[t](e),{c(){n.c(),o=E()},m(e,n){i[t].m(e,n),I(e,o,n),s=!0},p(e,[s]){let c=t;t=a(e),t===c?i[t].p(e,s):($e(),ke(i[c],1,1,(()=>{i[c]=null})),_e(),n=i[t],n?n.p(e,s):(n=i[t]=r[t](e),n.c()),xe(n,1),n.m(o.parentNode,o))},i(e){s||(xe(n),s=!0)},o(e){ke(n),s=!1},d(e){i[t].d(e),e&&S(o)}}}function _t(e,t,n){let o,s,r,i,{$$slots:a={},$$scope:c}=t,{basepath:u="/"}=t,{url:d=null}=t,{viewtransition:h=null}=t,{history:p=pt}=t;oe(Le,p);const f=se(Oe),m=se(ze),g=ut([]);l(e,g,(e=>n(12,s=e)));const v=ut(null);l(e,v,(e=>n(2,i=e)));let y=!1;const w=f||ut(d?{pathname:d}:p.location);l(e,w,(e=>n(1,o=e)));const b=m?m.routerBase:ut({path:u,uri:u});l(e,b,(e=>n(13,r=e)));const $=dt([b,v],(([e,t])=>{if(!t)return e;const{path:n}=e,{route:o,uri:s}=t;return{path:o.default?n:o.path.replace(/\*.*$/,""),uri:s}}));let _=!1;return f||(ee((()=>p.listen((e=>{n(11,_=e.preserveScroll||!1),w.set(e.location)})))),oe(Oe,w)),oe(ze,{activeRoute:v,base:b,routerBase:$,registerRoute:e=>{const{path:t}=r;let{path:n}=e;if(e._path=n,e.path=Ke(t,n),"undefined"==typeof window){if(y)return;const t=Ue([e],o.pathname);t&&(v.set(t),y=!0)}else g.update((t=>[...t,e]))},unregisterRoute:e=>{g.update((t=>t.filter((t=>t!==e))))}}),e.$$set=e=>{"basepath"in e&&n(8,u=e.basepath),"url"in e&&n(9,d=e.url),"viewtransition"in e&&n(0,h=e.viewtransition),"history"in e&&n(10,p=e.history),"$$scope"in e&&n(14,c=e.$$scope)},e.$$.update=()=>{if(8192&e.$$.dirty){const{path:e}=r;g.update((t=>t.map((t=>Object.assign(t,{path:Ke(e,t._path)})))))}if(6146&e.$$.dirty){const e=Ue(s,o.pathname);v.set(e?{...e,preserveScroll:_}:e)}},[h,o,i,(e,t,n)=>{const o=h(n);return"function"==typeof o?.fn?o.fn(e,o):o},g,v,w,b,u,d,p,_,s,r,c,a]}class xt extends De{constructor(e){super(),Me(this,e,_t,$t,a,{basepath:8,url:9,viewtransition:0,history:10})}}function kt(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(n[o[s]]=e[o[s]])}return n}"function"==typeof SuppressedError&&SuppressedError;var Ct="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function It(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function St(e,t){return e(t={exports:{}},t.exports),t.exports}var Tt=St((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this.locked=new Map,this.addToLocked=function(t,n){var o=e.locked.get(t);void 0===o?void 0===n?e.locked.set(t,[]):e.locked.set(t,[n]):void 0!==n&&(o.unshift(n),e.locked.set(t,o))},this.isLocked=function(t){return e.locked.has(t)},this.lock=function(t){return new Promise((function(n,o){e.isLocked(t)?e.addToLocked(t,n):(e.addToLocked(t),n())}))},this.unlock=function(t){var n=e.locked.get(t);if(void 0!==n&&0!==n.length){var o=n.pop();e.locked.set(t,n),void 0!==o&&setTimeout(o,0)}else e.locked.delete(t)}}return e.getInstance=function(){return void 0===e.instance&&(e.instance=new e),e.instance},e}();t.default=function(){return n.getInstance()}}));It(Tt);var Ht=It(St((function(e,t){var n=Ct&&Ct.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?s(e.value):new n((function(t){t(e.value)})).then(i,a)}c((o=o.apply(e,t||[])).next())}))},o=Ct&&Ct.__generator||function(e,t){var n,o,s,r,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(s=2&r[0]?o.return:r[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,r[1])).done)return s;switch(o=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){i.label=r[1];break}if(6===r[0]&&i.label<s[1]){i.label=s[1],s=r;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(r);break}s[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},s=Ct;Object.defineProperty(t,"__esModule",{value:!0});var r="browser-tabs-lock-key",i={key:function(e){return n(s,void 0,void 0,(function(){return o(this,(function(e){throw new Error("Unsupported")}))}))},getItem:function(e){return n(s,void 0,void 0,(function(){return o(this,(function(e){throw new Error("Unsupported")}))}))},clear:function(){return n(s,void 0,void 0,(function(){return o(this,(function(e){return[2,window.localStorage.clear()]}))}))},removeItem:function(e){return n(s,void 0,void 0,(function(){return o(this,(function(e){throw new Error("Unsupported")}))}))},setItem:function(e,t){return n(s,void 0,void 0,(function(){return o(this,(function(e){throw new Error("Unsupported")}))}))},keySync:function(e){return window.localStorage.key(e)},getItemSync:function(e){return window.localStorage.getItem(e)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(e){return window.localStorage.removeItem(e)},setItemSync:function(e,t){return window.localStorage.setItem(e,t)}};function a(e){return new Promise((function(t){return setTimeout(t,e)}))}function c(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="",o=0;o<e;o++)n+=t[Math.floor(61*Math.random())];return n}var l=function(){function e(t){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+c(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=t,void 0===e.waiters&&(e.waiters=[])}return e.prototype.acquireLock=function(t,s){return void 0===s&&(s=5e3),n(this,void 0,void 0,(function(){var n,l,u,d,h,p,f;return o(this,(function(o){switch(o.label){case 0:n=Date.now()+c(4),l=Date.now()+s,u=r+"-"+t,d=void 0===this.storageHandler?i:this.storageHandler,o.label=1;case 1:return Date.now()<l?[4,a(30)]:[3,8];case 2:return o.sent(),null!==d.getItemSync(u)?[3,5]:(h=this.id+"-"+t+"-"+n,[4,a(Math.floor(25*Math.random()))]);case 3:return o.sent(),d.setItemSync(u,JSON.stringify({id:this.id,iat:n,timeoutKey:h,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,a(30)];case 4:return o.sent(),null!==(p=d.getItemSync(u))&&(f=JSON.parse(p)).id===this.id&&f.iat===n?(this.acquiredIatSet.add(n),this.refreshLockWhileAcquired(u,n),[2,!0]):[3,7];case 5:return e.lockCorrector(void 0===this.storageHandler?i:this.storageHandler),[4,this.waitForSomethingToChange(l)];case 6:o.sent(),o.label=7;case 7:return n=Date.now()+c(4),[3,1];case 8:return[2,!1]}}))}))},e.prototype.refreshLockWhileAcquired=function(e,t){return n(this,void 0,void 0,(function(){var s=this;return o(this,(function(r){return setTimeout((function(){return n(s,void 0,void 0,(function(){var n,s,r;return o(this,(function(o){switch(o.label){case 0:return[4,Tt.default().lock(t)];case 1:return o.sent(),this.acquiredIatSet.has(t)?(n=void 0===this.storageHandler?i:this.storageHandler,null===(s=n.getItemSync(e))?(Tt.default().unlock(t),[2]):((r=JSON.parse(s)).timeRefreshed=Date.now(),n.setItemSync(e,JSON.stringify(r)),Tt.default().unlock(t),this.refreshLockWhileAcquired(e,t),[2])):(Tt.default().unlock(t),[2])}}))}))}),1e3),[2]}))}))},e.prototype.waitForSomethingToChange=function(t){return n(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){var o=!1,s=Date.now(),r=!1;function i(){if(r||(window.removeEventListener("storage",i),e.removeFromWaiting(i),clearTimeout(a),r=!0),!o){o=!0;var t=50-(Date.now()-s);t>0?setTimeout(n,t):n(null)}}window.addEventListener("storage",i),e.addToWaiting(i);var a=setTimeout(i,Math.max(0,t-Date.now()))}))];case 1:return n.sent(),[2]}}))}))},e.addToWaiting=function(t){this.removeFromWaiting(t),void 0!==e.waiters&&e.waiters.push(t)},e.removeFromWaiting=function(t){void 0!==e.waiters&&(e.waiters=e.waiters.filter((function(e){return e!==t})))},e.notifyWaiters=function(){void 0!==e.waiters&&e.waiters.slice().forEach((function(e){return e()}))},e.prototype.releaseLock=function(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.releaseLock__private__(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.releaseLock__private__=function(t){return n(this,void 0,void 0,(function(){var n,s,a,c;return o(this,(function(o){switch(o.label){case 0:return n=void 0===this.storageHandler?i:this.storageHandler,s=r+"-"+t,null===(a=n.getItemSync(s))?[2]:(c=JSON.parse(a)).id!==this.id?[3,2]:[4,Tt.default().lock(c.iat)];case 1:o.sent(),this.acquiredIatSet.delete(c.iat),n.removeItemSync(s),Tt.default().unlock(c.iat),e.notifyWaiters(),o.label=2;case 2:return[2]}}))}))},e.lockCorrector=function(t){for(var n=Date.now()-5e3,o=t,s=[],i=0;;){var a=o.keySync(i);if(null===a)break;s.push(a),i++}for(var c=!1,l=0;l<s.length;l++){var u=s[l];if(u.includes(r)){var d=o.getItemSync(u);if(null!==d){var h=JSON.parse(d);(void 0===h.timeRefreshed&&h.timeAcquired<n||void 0!==h.timeRefreshed&&h.timeRefreshed<n)&&(o.removeItemSync(u),c=!0)}}}c&&e.notifyWaiters()},e.waiters=void 0,e}();t.default=l})));const Nt={timeoutInSeconds:60},Pt={name:"auth0-spa-js",version:"2.1.3"},Et=()=>Date.now();class jt extends Error{constructor(e,t){super(t),this.error=e,this.error_description=t,Object.setPrototypeOf(this,jt.prototype)}static fromPayload({error:e,error_description:t}){return new jt(e,t)}}class Mt extends jt{constructor(e,t,n,o=null){super(e,t),this.state=n,this.appState=o,Object.setPrototypeOf(this,Mt.prototype)}}class Dt extends jt{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,Dt.prototype)}}class Ot extends Dt{constructor(e){super(),this.popup=e,Object.setPrototypeOf(this,Ot.prototype)}}class zt extends jt{constructor(e){super("cancelled","Popup closed"),this.popup=e,Object.setPrototypeOf(this,zt.prototype)}}class Lt extends jt{constructor(e,t,n){super(e,t),this.mfa_token=n,Object.setPrototypeOf(this,Lt.prototype)}}class Rt extends jt{constructor(e,t){super("missing_refresh_token",`Missing Refresh Token (audience: '${At(e,["default"])}', scope: '${At(t)}')`),this.audience=e,this.scope=t,Object.setPrototypeOf(this,Rt.prototype)}}function At(e,t=[]){return e&&!t.includes(e)?e:""}const Zt=()=>window.crypto,Ft=()=>{const e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.";let t="";return Array.from(Zt().getRandomValues(new Uint8Array(43))).forEach((n=>t+=e[n%66])),t},Ut=e=>btoa(e),Wt=e=>{var{clientId:t}=e,n=kt(e,["clientId"]);return new URLSearchParams((e=>Object.keys(e).filter((t=>void 0!==e[t])).reduce(((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]})),{}))(Object.assign({client_id:t},n))).toString()},Kt=e=>(e=>decodeURIComponent(atob(e).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")))(e.replace(/_/g,"/").replace(/-/g,"+")),Jt=async(e,t)=>{const n=await fetch(e,t);return{ok:n.ok,json:await n.json()}},Xt=async(e,t,n,o,s,r,i=1e4)=>s?(async(e,t,n,o,s,r,i)=>{return a={auth:{audience:t,scope:n},timeout:s,fetchUrl:e,fetchOptions:o,useFormData:i},c=r,new Promise((function(e,t){const n=new MessageChannel;n.port1.onmessage=function(o){o.data.error?t(new Error(o.data.error)):e(o.data),n.port1.close()},c.postMessage(a,[n.port2])}));var a,c})(e,t,n,o,i,s,r):(async(e,t,n)=>{const o=new AbortController;let s;return t.signal=o.signal,Promise.race([Jt(e,t),new Promise(((e,t)=>{s=setTimeout((()=>{o.abort(),t(new Error("Timeout when executing 'fetch'"))}),n)}))]).finally((()=>{clearTimeout(s)}))})(e,o,i);async function Bt(e,t){var{baseUrl:n,timeout:o,audience:s,scope:r,auth0Client:i,useFormData:a}=e,c=kt(e,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);const l=a?Wt(c):JSON.stringify(c);return await async function(e,t,n,o,s,r,i){let a,c=null;for(let l=0;l<3;l++)try{a=await Xt(e,n,o,s,r,i,t),c=null;break}catch(e){c=e}if(c)throw c;const l=a.json,{error:u,error_description:d}=l,h=kt(l,["error","error_description"]),{ok:p}=a;if(!p){const t=d||`HTTP error. Unable to fetch ${e}`;if("mfa_required"===u)throw new Lt(u,t,h.mfa_token);if("missing_refresh_token"===u)throw new Rt(n,o);throw new jt(u||"request_error",t)}return h}(`${n}/oauth/token`,o,s||"default",r,{method:"POST",body:l,headers:{"Content-Type":a?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(i||Pt))}},t,a)}const Yt=(...e)=>{return(t=e.filter(Boolean).join(" ").trim().split(/\s+/),Array.from(new Set(t))).join(" ");var t};class Gt{constructor(e,t="@@auth0spajs@@",n){this.prefix=t,this.suffix=n,this.clientId=e.clientId,this.scope=e.scope,this.audience=e.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(e){const[t,n,o,s]=e.split("::");return new Gt({clientId:n,scope:s,audience:o},t)}static fromCacheEntry(e){const{scope:t,audience:n,client_id:o}=e;return new Gt({scope:t,audience:n,clientId:o})}}class Vt{set(e,t){localStorage.setItem(e,JSON.stringify(t))}get(e){const t=window.localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch(e){return}}remove(e){localStorage.removeItem(e)}allKeys(){return Object.keys(window.localStorage).filter((e=>e.startsWith("@@auth0spajs@@")))}}class qt{constructor(){this.enclosedCache=function(){let e={};return{set(t,n){e[t]=n},get(t){const n=e[t];if(n)return n},remove(t){delete e[t]},allKeys:()=>Object.keys(e)}}()}}class Qt{constructor(e,t,n){this.cache=e,this.keyManifest=t,this.nowProvider=n||Et}async setIdToken(e,t,n){var o;const s=this.getIdTokenCacheKey(e);await this.cache.set(s,{id_token:t,decodedToken:n}),await(null===(o=this.keyManifest)||void 0===o?void 0:o.add(s))}async getIdToken(e){const t=await this.cache.get(this.getIdTokenCacheKey(e.clientId));if(!t&&e.scope&&e.audience){const t=await this.get(e);if(!t)return;if(!t.id_token||!t.decodedToken)return;return{id_token:t.id_token,decodedToken:t.decodedToken}}if(t)return{id_token:t.id_token,decodedToken:t.decodedToken}}async get(e,t=0){var n;let o=await this.cache.get(e.toKey());if(!o){const t=await this.getCacheKeys();if(!t)return;const n=this.matchExistingCacheKey(e,t);n&&(o=await this.cache.get(n))}if(!o)return;const s=await this.nowProvider(),r=Math.floor(s/1e3);return o.expiresAt-t<r?o.body.refresh_token?(o.body={refresh_token:o.body.refresh_token},await this.cache.set(e.toKey(),o),o.body):(await this.cache.remove(e.toKey()),void await(null===(n=this.keyManifest)||void 0===n?void 0:n.remove(e.toKey()))):o.body}async set(e){var t;const n=new Gt({clientId:e.client_id,scope:e.scope,audience:e.audience}),o=await this.wrapCacheEntry(e);await this.cache.set(n.toKey(),o),await(null===(t=this.keyManifest)||void 0===t?void 0:t.add(n.toKey()))}async clear(e){var t;const n=await this.getCacheKeys();n&&(await n.filter((t=>!e||t.includes(e))).reduce((async(e,t)=>{await e,await this.cache.remove(t)}),Promise.resolve()),await(null===(t=this.keyManifest)||void 0===t?void 0:t.clear()))}async wrapCacheEntry(e){const t=await this.nowProvider();return{body:e,expiresAt:Math.floor(t/1e3)+e.expires_in}}async getCacheKeys(){var e;return this.keyManifest?null===(e=await this.keyManifest.get())||void 0===e?void 0:e.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(e){return new Gt({clientId:e},"@@auth0spajs@@","@@user@@").toKey()}matchExistingCacheKey(e,t){return t.filter((t=>{var n;const o=Gt.fromKey(t),s=new Set(o.scope&&o.scope.split(" ")),r=(null===(n=e.scope)||void 0===n?void 0:n.split(" "))||[],i=o.scope&&r.reduce(((e,t)=>e&&s.has(t)),!0);return"@@auth0spajs@@"===o.prefix&&o.clientId===e.clientId&&o.audience===e.audience&&i}))[0]}}class en{constructor(e,t,n){this.storage=e,this.clientId=t,this.cookieDomain=n,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(e){this.storage.save(this.storageKey,e,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}}const tn=e=>"number"==typeof e,nn=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"];var on=St((function(e,t){var n=Ct&&Ct.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};function o(e,t){if(!t)return"";var n="; "+e;return!0===t?n:n+"="+t}function s(e,t,n){return encodeURIComponent(e).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(t).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(e){if("number"==typeof e.expires){var t=new Date;t.setMilliseconds(t.getMilliseconds()+864e5*e.expires),e.expires=t}return o("Expires",e.expires?e.expires.toUTCString():"")+o("Domain",e.domain)+o("Path",e.path)+o("Secure",e.secure)+o("SameSite",e.sameSite)}(n)}function r(e){for(var t={},n=e?e.split("; "):[],o=/(%[\dA-F]{2})+/gi,s=0;s<n.length;s++){var r=n[s].split("="),i=r.slice(1).join("=");'"'===i.charAt(0)&&(i=i.slice(1,-1));try{t[r[0].replace(o,decodeURIComponent)]=i.replace(o,decodeURIComponent)}catch(e){}}return t}function i(){return r(document.cookie)}function a(e,t,o){document.cookie=s(e,t,n({path:"/"},o))}t.__esModule=!0,t.encode=s,t.parse=r,t.getAll=i,t.get=function(e){return i()[e]},t.set=a,t.remove=function(e,t){a(e,"",n(n({},t),{expires:-1}))}}));It(on),on.encode,on.parse,on.getAll;var sn=on.get,rn=on.set,an=on.remove;const cn={get(e){const t=sn(e);if(void 0!==t)return JSON.parse(t)},save(e,t,n){let o={};"https:"===window.location.protocol&&(o={secure:!0,sameSite:"none"}),(null==n?void 0:n.daysUntilExpire)&&(o.expires=n.daysUntilExpire),(null==n?void 0:n.cookieDomain)&&(o.domain=n.cookieDomain),rn(e,JSON.stringify(t),o)},remove(e,t){let n={};(null==t?void 0:t.cookieDomain)&&(n.domain=t.cookieDomain),an(e,n)}},ln={get:e=>cn.get(e)||cn.get(`_legacy_${e}`),save(e,t,n){let o={};"https:"===window.location.protocol&&(o={secure:!0}),(null==n?void 0:n.daysUntilExpire)&&(o.expires=n.daysUntilExpire),(null==n?void 0:n.cookieDomain)&&(o.domain=n.cookieDomain),rn(`_legacy_${e}`,JSON.stringify(t),o),cn.save(e,t,n)},remove(e,t){let n={};(null==t?void 0:t.cookieDomain)&&(n.domain=t.cookieDomain),an(e,n),cn.remove(e,t),cn.remove(`_legacy_${e}`,t)}},un={get(e){if("undefined"==typeof sessionStorage)return;const t=sessionStorage.getItem(e);return null!=t?JSON.parse(t):void 0},save(e,t){sessionStorage.setItem(e,JSON.stringify(t))},remove(e){sessionStorage.removeItem(e)}};var dn,hn=function(e){return dn=dn||function(e,t,n){var o=void 0===t?null:t,s=function(e,t){var n=atob(e);if(t){for(var o=new Uint8Array(n.length),s=0,r=n.length;s<r;++s)o[s]=n.charCodeAt(s);return String.fromCharCode.apply(null,new Uint16Array(o.buffer))}return n}(e,void 0!==n&&n),r=s.indexOf("\n",10)+1,i=s.substring(r)+(o?"//# sourceMappingURL="+o:""),a=new Blob([i],{type:"application/javascript"});return URL.createObjectURL(a)}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YX0scG9ydHM6W3BdfSk9PntsZXQgZjtjb25zdHthdWRpZW5jZTp1LHNjb3BlOmx9PXJ8fHt9O3RyeXtjb25zdCByPWE/KGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoZSkscj17fTtyZXR1cm4gdC5mb3JFYWNoKCgoZSx0KT0+e3JbdF09ZX0pKSxyfSkoYy5ib2R5KTpKU09OLnBhcnNlKGMuYm9keSk7aWYoIXIucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09ci5ncmFudF90eXBlKXtjb25zdCBlPSgoZSx0KT0+b1tuKGUsdCldKSh1LGwpO2lmKCFlKXRocm93IG5ldyB0KHUsbCk7Yy5ib2R5PWE/cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKX1sZXQgaCxnOyJmdW5jdGlvbiI9PXR5cGVvZiBBYm9ydENvbnRyb2xsZXImJihoPW5ldyBBYm9ydENvbnRyb2xsZXIsYy5zaWduYWw9aC5zaWduYWwpO3RyeXtnPWF3YWl0IFByb21pc2UucmFjZShbKGQ9ZSxuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLGQpKSkpLGZldGNoKGksT2JqZWN0LmFzc2lnbih7fSxjKSldKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjplLm1lc3NhZ2V9KX1pZighZylyZXR1cm4gaCYmaC5hYm9ydCgpLHZvaWQgcC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtmPWF3YWl0IGcuanNvbigpLGYucmVmcmVzaF90b2tlbj8oKChlLHQscik9PntvW24odCxyKV09ZX0pKGYucmVmcmVzaF90b2tlbix1LGwpLGRlbGV0ZSBmLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KSh1LGwpLHAucG9zdE1lc3NhZ2Uoe29rOmcub2ssanNvbjpmfSl9Y2F0Y2goZSl7cC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3I6ZS5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLm1lc3NhZ2V9fSl9dmFyIGR9KSl9KCk7Cgo=",null,false),new Worker(dn,e)};const pn={};class fn{constructor(e,t){this.cache=e,this.clientId=t,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(e){var t;const n=new Set((null===(t=await this.cache.get(this.manifestKey))||void 0===t?void 0:t.keys)||[]);n.add(e),await this.cache.set(this.manifestKey,{keys:[...n]})}async remove(e){const t=await this.cache.get(this.manifestKey);if(t){const n=new Set(t.keys);return n.delete(e),n.size>0?await this.cache.set(this.manifestKey,{keys:[...n]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(e){return`@@auth0spajs@@::${e}`}}const mn={memory:()=>(new qt).enclosedCache,localstorage:()=>new Vt},gn=e=>mn[e],vn=e=>{const{openUrl:t,onRedirect:n}=e,o=kt(e,["openUrl","onRedirect"]);return Object.assign(Object.assign({},o),{openUrl:!1===t||t?t:n})},yn=new Ht;class wn{constructor(e){let t,n;if(this.userCache=(new qt).enclosedCache,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{await yn.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)},this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),e),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),e.authorizationParams)}),"undefined"!=typeof window&&(()=>{if(!Zt())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(void 0===Zt().subtle)throw new Error("\n      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.\n    ")})(),e.cache&&e.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),e.cache)n=e.cache;else{if(t=e.cacheLocation||"memory",!gn(t))throw new Error(`Invalid cache location "${t}"`);n=gn(t)()}this.httpTimeoutMs=e.httpTimeoutInSeconds?1e3*e.httpTimeoutInSeconds:1e4,this.cookieStorage=!1===e.legacySameSiteCookie?cn:ln,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(e=>`auth0.${this.options.clientId}.is.authenticated`)(),this.sessionCheckExpiryDays=e.sessionCheckExpiryDays||1;const o=e.useCookiesForTransactions?this.cookieStorage:un;var s;this.scope=Yt("openid",this.options.authorizationParams.scope,this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new en(o,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||Et,this.cacheManager=new Qt(n,n.allKeys?void 0:new fn(n,this.options.clientId),this.nowProvider),this.domainUrl=(s=this.options.domain,/^https?:\/\//.test(s)?s:`https://${s}`),this.tokenIssuer=((e,t)=>e?e.startsWith("https://")?e:`https://${e}/`:`${t}/`)(this.options.issuer,this.domainUrl),"undefined"!=typeof window&&window.Worker&&this.options.useRefreshTokens&&"memory"===t&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new hn)}_url(e){const t=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||Pt)));return`${this.domainUrl}${e}&auth0Client=${t}`}_authorizeUrl(e){return this._url(`/authorize?${Wt(e)}`)}async _verifyIdToken(e,t,n){const o=await this.nowProvider();return(e=>{if(!e.id_token)throw new Error("ID token is required but missing");const t=(e=>{const t=e.split("."),[n,o,s]=t;if(3!==t.length||!n||!o||!s)throw new Error("ID token could not be decoded");const r=JSON.parse(Kt(o)),i={__raw:e},a={};return Object.keys(r).forEach((e=>{i[e]=r[e],nn.includes(e)||(a[e]=r[e])})),{encoded:{header:n,payload:o,signature:s},header:JSON.parse(Kt(n)),claims:i,user:a}})(e.id_token);if(!t.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(t.claims.iss!==e.iss)throw new Error(`Issuer (iss) claim mismatch in the ID token; expected "${e.iss}", found "${t.claims.iss}"`);if(!t.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if("RS256"!==t.header.alg)throw new Error(`Signature algorithm of "${t.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!t.claims.aud||"string"!=typeof t.claims.aud&&!Array.isArray(t.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e.aud))throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${e.aud}" but was not one of "${t.claims.aud.join(", ")}"`);if(t.claims.aud.length>1){if(!t.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(t.claims.azp!==e.aud)throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${e.aud}", found "${t.claims.azp}"`)}}else if(t.claims.aud!==e.aud)throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${e.aud}" but found "${t.claims.aud}"`);if(e.nonce){if(!t.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(t.claims.nonce!==e.nonce)throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected "${e.nonce}", found "${t.claims.nonce}"`)}if(e.max_age&&!tn(t.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(null==t.claims.exp||!tn(t.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!tn(t.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");const n=e.leeway||60,o=new Date(e.now||Date.now()),s=new Date(0);if(s.setUTCSeconds(t.claims.exp+n),o>s)throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${o}) is after expiration time (${s})`);if(null!=t.claims.nbf&&tn(t.claims.nbf)){const e=new Date(0);if(e.setUTCSeconds(t.claims.nbf-n),o<e)throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${o}) is before ${e}`)}if(null!=t.claims.auth_time&&tn(t.claims.auth_time)){const s=new Date(0);if(s.setUTCSeconds(parseInt(t.claims.auth_time)+e.max_age+n),o>s)throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${o}) is after last auth at ${s}`)}if(e.organization){const n=e.organization.trim();if(n.startsWith("org_")){const e=n;if(!t.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(e!==t.claims.org_id)throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${e}", found "${t.claims.org_id}"`)}else{const e=n.toLowerCase();if(!t.claims.org_name)throw new Error("Organization Name (org_name) claim must be a string present in the ID token");if(e!==t.claims.org_name)throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${e}", found "${t.claims.org_name}"`)}}return t})({iss:this.tokenIssuer,aud:this.options.clientId,id_token:e,nonce:t,organization:n,leeway:this.options.leeway,max_age:(s=this.options.authorizationParams.max_age,"string"!=typeof s?s:parseInt(s,10)||void 0),now:o});var s}_processOrgHint(e){e?this.cookieStorage.save(this.orgHintCookieName,e,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(e,t,n){const o=Ut(Ft()),s=Ut(Ft()),r=Ft(),i=(e=>{const t=new Uint8Array(e);return(e=>{const t={"+":"-","/":"_","=":""};return e.replace(/[+/=]/g,(e=>t[e]))})(window.btoa(String.fromCharCode(...Array.from(t))))})(await(async e=>{const t=Zt().subtle.digest({name:"SHA-256"},(new TextEncoder).encode(e));return await t})(r)),a=((e,t,n,o,s,r,i,a)=>Object.assign(Object.assign(Object.assign({client_id:e.clientId},e.authorizationParams),n),{scope:Yt(t,n.scope),response_type:"code",response_mode:a||"query",state:o,nonce:s,redirect_uri:i||e.authorizationParams.redirect_uri,code_challenge:r,code_challenge_method:"S256"}))(this.options,this.scope,e,o,s,i,e.redirect_uri||this.options.authorizationParams.redirect_uri||n,null==t?void 0:t.response_mode),c=this._authorizeUrl(a);return{nonce:s,code_verifier:r,scope:a.scope,audience:a.audience||"default",redirect_uri:a.redirect_uri,state:o,url:c}}async loginWithPopup(e,t){var n;if(e=e||{},!(t=t||{}).popup&&(t.popup=(e=>{const t=window.screenX+(window.innerWidth-400)/2,n=window.screenY+(window.innerHeight-600)/2;return window.open("","auth0:authorize:popup",`left=${t},top=${n},width=400,height=600,resizable,scrollbars=yes,status=1`)})(),!t.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");const o=await this._prepareAuthorizeUrl(e.authorizationParams||{},{response_mode:"web_message"},window.location.origin);t.popup.location.href=o.url;const s=await(e=>new Promise(((t,n)=>{let o;const s=setInterval((()=>{e.popup&&e.popup.closed&&(clearInterval(s),clearTimeout(r),window.removeEventListener("message",o,!1),n(new zt(e.popup)))}),1e3),r=setTimeout((()=>{clearInterval(s),n(new Ot(e.popup)),window.removeEventListener("message",o,!1)}),1e3*(e.timeoutInSeconds||60));o=function(i){if(i.data&&"authorization_response"===i.data.type){if(clearTimeout(r),clearInterval(s),window.removeEventListener("message",o,!1),e.popup.close(),i.data.response.error)return n(jt.fromPayload(i.data.response));t(i.data.response)}},window.addEventListener("message",o)})))(Object.assign(Object.assign({},t),{timeoutInSeconds:t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}));if(o.state!==s.state)throw new jt("state_mismatch","Invalid state");const r=(null===(n=e.authorizationParams)||void 0===n?void 0:n.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:o.audience,scope:o.scope,code_verifier:o.code_verifier,grant_type:"authorization_code",code:s.code,redirect_uri:o.redirect_uri},{nonceIn:o.nonce,organization:r})}async getUser(){var e;const t=await this._getIdTokenFromCache();return null===(e=null==t?void 0:t.decodedToken)||void 0===e?void 0:e.user}async getIdTokenClaims(){var e;const t=await this._getIdTokenFromCache();return null===(e=null==t?void 0:t.decodedToken)||void 0===e?void 0:e.claims}async loginWithRedirect(e={}){var t;const n=vn(e),{openUrl:o,fragment:s,appState:r}=n,i=kt(n,["openUrl","fragment","appState"]),a=(null===(t=i.authorizationParams)||void 0===t?void 0:t.organization)||this.options.authorizationParams.organization,c=await this._prepareAuthorizeUrl(i.authorizationParams||{}),{url:l}=c,u=kt(c,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},u),{appState:r}),a&&{organization:a}));const d=s?`${l}#${s}`:l;o?await o(d):window.location.assign(d)}async handleRedirectCallback(e=window.location.href){const t=e.split("?").slice(1);if(0===t.length)throw new Error("There are no query params available for parsing.");const{state:n,code:o,error:s,error_description:r}=(e=>{e.indexOf("#")>-1&&(e=e.substring(0,e.indexOf("#")));const t=new URLSearchParams(e);return{state:t.get("state"),code:t.get("code")||void 0,error:t.get("error")||void 0,error_description:t.get("error_description")||void 0}})(t.join("")),i=this.transactionManager.get();if(!i)throw new jt("missing_transaction","Invalid state");if(this.transactionManager.remove(),s)throw new Mt(s,r||s,n,i.appState);if(!i.code_verifier||i.state&&i.state!==n)throw new jt("state_mismatch","Invalid state");const a=i.organization,c=i.nonce,l=i.redirect_uri;return await this._requestToken(Object.assign({audience:i.audience,scope:i.scope,code_verifier:i.code_verifier,grant_type:"authorization_code",code:o},l?{redirect_uri:l}:{}),{nonceIn:c,organization:a}),{appState:i.appState}}async checkSession(e){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}try{await this.getTokenSilently(e)}catch(e){}}async getTokenSilently(e={}){var t;const n=Object.assign(Object.assign({cacheMode:"on"},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:Yt(this.scope,null===(t=e.authorizationParams)||void 0===t?void 0:t.scope)})}),o=await((e,t)=>{let n=pn[t];return n||(n=e().finally((()=>{delete pn[t],n=null})),pn[t]=n),n})((()=>this._getTokenSilently(n)),`${this.options.clientId}::${n.authorizationParams.audience}::${n.authorizationParams.scope}`);return e.detailedResponse?o:null==o?void 0:o.access_token}async _getTokenSilently(e){const{cacheMode:t}=e,n=kt(e,["cacheMode"]);if("off"!==t){const e=await this._getEntryFromCache({scope:n.authorizationParams.scope,audience:n.authorizationParams.audience||"default",clientId:this.options.clientId});if(e)return e}if("cache-only"!==t){if(!await(async(e,t=3)=>{for(let n=0;n<t;n++)if(await e())return!0;return!1})((()=>yn.acquireLock("auth0.lock.getTokenSilently",5e3)),10))throw new Dt;try{if(window.addEventListener("pagehide",this._releaseLockOnPageHide),"off"!==t){const e=await this._getEntryFromCache({scope:n.authorizationParams.scope,audience:n.authorizationParams.audience||"default",clientId:this.options.clientId});if(e)return e}const e=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(n):await this._getTokenFromIFrame(n),{id_token:o,access_token:s,oauthTokenScope:r,expires_in:i}=e;return Object.assign(Object.assign({id_token:o,access_token:s},r?{scope:r}:null),{expires_in:i})}finally{await yn.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}}}async getTokenWithPopup(e={},t={}){var n;const o=Object.assign(Object.assign({},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:Yt(this.scope,null===(n=e.authorizationParams)||void 0===n?void 0:n.scope)})});return t=Object.assign(Object.assign({},Nt),t),await this.loginWithPopup(o,t),(await this.cacheManager.get(new Gt({scope:o.authorizationParams.scope,audience:o.authorizationParams.audience||"default",clientId:this.options.clientId}))).access_token}async isAuthenticated(){return!!await this.getUser()}_buildLogoutUrl(e){null!==e.clientId?e.clientId=e.clientId||this.options.clientId:delete e.clientId;const t=e.logoutParams||{},{federated:n}=t,o=kt(t,["federated"]),s=n?"&federated":"";return this._url(`/v2/logout?${Wt(Object.assign({clientId:e.clientId},o))}`)+s}async logout(e={}){const t=vn(e),{openUrl:n}=t,o=kt(t,["openUrl"]);null===e.clientId?await this.cacheManager.clear():await this.cacheManager.clear(e.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove("@@user@@");const s=this._buildLogoutUrl(o);n?await n(s):!1!==n&&window.location.assign(s)}async _getTokenFromIFrame(e){const t=Object.assign(Object.assign({},e.authorizationParams),{prompt:"none"}),n=this.cookieStorage.get(this.orgHintCookieName);n&&!t.organization&&(t.organization=n);const{url:o,state:s,nonce:r,code_verifier:i,redirect_uri:a,scope:c,audience:l}=await this._prepareAuthorizeUrl(t,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new jt("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");const n=e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,u=await((e,t,n=60)=>new Promise(((o,s)=>{const r=window.document.createElement("iframe");r.setAttribute("width","0"),r.setAttribute("height","0"),r.style.display="none";const i=()=>{window.document.body.contains(r)&&(window.document.body.removeChild(r),window.removeEventListener("message",a,!1))};let a;const c=setTimeout((()=>{s(new Dt),i()}),1e3*n);a=function(e){if(e.origin!=t)return;if(!e.data||"authorization_response"!==e.data.type)return;const n=e.source;n&&n.close(),e.data.response.error?s(jt.fromPayload(e.data.response)):o(e.data.response),clearTimeout(c),window.removeEventListener("message",a,!1),setTimeout(i,2e3)},window.addEventListener("message",a,!1),window.document.body.appendChild(r),r.setAttribute("src",e)})))(o,this.domainUrl,n);if(s!==u.state)throw new jt("state_mismatch","Invalid state");const d=await this._requestToken(Object.assign(Object.assign({},e.authorizationParams),{code_verifier:i,code:u.code,grant_type:"authorization_code",redirect_uri:a,timeout:e.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:r,organization:t.organization});return Object.assign(Object.assign({},d),{scope:c,oauthTokenScope:d.scope,audience:l})}catch(e){throw"login_required"===e.error&&this.logout({openUrl:!1}),e}}async _getTokenUsingRefreshToken(e){const t=await this.cacheManager.get(new Gt({scope:e.authorizationParams.scope,audience:e.authorizationParams.audience||"default",clientId:this.options.clientId}));if(!(t&&t.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw new Rt(e.authorizationParams.audience||"default",e.authorizationParams.scope)}const n=e.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,o="number"==typeof e.timeoutInSeconds?1e3*e.timeoutInSeconds:null;try{const s=await this._requestToken(Object.assign(Object.assign(Object.assign({},e.authorizationParams),{grant_type:"refresh_token",refresh_token:t&&t.refresh_token,redirect_uri:n}),o&&{timeout:o}));return Object.assign(Object.assign({},s),{scope:e.authorizationParams.scope,oauthTokenScope:s.scope,audience:e.authorizationParams.audience||"default"})}catch(t){if((t.message.indexOf("Missing Refresh Token")>-1||t.message&&t.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw t}}async _saveEntryInCache(e){const{id_token:t,decodedToken:n}=e,o=kt(e,["id_token","decodedToken"]);this.userCache.set("@@user@@",{id_token:t,decodedToken:n}),await this.cacheManager.setIdToken(this.options.clientId,e.id_token,e.decodedToken),await this.cacheManager.set(o)}async _getIdTokenFromCache(){const e=this.options.authorizationParams.audience||"default",t=await this.cacheManager.getIdToken(new Gt({clientId:this.options.clientId,audience:e,scope:this.scope})),n=this.userCache.get("@@user@@");return t&&t.id_token===(null==n?void 0:n.id_token)?n:(this.userCache.set("@@user@@",t),t)}async _getEntryFromCache({scope:e,audience:t,clientId:n}){const o=await this.cacheManager.get(new Gt({scope:e,audience:t,clientId:n}),60);if(o&&o.access_token){const{access_token:e,oauthTokenScope:t,expires_in:n}=o,s=await this._getIdTokenFromCache();return s&&Object.assign(Object.assign({id_token:s.id_token,access_token:e},t?{scope:t}:null),{expires_in:n})}}async _requestToken(e,t){const{nonceIn:n,organization:o}=t||{},s=await Bt(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},e),this.worker),r=await this._verifyIdToken(s.id_token,n,o);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},s),{decodedToken:r,scope:e.scope,audience:e.audience||"default"}),s.scope?{oauthTokenScope:s.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(o||r.claims.org_id),Object.assign(Object.assign({},s),{decodedToken:r})}}const bn=ut(!1),$n=ut(null),_n=ut(null),xn=ut(!1);let kn=null;async function Cn(){try{console.log("Initializing Auth0 client"),kn=await async function(e){const t=new wn(e);return await t.checkSession(),t}({domain:"dev-3ivgmqrieljfq0g2.us.auth0.com",clientId:"s1h0Ekd4prMP7OxEyoTnaSjIKuCXmBqa",authorizationParams:{redirect_uri:"http://localhost:8080",audience:"https://horsebreeding/api",scope:"openid profile email"}}),_n.set(kn),xn.set(!0);try{window.location.search.includes("code=")&&window.location.search.includes("state=")&&(await kn.handleRedirectCallback(),window.history.replaceState({},document.title,window.location.pathname));const e=await kn.isAuthenticated();if(bn.set(e),e){const e=await kn.getUser();$n.set(e),console.log("User is authenticated:",e)}}catch(e){console.error("Error handling authentication:",e),bn.set(!1),$n.set(null)}}catch(e){throw console.error("Error initializing Auth0:",e),e}}async function In(){if(!kn)return console.error("Auth0 client is not initialized"),null;try{console.log("Getting token...");const e=await kn.getTokenSilently({audience:"https://horsebreeding/api"});return console.log("Token received:",e.substring(0,10)+"..."),e}catch(e){return console.error("Error getting token:",e),null}}function Sn(e,t,n){const o=e.slice();return o[41]=t[n],o}function Tn(e){let t,n,o,s,i,a,c,l,u,d,h,p,f,m,g,v,y,w,b,$,_,k,C,E,M,O,z,R,Z,U,W,K,J,X,B,Y,G,V,q,Q,ee,te,ne,oe,se,re,ie,ae=e[14]&&jn(e),ce=e[1],le=[];for(let t=0;t<ce.length;t+=1)le[t]=zn(Sn(e,ce,t));const ue=e=>ke(le[e],1,1,(()=>{le[e]=null}));return{c(){ae&&ae.c(),t=P(),n=H("div"),o=H("input"),s=P(),i=H("select"),a=H("option"),a.textContent="Sex",c=H("option"),c.textContent="Mare",l=H("option"),l.textContent="Stallion",u=H("option"),u.textContent="Gelding",d=P(),h=H("input"),p=P(),f=H("input"),m=P(),g=H("input"),v=P(),y=H("input"),w=P(),b=H("input"),$=P(),_=H("input"),k=P(),C=H("input"),E=P(),M=H("select"),O=H("option"),O.textContent="Select Score Quartile",z=H("option"),z.textContent="1st Quartile",R=H("option"),R.textContent="2nd Quartile",Z=H("option"),Z.textContent="3rd Quartile",U=H("option"),U.textContent="4th Quartile",W=P(),K=H("button"),K.textContent="Search",J=P(),X=H("table"),B=H("thead"),B.innerHTML="<tr><th>Name</th> \n          <th>ID</th> \n          <th>Sex</th> \n          <th>Year</th> \n          <th>Actions</th></tr>",Y=P(),G=H("tbody");for(let e=0;e<le.length;e+=1)le[e].c();V=P(),q=H("nav"),Q=H("button"),ee=N("Previous"),ne=P(),oe=H("button"),oe.textContent="Next",D(o,"type","text"),D(o,"placeholder","Name"),D(o,"class","input"),a.__value="",a.value=a.__value,c.__value="Mare",c.value=c.__value,l.__value="Stallion",l.value=l.__value,u.__value="Gelding",u.value=u.__value,D(i,"class","input"),void 0===e[5]&&de((()=>e[24].call(i))),D(h,"type","number"),D(h,"placeholder","Min age"),D(h,"class","input"),D(f,"type","number"),D(f,"placeholder","Max age"),D(f,"class","input"),D(g,"type","number"),D(g,"placeholder","Min height (m)"),D(g,"class","input"),D(y,"type","number"),D(y,"placeholder","Max height (m)"),D(y,"class","input"),D(b,"type","number"),D(b,"placeholder","Min jumping class"),D(b,"class","input"),D(_,"type","text"),D(_,"placeholder","Breeder"),D(_,"class","input"),D(C,"type","text"),D(C,"placeholder","FEI ID"),D(C,"class","input"),O.__value="",O.value=O.__value,z.__value="1",z.value=z.__value,R.__value="2",R.value=R.__value,Z.__value="3",Z.value=Z.__value,U.__value="4",U.value=U.__value,D(M,"class","input"),void 0===e[13]&&de((()=>e[32].call(M))),D(K,"class","button is-primary"),D(n,"class","filters"),D(X,"class","table is-fullwidth is-striped"),D(Q,"class","button"),Q.disabled=te=1===e[0],D(oe,"class","button"),D(q,"class","pagination"),D(q,"aria-label","pagination")},m(r,S){ae&&ae.m(r,S),I(r,t,S),I(r,n,S),x(n,o),A(o,e[4]),x(n,s),x(n,i),x(i,a),x(i,c),x(i,l),x(i,u),F(i,e[5],!0),x(n,d),x(n,h),A(h,e[6]),x(n,p),x(n,f),A(f,e[7]),x(n,m),x(n,g),A(g,e[8]),x(n,v),x(n,y),A(y,e[9]),x(n,w),x(n,b),A(b,e[10]),x(n,$),x(n,_),A(_,e[11]),x(n,k),x(n,C),A(C,e[12]),x(n,E),x(n,M),x(M,O),x(M,z),x(M,R),x(M,Z),x(M,U),F(M,e[13],!0),x(n,W),x(n,K),I(r,J,S),I(r,X,S),x(X,B),x(X,Y),x(X,G);for(let e=0;e<le.length;e+=1)le[e]&&le[e].m(G,null);I(r,V,S),I(r,q,S),x(q,Q),x(Q,ee),x(q,ne),x(q,oe),se=!0,re||(ie=[j(o,"input",e[23]),j(i,"change",e[24]),j(h,"input",e[25]),j(f,"input",e[26]),j(g,"input",e[27]),j(y,"input",e[28]),j(b,"input",e[29]),j(_,"input",e[30]),j(C,"input",e[31]),j(M,"change",e[32]),j(K,"click",e[16]),j(Q,"click",e[35]),j(oe,"click",e[36])],re=!0)},p(e,n){if(e[14]?ae?ae.p(e,n):(ae=jn(e),ae.c(),ae.m(t.parentNode,t)):ae&&(ae.d(1),ae=null),16&n[0]&&o.value!==e[4]&&A(o,e[4]),32&n[0]&&F(i,e[5]),64&n[0]&&L(h.value)!==e[6]&&A(h,e[6]),128&n[0]&&L(f.value)!==e[7]&&A(f,e[7]),256&n[0]&&L(g.value)!==e[8]&&A(g,e[8]),512&n[0]&&L(y.value)!==e[9]&&A(y,e[9]),1024&n[0]&&L(b.value)!==e[10]&&A(b,e[10]),2048&n[0]&&_.value!==e[11]&&A(_,e[11]),4096&n[0]&&C.value!==e[12]&&A(C,e[12]),8192&n[0]&&F(M,e[13]),1835010&n[0]){let t;for(ce=e[1],t=0;t<ce.length;t+=1){const o=Sn(e,ce,t);le[t]?(le[t].p(o,n),xe(le[t],1)):(le[t]=zn(o),le[t].c(),xe(le[t],1),le[t].m(G,null))}for($e(),t=ce.length;t<le.length;t+=1)ue(t);_e()}(!se||1&n[0]&&te!==(te=1===e[0]))&&(Q.disabled=te)},i(e){if(!se){for(let e=0;e<ce.length;e+=1)xe(le[e]);se=!0}},o(e){le=le.filter(Boolean);for(let e=0;e<le.length;e+=1)ke(le[e]);se=!1},d(e){ae&&ae.d(e),e&&S(t),e&&S(n),e&&S(J),e&&S(X),T(le,e),e&&S(V),e&&S(q),re=!1,r(ie)}}}function Hn(t){let n;return{c(){n=H("div"),n.innerHTML='<p class="has-text-centered">No horses found.</p>',D(n,"class","empty-state")},m(e,t){I(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}function Nn(t){let n;return{c(){n=H("div"),n.innerHTML='<p class="has-text-centered">Loading horses...</p> \n      <progress class="progress is-info" max="100"></progress>',D(n,"class","loading-container")},m(e,t){I(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}function Pn(t){let n,o;return{c(){n=H("div"),o=N(t[3]),D(n,"class","notification is-danger")},m(e,t){I(e,n,t),x(n,o)},p(e,t){8&t[0]&&R(o,e[3])},i:e,o:e,d(e){e&&S(n)}}}function En(t){let n;return{c(){n=H("p"),n.textContent="Please log in to view horses.",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}function jn(e){let t,n;return{c(){t=H("div"),n=N(e[14]),D(t,"class","notification is-success")},m(e,o){I(e,t,o),x(t,n)},p(e,t){16384&t[0]&&R(n,e[14])},d(e){e&&S(t)}}}function Mn(e){let t;return{c(){t=N("View")},m(e,n){I(e,t,n)},d(e){e&&S(t)}}}function Dn(e){let t,n,o;function s(){return e[34](e[41])}return{c(){t=H("button"),t.textContent="Add to My Horses",D(t,"class","button is-small is-info")},m(e,r){I(e,t,r),n||(o=j(t,"click",s),n=!0)},p(t,n){e=t},d(e){e&&S(t),n=!1,o()}}}function On(e){let t,n,o;function s(){return e[33](e[41])}return{c(){t=H("button"),t.textContent="Remove from My Horses",D(t,"class","button is-small is-danger")},m(e,r){I(e,t,r),n||(o=j(t,"click",s),n=!0)},p(t,n){e=t},d(e){e&&S(t),n=!1,o()}}}function zn(e){let t,n,o,s,r,i,a,c,l,u,d,h,p,f,m,g,v,y,w,b,$,_,k=e[41].Name+"",C=e[41].HorsetelexID+"",T=e[41]["Horse Type"]+"",E=Math.floor(e[41]["Horse YoB"])+"";function j(e,t){return 2&t[0]&&(b=null),null==b&&(b=!!e[20](e[41].HorsetelexID)),b?On:Dn}y=new Ve({props:{class:"button is-small is-info",to:`/horses/${e[41].HorsetelexID}`,$$slots:{default:[Mn]},$$scope:{ctx:e}}});let M=j(e,[-1,-1]),O=M(e);return{c(){t=H("tr"),n=H("td"),o=H("a"),s=N(k),i=P(),a=H("td"),c=N(C),l=P(),u=H("td"),d=N(T),h=P(),p=H("td"),f=N(E),m=P(),g=H("td"),v=H("div"),Ne(y.$$.fragment),w=P(),O.c(),$=P(),D(o,"href",r=e[41]["Horsetelex link"]),D(o,"target","_blank"),D(v,"class","buttons")},m(e,r){I(e,t,r),x(t,n),x(n,o),x(o,s),x(t,i),x(t,a),x(a,c),x(t,l),x(t,u),x(u,d),x(t,h),x(t,p),x(p,f),x(t,m),x(t,g),x(g,v),Pe(y,v,null),x(v,w),O.m(v,null),x(t,$),_=!0},p(e,t){(!_||2&t[0])&&k!==(k=e[41].Name+"")&&R(s,k),(!_||2&t[0]&&r!==(r=e[41]["Horsetelex link"]))&&D(o,"href",r),(!_||2&t[0])&&C!==(C=e[41].HorsetelexID+"")&&R(c,C),(!_||2&t[0])&&T!==(T=e[41]["Horse Type"]+"")&&R(d,T),(!_||2&t[0])&&E!==(E=Math.floor(e[41]["Horse YoB"])+"")&&R(f,E);const n={};2&t[0]&&(n.to=`/horses/${e[41].HorsetelexID}`),8192&t[1]&&(n.$$scope={dirty:t,ctx:e}),y.$set(n),M===(M=j(e,t))&&O?O.p(e,t):(O.d(1),O=M(e),O&&(O.c(),O.m(v,null)))},i(e){_||(xe(y.$$.fragment,e),_=!0)},o(e){ke(y.$$.fragment,e),_=!1},d(e){e&&S(t),Ee(y),O.d()}}}function Ln(e){let t,n,o,s;const r=[En,Pn,Nn,Hn,Tn],i=[];function a(e,t){return e[15]?e[3]?1:e[2]?2:0===e[1].length?3:4:0}return n=a(e),o=i[n]=r[n](e),{c(){t=H("main"),o.c()},m(e,o){I(e,t,o),i[n].m(t,null),s=!0},p(e,s){let c=n;n=a(e),n===c?i[n].p(e,s):($e(),ke(i[c],1,1,(()=>{i[c]=null})),_e(),o=i[n],o?o.p(e,s):(o=i[n]=r[n](e),o.c()),xe(o,1),o.m(t,null))},i(e){s||(xe(o),s=!0)},o(e){ke(o),s=!1},d(e){e&&S(t),i[n].d()}}}function Rn(e,t,n){let o;l(e,bn,(e=>n(15,o=e)));let s,r,i,a,c,u,d,h,p,f,{horses:m=[]}=t,{page:g=1}=t,{per_page:v=100}=t,{fetchHorses:y}=t,{isLoading:w}=t,b=null,$={},_=[],x=null;const k=e=>{e<1||(n(0,g=e),y(g,v,$))},C=e=>{n(14,x=e),setTimeout((()=>{n(14,x=null)}),3e3)},I=async e=>{try{const t=await In();if(!t)throw new Error("No authentication token available");const n=await fetch("http://127.0.0.1:5000/my_horses",{method:"POST",body:JSON.stringify({horse_id:e}),headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"});if(!n.ok){const e=await n.text();throw console.error("Error adding horse:",e),new Error("Failed to add horse")}_=[..._,{HorsetelexID:e}];const o=m.find((t=>t.HorsetelexID===e)),s=o?o.Name:"The horse";C(`${s} has been added to your horses.`)}catch(e){console.error("Error adding horse:",e),n(3,b="Failed to add horse. Please try again.")}},S=async e=>{try{const t=await In();if(!t)throw new Error("No authentication token available");const n=await fetch(`http://127.0.0.1:5000/my_horses/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"});if(!n.ok){const e=await n.text();throw console.error("Error removing horse:",e),new Error("Failed to remove horse")}_=_.filter((t=>t.HorsetelexID!==e));const o=m.find((t=>t.HorsetelexID===e)),s=o?o.Name:"The horse";C(`${s} has been removed from your horses.`)}catch(e){console.error("Error removing horse:",e),n(3,b="Failed to remove horse. Please try again.")}};ee((()=>{o&&(async()=>{try{const e=await In();if(!e)return void console.log("Not authenticated, cannot fetch my_horses");const t=await fetch("http://127.0.0.1:5000/my_horses",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include"});if(!t.ok){const e=await t.text();return void console.error("Failed to fetch my horses:",e)}const n=await t.json();_=n.data}catch(e){console.error("Error fetching my_horses:",e)}})()}));return e.$$set=e=>{"horses"in e&&n(1,m=e.horses),"page"in e&&n(0,g=e.page),"per_page"in e&&n(21,v=e.per_page),"fetchHorses"in e&&n(22,y=e.fetchHorses),"isLoading"in e&&n(2,w=e.isLoading)},e.$$.update=()=>{2&e.$$.dirty[0]&&console.log("Horses in ViewHorses updated:",m)},[g,m,w,b,s,r,i,a,c,u,d,h,p,f,x,o,()=>{$={},s&&($.name=s),r&&($.sex=r),i&&($.min_age=i),a&&($.max_age=a),c&&($.min_height=c),u&&($.max_height=u),d&&($.min_jumping_class=d),h&&($.breeder=h),p&&($.fei=p),f&&($.quartile=Number(f)),console.log("Applying filters:",$),n(0,g=1),y(g,v,$)},k,I,S,e=>_.some((t=>t.HorsetelexID===e)),v,y,function(){s=this.value,n(4,s)},function(){r=U(this),n(5,r)},function(){i=L(this.value),n(6,i)},function(){a=L(this.value),n(7,a)},function(){c=L(this.value),n(8,c)},function(){u=L(this.value),n(9,u)},function(){d=L(this.value),n(10,d)},function(){h=this.value,n(11,h)},function(){p=this.value,n(12,p)},function(){f=U(this),n(13,f)},e=>S(e.HorsetelexID),e=>I(e.HorsetelexID),()=>k(g-1),()=>k(g+1)]}class An extends De{constructor(e){super(),Me(this,e,Rn,Ln,a,{horses:1,page:0,per_page:21,fetchHorses:22,isLoading:2},null,[-1,-1])}}function Zn(e,t,n){const o=e.slice();return o[32]=t[n],o}function Fn(e){let t,n;return{c(){t=H("div"),n=N(e[3]),D(t,"class","notification is-danger")},m(e,o){I(e,t,o),x(t,n)},p(e,t){8&t[0]&&R(n,e[3])},d(e){e&&S(t)}}}function Un(t){let n;return{c(){n=H("p"),n.textContent="Please log in to view your horses.",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}function Wn(e){let t,n,o,s,i,a,c,l,u,d,h,p,f,m,g,v,y,w,b,$,_,k,C,T,N,M,O,z,R,Z,U,W,K,J,X,B;const Y=[Xn,Jn,Kn],G=[];function V(e,t){return e[2]?0:0===e[0].length?1:2}return U=V(e),W=G[U]=Y[U](e),{c(){t=H("div"),n=H("input"),o=P(),s=H("select"),i=H("option"),i.textContent="Sex",a=H("option"),a.textContent="Mare",c=H("option"),c.textContent="Stallion",l=H("option"),l.textContent="Gelding",u=P(),d=H("input"),h=P(),p=H("input"),f=P(),m=H("input"),g=P(),v=H("input"),y=P(),w=H("input"),b=P(),$=H("input"),_=P(),k=H("select"),C=H("option"),C.textContent="Select Score Quartile",T=H("option"),T.textContent="1st Quartile",N=H("option"),N.textContent="2nd Quartile",M=H("option"),M.textContent="3rd Quartile",O=H("option"),O.textContent="4th Quartile",z=P(),R=H("button"),R.textContent="Search",Z=P(),W.c(),K=E(),D(n,"type","text"),D(n,"placeholder","Search by name"),D(n,"class","input"),i.__value="",i.value=i.__value,a.__value="Mare",a.value=a.__value,c.__value="Stallion",c.value=c.__value,l.__value="Gelding",l.value=l.__value,D(s,"class","input"),void 0===e[5]&&de((()=>e[18].call(s))),D(d,"type","text"),D(d,"placeholder","Search by breeder"),D(d,"class","input"),D(p,"type","text"),D(p,"placeholder","Search by FEI ID"),D(p,"class","input"),D(m,"type","number"),D(m,"placeholder","Min age"),D(m,"class","input"),D(v,"type","number"),D(v,"placeholder","Max age"),D(v,"class","input"),D(w,"type","number"),D(w,"placeholder","Min height (m)"),D(w,"class","input"),D($,"type","number"),D($,"placeholder","Min jumping class"),D($,"class","input"),C.__value="",C.value=C.__value,T.__value="1",T.value=T.__value,N.__value="2",N.value=N.__value,M.__value="3",M.value=M.__value,O.__value="4",O.value=O.__value,D(k,"class","input"),void 0===e[12]&&de((()=>e[25].call(k))),D(R,"class","button is-primary"),D(t,"class","filters")},m(r,S){I(r,t,S),x(t,n),A(n,e[4]),x(t,o),x(t,s),x(s,i),x(s,a),x(s,c),x(s,l),F(s,e[5],!0),x(t,u),x(t,d),A(d,e[10]),x(t,h),x(t,p),A(p,e[11]),x(t,f),x(t,m),A(m,e[6]),x(t,g),x(t,v),A(v,e[7]),x(t,y),x(t,w),A(w,e[8]),x(t,b),x(t,$),A($,e[9]),x(t,_),x(t,k),x(k,C),x(k,T),x(k,N),x(k,M),x(k,O),F(k,e[12],!0),x(t,z),x(t,R),I(r,Z,S),G[U].m(r,S),I(r,K,S),J=!0,X||(B=[j(n,"input",e[17]),j(s,"change",e[18]),j(d,"input",e[19]),j(p,"input",e[20]),j(m,"input",e[21]),j(v,"input",e[22]),j(w,"input",e[23]),j($,"input",e[24]),j(k,"change",e[25]),j(R,"click",e[14])],X=!0)},p(e,t){16&t[0]&&n.value!==e[4]&&A(n,e[4]),32&t[0]&&F(s,e[5]),1024&t[0]&&d.value!==e[10]&&A(d,e[10]),2048&t[0]&&p.value!==e[11]&&A(p,e[11]),64&t[0]&&L(m.value)!==e[6]&&A(m,e[6]),128&t[0]&&L(v.value)!==e[7]&&A(v,e[7]),256&t[0]&&L(w.value)!==e[8]&&A(w,e[8]),512&t[0]&&L($.value)!==e[9]&&A($,e[9]),4096&t[0]&&F(k,e[12]);let o=U;U=V(e),U===o?G[U].p(e,t):($e(),ke(G[o],1,1,(()=>{G[o]=null})),_e(),W=G[U],W?W.p(e,t):(W=G[U]=Y[U](e),W.c()),xe(W,1),W.m(K.parentNode,K))},i(e){J||(xe(W),J=!0)},o(e){ke(W),J=!1},d(e){e&&S(t),e&&S(Z),G[U].d(e),e&&S(K),X=!1,r(B)}}}function Kn(e){let t,n,o,s,i,a,c,l,u,d,h,p,f,m,g=[],v=new Map,y=e[0];const w=e=>e[32].HorsetelexID;for(let t=0;t<y.length;t+=1){let n=Zn(e,y,t),o=w(n);v.set(o,g[t]=Yn(o,n))}return{c(){t=H("table"),n=H("thead"),n.innerHTML="<tr><th>Name</th> \n            <th>ID</th> \n            <th>Sex</th> \n            <th>Year</th> \n            <th>Actions</th></tr>",o=P(),s=H("tbody");for(let e=0;e<g.length;e+=1)g[e].c();i=P(),a=H("nav"),c=H("button"),l=N("Previous"),d=P(),h=H("button"),h.textContent="Next",D(t,"class","table is-fullwidth is-striped"),D(c,"class","button"),c.disabled=u=1===e[1],D(h,"class","button"),D(a,"class","pagination"),D(a,"aria-label","pagination")},m(r,u){I(r,t,u),x(t,n),x(t,o),x(t,s);for(let e=0;e<g.length;e+=1)g[e]&&g[e].m(s,null);I(r,i,u),I(r,a,u),x(a,c),x(c,l),x(a,d),x(a,h),p=!0,f||(m=[j(c,"click",e[27]),j(h,"click",e[28])],f=!0)},p(e,t){65537&t[0]&&(y=e[0],$e(),g=function(e,t,n,o,s,i,a,c,l,u,d,h){let p=e.length,f=i.length,m=p;const g={};for(;m--;)g[e[m].key]=m;const v=[],y=new Map,w=new Map,b=[];for(m=f;m--;){const e=h(s,i,m),r=n(e);let c=a.get(r);c?o&&b.push((()=>c.p(e,t))):(c=u(r,e),c.c()),y.set(r,v[m]=c),r in g&&w.set(r,Math.abs(m-g[r]))}const $=new Set,_=new Set;function x(e){xe(e,1),e.m(c,d),a.set(e.key,e),d=e.first,f--}for(;p&&f;){const t=v[f-1],n=e[p-1],o=t.key,s=n.key;t===n?(d=t.first,p--,f--):y.has(s)?!a.has(o)||$.has(o)?x(t):_.has(s)?p--:w.get(o)>w.get(s)?(_.add(o),x(t)):($.add(s),p--):(l(n,a),p--)}for(;p--;){const t=e[p];y.has(t.key)||l(t,a)}for(;f;)x(v[f-1]);return r(b),v}(g,t,w,1,e,y,v,s,Se,Yn,null,Zn),_e()),(!p||2&t[0]&&u!==(u=1===e[1]))&&(c.disabled=u)},i(e){if(!p){for(let e=0;e<y.length;e+=1)xe(g[e]);p=!0}},o(e){for(let e=0;e<g.length;e+=1)ke(g[e]);p=!1},d(e){e&&S(t);for(let e=0;e<g.length;e+=1)g[e].d();e&&S(i),e&&S(a),f=!1,r(m)}}}function Jn(t){let n;return{c(){n=H("p"),n.textContent="No horses in your collection yet.",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}function Xn(t){let n;return{c(){n=H("p"),n.textContent="Loading horses...",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}function Bn(e){let t;return{c(){t=N("View")},m(e,n){I(e,t,n)},d(e){e&&S(t)}}}function Yn(e,t){let n,o,s,r,i,a,c,l,u,d,h,p,f,m,g,v,y,w,b,$,_,k,C,T,E,M=t[32].Name+"",O=t[32].HorsetelexID+"",z=t[32]["Horse Type"]+"",L=Math.floor(t[32]["Horse YoB"])+"";function A(){return t[26](t[32])}return b=new Ve({props:{to:`/horses/${t[32].HorsetelexID}`,$$slots:{default:[Bn]},$$scope:{ctx:t}}}),{key:e,first:null,c(){n=H("tr"),o=H("td"),s=H("a"),r=N(M),a=P(),c=H("td"),l=N(O),u=P(),d=H("td"),h=N(z),p=P(),f=H("td"),m=N(L),g=P(),v=H("td"),y=H("div"),w=H("button"),Ne(b.$$.fragment),$=P(),_=H("button"),_.textContent="Remove",k=P(),D(s,"href",i=t[32]["Horsetelex link"]),D(s,"target","_blank"),D(w,"class","button is-small is-info"),D(_,"class","button is-small is-danger"),D(y,"class","buttons"),this.first=n},m(e,t){I(e,n,t),x(n,o),x(o,s),x(s,r),x(n,a),x(n,c),x(c,l),x(n,u),x(n,d),x(d,h),x(n,p),x(n,f),x(f,m),x(n,g),x(n,v),x(v,y),x(y,w),Pe(b,w,null),x(y,$),x(y,_),x(n,k),C=!0,T||(E=j(_,"click",A),T=!0)},p(e,n){t=e,(!C||1&n[0])&&M!==(M=t[32].Name+"")&&R(r,M),(!C||1&n[0]&&i!==(i=t[32]["Horsetelex link"]))&&D(s,"href",i),(!C||1&n[0])&&O!==(O=t[32].HorsetelexID+"")&&R(l,O),(!C||1&n[0])&&z!==(z=t[32]["Horse Type"]+"")&&R(h,z),(!C||1&n[0])&&L!==(L=Math.floor(t[32]["Horse YoB"])+"")&&R(m,L);const o={};1&n[0]&&(o.to=`/horses/${t[32].HorsetelexID}`),16&n[1]&&(o.$$scope={dirty:n,ctx:t}),b.$set(o)},i(e){C||(xe(b.$$.fragment,e),C=!0)},o(e){ke(b.$$.fragment,e),C=!1},d(e){e&&S(n),Ee(b),T=!1,E()}}}function Gn(e){let t,n,o,s,r,i,a,c=e[3]&&Fn(e);const l=[Wn,Un],u=[];function d(e,t){return e[13]?0:1}return r=d(e),i=u[r]=l[r](e),{c(){t=H("main"),n=H("h1"),n.textContent="My Horses",o=P(),c&&c.c(),s=P(),i.c(),D(n,"class","title")},m(e,i){I(e,t,i),x(t,n),x(t,o),c&&c.m(t,null),x(t,s),u[r].m(t,null),a=!0},p(e,n){e[3]?c?c.p(e,n):(c=Fn(e),c.c(),c.m(t,s)):c&&(c.d(1),c=null);let o=r;r=d(e),r===o?u[r].p(e,n):($e(),ke(u[o],1,1,(()=>{u[o]=null})),_e(),i=u[r],i?i.p(e,n):(i=u[r]=l[r](e),i.c()),xe(i,1),i.m(t,null))},i(e){a||(xe(i),a=!0)},o(e){ke(i),a=!1},d(e){e&&S(t),c&&c.d(),u[r].d()}}}let Vn=100;function qn(e,t,n){let o;l(e,bn,(e=>n(13,o=e)));let s,r,i,a,c,u,d,h,p,f=[],m=1,g=!1,v=null,y={};const w=e=>{e<1||(n(1,m=e),$(m,Vn,y))},b=async e=>{try{const t=await In();if(!t)throw new Error("No authentication token available");const n=await fetch(`http://127.0.0.1:5000/my_horses/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"});if(!n.ok){console.error("Response status:",n.status),console.error("Response status text:",n.statusText);const e=await n.text();throw console.error("Error response:",e),new Error("Failed to remove horse")}$(m,Vn,y)}catch(e){console.error("Error removing horse:",e),e="Failed to remove horse. Please try again."}},$=async(e,t,o={})=>{if(!g)try{n(2,g=!0),n(3,v=null);const s=await In();if(!s)return void n(3,v="Session expired or not authenticated. Please log in again.");const r=Object.entries(o).reduce(((e,[t,n])=>`${e}&${t}=${n}`),"");console.log("Fetching horses with token:",s.substring(0,10)+"...");const i=await fetch(`http://127.0.0.1:5000/my_horses?page=${e}&per_page=${t}${r}`,{method:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},credentials:"include"});if(!i.ok){console.error("Response status:",i.status),console.error("Response status text:",i.statusText);const e=await i.text();throw console.error("Error response:",e),new Error("Failed to fetch horses")}const a=await i.json();n(0,f=a.data),console.log("Fetched horses:",f)}catch(e){console.error("Error fetching horses:",e),e="Failed to fetch horses. Please try again.",n(0,f=[])}finally{n(2,g=!1)}};ee((async()=>{console.log("MyHorses component mounted"),o?$(m,Vn):(console.log("User not authenticated"),n(3,v="Please log in to view your horses."))}));return e.$$.update=()=>{1&e.$$.dirty[0]&&console.log("Horses in MyHorses updated:",f)},[f,m,g,v,s,r,i,a,c,u,d,h,p,o,()=>{y={},s&&(y.name=s),r&&(y.sex=r),i&&(y.min_age=i),a&&(y.max_age=a),c&&(y.min_height=c),u&&(y.min_jumping_class=u),d&&(y.breeder=d),h&&(y.fei=h),p&&(y.quality=p),console.log("Applying filters:",y),n(1,m=1),$(m,Vn,y)},w,b,function(){s=this.value,n(4,s)},function(){r=U(this),n(5,r)},function(){d=this.value,n(10,d)},function(){h=this.value,n(11,h)},function(){i=L(this.value),n(6,i)},function(){a=L(this.value),n(7,a)},function(){c=L(this.value),n(8,c)},function(){u=L(this.value),n(9,u)},function(){p=U(this),n(12,p)},e=>b(e.HorsetelexID),()=>w(m-1),()=>w(m+1)]}class Qn extends De{constructor(e){super(),Me(this,e,qn,Gn,a,{},null,[-1,-1])}}function eo(e,t,n){const o=e.slice();return o[2]=t[n],o}function to(t){let n;return{c(){n=H("p"),n.textContent="No ancestry data available."},m(e,t){I(e,n,t)},p:e,d(e){e&&S(n)}}}function no(e){let t,n,o,s,r=e[1],i=[];for(let t=0;t<r.length;t+=1)i[t]=oo(eo(e,r,t));return{c(){t=H("table"),n=H("thead"),n.innerHTML='<tr><th class="svelte-fp7uhz">Horse</th> \n          <th class="svelte-fp7uhz">Year</th> \n          <th class="svelte-fp7uhz">Sex</th> \n          <th class="svelte-fp7uhz">Color</th> \n          <th class="svelte-fp7uhz">Height</th> \n          <th class="svelte-fp7uhz">Registry</th> \n          <th class="svelte-fp7uhz">License</th> \n          <th class="svelte-fp7uhz">Jump</th></tr>',o=P(),s=H("tbody");for(let e=0;e<i.length;e+=1)i[e].c();D(t,"class","svelte-fp7uhz")},m(e,r){I(e,t,r),x(t,n),x(t,o),x(t,s);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(s,null)},p(e,t){if(2&t){let n;for(r=e[1],n=0;n<r.length;n+=1){const o=eo(e,r,n);i[n]?i[n].p(o,t):(i[n]=oo(o),i[n].c(),i[n].m(s,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=r.length}},d(e){e&&S(t),T(i,e)}}}function oo(e){let t,n,o,s,r,i,a,c,l,u,d,h,p,f,m,g,v,y,w,b,$,_,k,C,T,E,j=e[2].indent+"",M=e[2].name+"",O=e[2].year+"",z=e[2].sex+"",L=e[2].color+"",A=e[2].height+"",Z=e[2].registry+"",F=e[2].license+"",U=e[2].jump+"";return{c(){t=H("tr"),n=H("td"),o=new K(!1),s=N(M),r=P(),i=H("td"),a=N(O),c=P(),l=H("td"),u=N(z),d=P(),h=H("td"),p=N(L),f=P(),m=H("td"),g=N(A),v=P(),y=H("td"),w=N(Z),b=P(),$=H("td"),_=N(F),k=P(),C=H("td"),T=N(U),E=P(),o.a=s,D(n,"class","svelte-fp7uhz"),D(i,"class","svelte-fp7uhz"),D(l,"class","svelte-fp7uhz"),D(h,"class","svelte-fp7uhz"),D(m,"class","svelte-fp7uhz"),D(y,"class","svelte-fp7uhz"),D($,"class","svelte-fp7uhz"),D(C,"class","svelte-fp7uhz")},m(e,S){I(e,t,S),x(t,n),o.m(j,n),x(n,s),x(t,r),x(t,i),x(i,a),x(t,c),x(t,l),x(l,u),x(t,d),x(t,h),x(h,p),x(t,f),x(t,m),x(m,g),x(t,v),x(t,y),x(y,w),x(t,b),x(t,$),x($,_),x(t,k),x(t,C),x(C,T),x(t,E)},p(e,t){2&t&&j!==(j=e[2].indent+"")&&o.p(j),2&t&&M!==(M=e[2].name+"")&&R(s,M),2&t&&O!==(O=e[2].year+"")&&R(a,O),2&t&&z!==(z=e[2].sex+"")&&R(u,z),2&t&&L!==(L=e[2].color+"")&&R(p,L),2&t&&A!==(A=e[2].height+"")&&R(g,A),2&t&&Z!==(Z=e[2].registry+"")&&R(w,Z),2&t&&F!==(F=e[2].license+"")&&R(_,F),2&t&&U!==(U=e[2].jump+"")&&R(T,U)},d(e){e&&S(t)}}}function so(t){let n;function o(e,t){return e[0]?no:to}let s=o(t),r=s(t);return{c(){r.c(),n=E()},m(e,t){r.m(e,t),I(e,n,t)},p(e,[t]){s===(s=o(e))&&r?r.p(e,t):(r.d(1),r=s(e),r&&(r.c(),r.m(n.parentNode,n)))},i:e,o:e,d(e){r.d(e),e&&S(n)}}}function ro(e,t=0){if(!e)return[];const n=[{indent:"&nbsp;".repeat(4*t),name:e.name||"Unknown",year:e.year||"Unknown",sex:e.sex||"Unknown",color:e.color||"Unknown",height:e.height||"Unknown",registry:e.registry||"Unknown",license:e.license||"Unknown",jump:e.jump||"Unknown"}];if(Array.isArray(e.parents))for(const o of e.parents)n.push(...ro(o,t+1));return n}function io(e,t,n){let o,{horseAncestry:s}=t;return e.$$set=e=>{"horseAncestry"in e&&n(0,s=e.horseAncestry)},e.$$.update=()=>{1&e.$$.dirty&&n(1,o=s?ro(s):[])},[s,o]}class ao extends De{constructor(e){super(),Me(this,e,io,so,a,{horseAncestry:0})}}function co(e,t,n){const o=e.slice();return o[24]=t[n],o}function lo(e){let t,n,o,s,r,i,a,c,l,u,d,h,p,f,m,g,v,y,w,b,$,_,k,C,j,M,O,z,L,A,F,U,W,K,J,X,B,Y,G,V,q,Q,ee,te,ne,oe,se,re,ie,ae,ce,le,ue,de,he,pe,fe,me,ge,ve,ye,we,be,Ce,Ie,Se,Te,He,Ne,Pe,Ee,je,Me,De,Oe,ze,Le,Re,Ae,Ze,Fe,Ue,We,Ke,Je,Xe,Be,Ye,Ge,Ve=e[0].Name+"",qe=Math.floor(e[0].HorsetelexID)+"",Qe=e[0]["Horse Type"]+"",et=e[0]["Horse YoB"]+"",tt=("null"===e[0]["Horse Height"]?"N/A":e[0]["Horse Height"])+"",nt=e[0]["Horse Color"]+"",ot=e[0]["Studbook IDs json"]+"",st=("null"===e[0]["Jumping Class"]?"N/A":e[0]["Jumping Class"])+"",rt=("null"===e[0].composite_score?"N/A":e[8](e[0].composite_score))+"",it=("null"===e[0].father_composite_score?"N/A":e[8](e[0].father_composite_score))+"",at=("null"===e[0].mother_composite_score?"N/A":e[8](e[0].mother_composite_score))+"",ct=("null"===e[0]["Inbreeding Coefficient (%)"]?"N/A":e[0]["Inbreeding Coefficient (%)"])+"",lt=("null"===e[0].ancestry_score?"N/A":e[0].ancestry_score)+"";const ut=[mo,fo],dt=[];function ht(e,t){return"null"===e[0].father_id?0:1}V=ht(e),q=dt[V]=ut[V](e);const pt=[yo,vo],ft=[];function mt(e,t){return"null"===e[0].mother_id?0:1}function gt(e,t){return e[4]?$o:bo}oe=mt(e),se=ft[oe]=pt[oe](e);let vt=gt(e),yt=vt(e),wt=e[0].results,bt=[];for(let t=0;t<wt.length;t+=1)bt[t]=_o(co(e,wt,t));let $t=e[1]&&xo(e);return{c(){t=H("div"),n=H("h2"),o=N(Ve),s=P(),r=H("p"),i=H("strong"),i.textContent="ID",a=P(),c=H("a"),l=N(qe),d=P(),h=H("p"),p=H("strong"),p.textContent="Sex",f=P(),m=N(Qe),g=P(),v=H("p"),y=H("strong"),y.textContent="Year",w=P(),b=N(et),$=P(),_=H("p"),k=H("strong"),k.textContent="Height:",C=P(),j=N(tt),M=P(),O=H("p"),z=H("strong"),z.textContent="Color:",L=P(),A=N(nt),F=P(),U=H("p"),W=H("strong"),W.textContent="In Studbooks:",K=P(),J=N(ot),X=P(),B=H("p"),Y=H("strong"),Y.textContent="Sire:",G=P(),q.c(),Q=P(),ee=H("p"),te=H("strong"),te.textContent="Dame:",ne=P(),se.c(),re=P(),ie=H("p"),ae=H("strong"),ae.textContent="Jumping Class",ce=P(),le=N(st),ue=P(),de=H("p"),he=H("strong"),he.textContent="Quality quartile",pe=P(),fe=N(rt),me=P(),ge=H("p"),ve=H("strong"),ve.textContent="Father quality quartile",ye=P(),we=N(it),be=P(),Ce=H("p"),Ie=H("strong"),Ie.textContent="Mother quality quartile",Se=P(),Te=N(at),He=P(),Ne=H("p"),Pe=H("strong"),Pe.textContent="Inbreeding percentage:",Ee=P(),je=N(ct),Me=P(),De=H("p"),Oe=H("strong"),Oe.textContent="Ancestry score",ze=P(),Le=N(lt),Re=P(),yt.c(),Ae=P(),Ze=H("div"),Fe=H("h3"),Fe.textContent="Competition Results",Ue=P(),We=H("table"),Ke=H("thead"),Ke.innerHTML="<tr><th>Date</th> \n            <th>City/Show</th> \n            <th>Country</th> \n            <th>Discipline</th> \n            <th>Type</th> \n            <th>Obstacle height</th> \n            <th>Comp. Nr.</th> \n            <th>Rank</th> \n            <th>Result</th> \n            <th>Price</th> \n            <th>Competition score</th></tr>",Je=P(),Xe=H("tbody");for(let e=0;e<bt.length;e+=1)bt[e].c();Be=P(),$t&&$t.c(),Ye=E(),D(n,"class","subtitle"),D(c,"href",u=e[0]["Horsetelex link"]),D(c,"target","_blank"),D(t,"class","box"),D(Fe,"class","subtitle"),D(We,"class","table is-fullwidth is-striped"),D(Ze,"class","box"),Z(Ze,"margin-top","2em")},m(e,u){I(e,t,u),x(t,n),x(n,o),x(t,s),x(t,r),x(r,i),x(r,a),x(r,c),x(c,l),x(t,d),x(t,h),x(h,p),x(h,f),x(h,m),x(t,g),x(t,v),x(v,y),x(v,w),x(v,b),x(t,$),x(t,_),x(_,k),x(_,C),x(_,j),x(t,M),x(t,O),x(O,z),x(O,L),x(O,A),x(t,F),x(t,U),x(U,W),x(U,K),x(U,J),x(t,X),x(t,B),x(B,Y),x(B,G),dt[V].m(B,null),x(t,Q),x(t,ee),x(ee,te),x(ee,ne),ft[oe].m(ee,null),x(t,re),x(t,ie),x(ie,ae),x(ie,ce),x(ie,le),x(t,ue),x(t,de),x(de,he),x(de,pe),x(de,fe),x(t,me),x(t,ge),x(ge,ve),x(ge,ye),x(ge,we),x(t,be),x(t,Ce),x(Ce,Ie),x(Ce,Se),x(Ce,Te),x(t,He),x(t,Ne),x(Ne,Pe),x(Ne,Ee),x(Ne,je),x(t,Me),x(t,De),x(De,Oe),x(De,ze),x(De,Le),x(t,Re),yt.m(t,null),I(e,Ae,u),I(e,Ze,u),x(Ze,Fe),x(Ze,Ue),x(Ze,We),x(We,Ke),x(We,Je),x(We,Xe);for(let e=0;e<bt.length;e+=1)bt[e]&&bt[e].m(Xe,null);I(e,Be,u),$t&&$t.m(e,u),I(e,Ye,u),Ge=!0},p(e,n){(!Ge||1&n)&&Ve!==(Ve=e[0].Name+"")&&R(o,Ve),(!Ge||1&n)&&qe!==(qe=Math.floor(e[0].HorsetelexID)+"")&&R(l,qe),(!Ge||1&n&&u!==(u=e[0]["Horsetelex link"]))&&D(c,"href",u),(!Ge||1&n)&&Qe!==(Qe=e[0]["Horse Type"]+"")&&R(m,Qe),(!Ge||1&n)&&et!==(et=e[0]["Horse YoB"]+"")&&R(b,et),(!Ge||1&n)&&tt!==(tt=("null"===e[0]["Horse Height"]?"N/A":e[0]["Horse Height"])+"")&&R(j,tt),(!Ge||1&n)&&nt!==(nt=e[0]["Horse Color"]+"")&&R(A,nt),(!Ge||1&n)&&ot!==(ot=e[0]["Studbook IDs json"]+"")&&R(J,ot);let s=V;V=ht(e),V===s?dt[V].p(e,n):($e(),ke(dt[s],1,1,(()=>{dt[s]=null})),_e(),q=dt[V],q?q.p(e,n):(q=dt[V]=ut[V](e),q.c()),xe(q,1),q.m(B,null));let r=oe;if(oe=mt(e),oe===r?ft[oe].p(e,n):($e(),ke(ft[r],1,1,(()=>{ft[r]=null})),_e(),se=ft[oe],se?se.p(e,n):(se=ft[oe]=pt[oe](e),se.c()),xe(se,1),se.m(ee,null)),(!Ge||1&n)&&st!==(st=("null"===e[0]["Jumping Class"]?"N/A":e[0]["Jumping Class"])+"")&&R(le,st),(!Ge||1&n)&&rt!==(rt=("null"===e[0].composite_score?"N/A":e[8](e[0].composite_score))+"")&&R(fe,rt),(!Ge||1&n)&&it!==(it=("null"===e[0].father_composite_score?"N/A":e[8](e[0].father_composite_score))+"")&&R(we,it),(!Ge||1&n)&&at!==(at=("null"===e[0].mother_composite_score?"N/A":e[8](e[0].mother_composite_score))+"")&&R(Te,at),(!Ge||1&n)&&ct!==(ct=("null"===e[0]["Inbreeding Coefficient (%)"]?"N/A":e[0]["Inbreeding Coefficient (%)"])+"")&&R(je,ct),(!Ge||1&n)&&lt!==(lt=("null"===e[0].ancestry_score?"N/A":e[0].ancestry_score)+"")&&R(Le,lt),vt===(vt=gt(e))&&yt?yt.p(e,n):(yt.d(1),yt=vt(e),yt&&(yt.c(),yt.m(t,null))),513&n){let t;for(wt=e[0].results,t=0;t<wt.length;t+=1){const o=co(e,wt,t);bt[t]?bt[t].p(o,n):(bt[t]=_o(o),bt[t].c(),bt[t].m(Xe,null))}for(;t<bt.length;t+=1)bt[t].d(1);bt.length=wt.length}e[1]?$t?($t.p(e,n),2&n&&xe($t,1)):($t=xo(e),$t.c(),xe($t,1),$t.m(Ye.parentNode,Ye)):$t&&($e(),ke($t,1,1,(()=>{$t=null})),_e())},i(e){Ge||(xe(q),xe(se),xe($t),Ge=!0)},o(e){ke(q),ke(se),ke($t),Ge=!1},d(e){e&&S(t),dt[V].d(),ft[oe].d(),yt.d(),e&&S(Ae),e&&S(Ze),T(bt,e),e&&S(Be),$t&&$t.d(e),e&&S(Ye)}}}function uo(t){let n,o,s,r,i,a;return{c(){n=H("div"),o=H("h2"),o.textContent="Loading Horse Details...",s=P(),r=H("progress"),i=N(t[6]),a=N("%"),D(o,"class","subtitle has-text-centered mb-4"),D(r,"class","progress is-info"),r.value=t[6],D(r,"max","100"),D(n,"class","loading-container")},m(e,t){I(e,n,t),x(n,o),x(n,s),x(n,r),x(r,i),x(r,a)},p(e,t){64&t&&R(i,e[6]),64&t&&(r.value=e[6])},i:e,o:e,d(e){e&&S(n)}}}function ho(t){let n,o;return{c(){n=H("div"),o=N(t[5]),D(n,"class","notification is-danger")},m(e,t){I(e,n,t),x(n,o)},p(e,t){32&t&&R(o,e[5])},i:e,o:e,d(e){e&&S(n)}}}function po(t){let n;return{c(){n=H("p"),n.textContent="Please log in to view horse details.",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}function fo(e){let t,n;return t=new Ve({props:{to:`/horses/${Math.floor(e[0].father_id)}`,$$slots:{default:[go]},$$scope:{ctx:e}}}),{c(){Ne(t.$$.fragment)},m(e,o){Pe(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.to=`/horses/${Math.floor(e[0].father_id)}`),134217729&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(xe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Ee(t,e)}}}function mo(t){let n;return{c(){n=N("N/A")},m(e,t){I(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}function go(e){let t,n=Math.floor(e[0].father_id)+"";return{c(){t=N(n)},m(e,n){I(e,t,n)},p(e,o){1&o&&n!==(n=Math.floor(e[0].father_id)+"")&&R(t,n)},d(e){e&&S(t)}}}function vo(e){let t,n;return t=new Ve({props:{to:`/horses/${Math.floor(e[0].mother_id)}`,$$slots:{default:[wo]},$$scope:{ctx:e}}}),{c(){Ne(t.$$.fragment)},m(e,o){Pe(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.to=`/horses/${Math.floor(e[0].mother_id)}`),134217729&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(xe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Ee(t,e)}}}function yo(t){let n;return{c(){n=N("N/A")},m(e,t){I(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}function wo(e){let t,n=Math.floor(e[0].mother_id)+"";return{c(){t=N(n)},m(e,n){I(e,t,n)},p(e,o){1&o&&n!==(n=Math.floor(e[0].mother_id)+"")&&R(t,n)},d(e){e&&S(t)}}}function bo(e){let t,n,o,s,r;return{c(){t=H("button"),n=N("Add to My Horses"),D(t,"class",o="button is-primary "+(e[3]?"is-loading":"")),Z(t,"margin-top","1em"),t.disabled=e[3]},m(o,i){I(o,t,i),x(t,n),s||(r=j(t,"click",e[14]),s=!0)},p(e,n){8&n&&o!==(o="button is-primary "+(e[3]?"is-loading":""))&&D(t,"class",o),8&n&&(t.disabled=e[3])},d(e){e&&S(t),s=!1,r()}}}function $o(e){let t,n,o,s,r;return{c(){t=H("button"),n=N("Remove from My Horses"),D(t,"class",o="button is-danger "+(e[3]?"is-loading":"")),t.disabled=e[3],Z(t,"margin-top","1em")},m(o,i){I(o,t,i),x(t,n),s||(r=j(t,"click",e[13]),s=!0)},p(e,n){8&n&&o!==(o="button is-danger "+(e[3]?"is-loading":""))&&D(t,"class",o),8&n&&(t.disabled=e[3])},d(e){e&&S(t),s=!1,r()}}}function _o(e){let t,n,o,s,r,i,a,c,l,u,d,h,p,f,m,g,v,y,w,b,$,_,k,C,T,E,j,M,D,O,z,L,A,Z,F=e[24].Date+"",U=e[24]["City / Show"]+"",W=e[24]["Country code"]+"",K=e[24].Discipline+"",J=e[24].Type+"",X=e[24]["Obstacle Height"]+"",B=e[24]["Competition number"]+"",Y=e[24].Rank+"",G=e[24].Result+"",V=e[24].Price+"",q=`${Math.round(e[24].competition_score,2)}, quartile ${e[9](e[24].competition_score)}`;return{c(){t=H("tr"),n=H("td"),o=N(F),s=P(),r=H("td"),i=N(U),a=P(),c=H("td"),l=N(W),u=P(),d=H("td"),h=N(K),p=P(),f=H("td"),m=N(J),g=P(),v=H("td"),y=N(X),w=P(),b=H("td"),$=N(B),_=P(),k=H("td"),C=N(Y),T=P(),E=H("td"),j=N(G),M=P(),D=H("td"),O=N(V),z=P(),L=H("td"),A=N(q),Z=P()},m(e,S){I(e,t,S),x(t,n),x(n,o),x(t,s),x(t,r),x(r,i),x(t,a),x(t,c),x(c,l),x(t,u),x(t,d),x(d,h),x(t,p),x(t,f),x(f,m),x(t,g),x(t,v),x(v,y),x(t,w),x(t,b),x(b,$),x(t,_),x(t,k),x(k,C),x(t,T),x(t,E),x(E,j),x(t,M),x(t,D),x(D,O),x(t,z),x(t,L),x(L,A),x(t,Z)},p(e,t){1&t&&F!==(F=e[24].Date+"")&&R(o,F),1&t&&U!==(U=e[24]["City / Show"]+"")&&R(i,U),1&t&&W!==(W=e[24]["Country code"]+"")&&R(l,W),1&t&&K!==(K=e[24].Discipline+"")&&R(h,K),1&t&&J!==(J=e[24].Type+"")&&R(m,J),1&t&&X!==(X=e[24]["Obstacle Height"]+"")&&R(y,X),1&t&&B!==(B=e[24]["Competition number"]+"")&&R($,B),1&t&&Y!==(Y=e[24].Rank+"")&&R(C,Y),1&t&&G!==(G=e[24].Result+"")&&R(j,G),1&t&&V!==(V=e[24].Price+"")&&R(O,V),1&t&&q!==(q=`${Math.round(e[24].competition_score,2)}, quartile ${e[9](e[24].competition_score)}`)&&R(A,q)},d(e){e&&S(t)}}}function xo(e){let t,n,o,s,r;return s=new ao({props:{horseAncestry:e[1]}}),{c(){t=H("div"),n=H("h3"),n.textContent="Ancestry",o=P(),Ne(s.$$.fragment),D(n,"class","subtitle"),D(t,"class","box"),Z(t,"margin-top","2em")},m(e,i){I(e,t,i),x(t,n),x(t,o),Pe(s,t,null),r=!0},p(e,t){const n={};2&t&&(n.horseAncestry=e[1]),s.$set(n)},i(e){r||(xe(s.$$.fragment,e),r=!0)},o(e){ke(s.$$.fragment,e),r=!1},d(e){e&&S(t),Ee(s)}}}function ko(e){let t,n,o,s;const r=[po,ho,uo,lo],i=[];function a(e,t){return e[7]?e[5]?1:e[2]||!e[0]?2:3:0}return n=a(e),o=i[n]=r[n](e),{c(){t=H("main"),o.c()},m(e,o){I(e,t,o),i[n].m(t,null),s=!0},p(e,[s]){let c=n;n=a(e),n===c?i[n].p(e,s):($e(),ke(i[c],1,1,(()=>{i[c]=null})),_e(),o=i[n],o?o.p(e,s):(o=i[n]=r[n](e),o.c()),xe(o,1),o.m(t,null))},i(e){s||(xe(o),s=!0)},o(e){ke(o),s=!1},d(e){e&&S(t),i[n].d()}}}function Co(e,t,n){let o;l(e,bn,(e=>n(7,o=e)));let s,r,{params:i}=t,a=i&&i.selectedHorseId?+i.selectedHorseId:void 0,c=null,u=!0,d=!1,h=[],p=!0,f=!1,m=null,g=0;const v=e=>h.some((({HorsetelexID:t})=>t===e)),y=async e=>{try{n(3,d=!0);const t=await In();if(!(await fetch(`http://127.0.0.1:5000/my_horses/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"})).ok)throw new Error("Failed to delete horse");h=h.filter((({HorsetelexID:t})=>t!==e)),n(4,f=!1)}catch(e){console.error("Error deleting horse:",e),n(5,m="Failed to remove horse. Please try again.")}finally{n(3,d=!1)}},w=async e=>{try{n(3,d=!0);const t=await In();if(!(await fetch("http://127.0.0.1:5000/my_horses",{method:"POST",body:JSON.stringify({horse_id:e}),headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"})).ok)throw new Error("Failed to add horse");h=[...h,s],n(4,f=!0)}catch(e){console.error("Error adding horse:",e),n(5,m="Failed to add horse. Please try again.")}finally{n(3,d=!1)}};ee((()=>{o&&a&&((async()=>{try{n(2,u=!0),n(5,m=null),n(6,g=0),r=setInterval((()=>{n(6,g=Math.min(95,g+5))}),100);const e=await In();if(!e)throw new Error("No authentication token available");const t=await fetch(`http://127.0.0.1:5000/horses/${a}`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw new Error("Failed to fetch horse");n(0,s=await t.json()),n(4,f=!!s&&v(Math.floor(s.HorsetelexID))),n(6,g=100)}catch(e){console.error("Error fetching horse:",e),n(5,m="Failed to fetch horse details. Please try again.")}finally{clearInterval(r),setTimeout((()=>{n(2,u=!1)}),200)}})().then((()=>{m||(async()=>{try{const e=await In();if(!e)return;const t=await fetch(`http://127.0.0.1:5000/horses/${a}/ancestry`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include"});if(!t.ok)return void console.log("No ancestry data or failed to fetch ancestry");n(1,c=await t.json()),console.log("Fetched horseAncestry:",c)}catch(e){console.error("Error fetching ancestry:",e)}})()})),(async()=>{try{p=!0;const e=await In(),t=await fetch("http://127.0.0.1:5000/my_horses",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw new Error("Failed to fetch horses");const o=await t.json();h=o.data,s&&n(4,f=v(Math.floor(s.HorsetelexID)))}catch(e){console.error("Error fetching horses:",e),n(5,m="Failed to fetch horses list. Please try again.")}finally{p=!1}})())})),te((()=>{r&&clearInterval(r)}));return e.$$set=e=>{"params"in e&&n(12,i=e.params)},[s,c,u,d,f,m,g,o,e=>e<438.033669?1:e<484.512003?2:e<519.720959?3:4,e=>e<385.714286?1:e<450?2:e<520?3:4,y,w,i,()=>y(Math.floor(s.HorsetelexID)),()=>w(Math.floor(s.HorsetelexID))]}class Io extends De{constructor(e){super(),Me(this,e,Co,ko,a,{params:12})}}function So(t){let n,o,s,i,a,c,l,u,d,h,p,f,m,g,v,y,w,b,$,_,k,C,T,N,E,O,z,R,Z,U,W,K,J,X,B,Y,G,V,q,Q,ee,te,ne,oe,se,re,ie,ae,ce,le,ue,he,pe,fe,me,ge,ve,ye,we,be,$e,_e,xe,ke,Ce,Ie,Se,Te,He,Ne,Pe,Ee,je,Me,De,Oe,ze,Le,Re,Ae,Ze,Fe,Ue,We,Ke,Je,Xe,Be,Ye,Ge,Ve,qe,Qe,et,tt,nt,ot,st,rt,it,at,ct,lt,ut,dt,ht,pt,ft,mt,gt,vt,yt,wt,bt;return{c(){n=H("section"),o=H("div"),s=H("h1"),s.textContent="Add New Horse",i=P(),a=H("div"),c=H("div"),l=H("form"),u=H("div"),d=H("label"),d.innerHTML='Name<span class="has-text-danger">*</span>',h=P(),p=H("div"),f=H("input"),m=P(),g=H("div"),v=H("label"),v.textContent="Alias 1",y=P(),w=H("div"),b=H("input"),$=P(),_=H("p"),_.textContent="If the horse is known by another name",k=P(),C=H("div"),T=H("label"),T.textContent="Alias 2",N=P(),E=H("div"),O=H("input"),z=P(),R=H("div"),Z=H("label"),Z.textContent="Alias 3",U=P(),W=H("div"),K=H("input"),J=P(),X=H("div"),B=H("label"),B.innerHTML='Sex<span class="has-text-danger">*</span>',Y=P(),G=H("div"),V=H("div"),q=H("select"),Q=H("option"),Q.textContent="Select sex",ee=H("option"),ee.textContent="Stallion",te=H("option"),te.textContent="Gelding",ne=H("option"),ne.textContent="Mare",oe=P(),se=H("div"),re=H("label"),re.innerHTML='Year<span class="has-text-danger">*</span>',ie=P(),ae=H("div"),ce=H("input"),le=P(),ue=H("div"),he=H("label"),he.textContent="Sire",pe=P(),fe=H("div"),me=H("input"),ge=P(),ve=H("div"),ye=H("label"),ye.textContent="Dam",we=P(),be=H("div"),$e=H("input"),_e=P(),xe=H("div"),ke=H("label"),ke.textContent="Studbook",Ce=P(),Ie=H("div"),Se=H("input"),Te=P(),He=H("div"),Ne=H("label"),Ne.textContent="Life Number",Pe=P(),Ee=H("div"),je=H("input"),Me=P(),De=H("div"),Oe=H("label"),Oe.textContent="Color",ze=P(),Le=H("div"),Re=H("div"),Ae=H("select"),Ze=H("option"),Ze.textContent="Select color",Fe=H("option"),Fe.textContent="Black",Ue=H("option"),Ue.textContent="Bay",We=H("option"),We.textContent="Chestnut",Ke=P(),Je=H("div"),Xe=H("label"),Xe.innerHTML='Height (cm)<span class="has-text-danger">*</span>',Be=P(),Ye=H("div"),Ge=H("input"),Ve=P(),qe=H("div"),Qe=H("label"),Qe.textContent="Reproduction",et=P(),tt=H("div"),nt=H("div"),ot=H("select"),st=H("option"),st.textContent="Select reproduction method",rt=H("option"),rt.textContent="Normal insemination",it=H("option"),it.textContent="Embryo transfer",at=H("option"),at.textContent="Clone",ct=H("option"),ct.textContent="Twins",lt=P(),ut=H("div"),dt=H("label"),dt.innerHTML='Inbreeding Percentage<span class="has-text-danger">*</span>',ht=P(),pt=H("div"),ft=H("input"),mt=P(),gt=H("p"),gt.textContent="Use a decimal value, for example 2.50 for 2.5%",vt=P(),yt=H("div"),yt.innerHTML='<div class="control"><button type="submit" class="button is-primary is-fullwidth">Add Horse</button></div>',D(s,"class","title svelte-1cmgj8x"),D(d,"class","label"),D(d,"for","name"),D(f,"class","input"),D(f,"type","text"),D(f,"id","name"),f.required=!0,D(f,"placeholder","Enter horse name"),D(p,"class","control"),D(u,"class","field"),D(v,"class","label"),D(v,"for","alias1"),D(b,"class","input"),D(b,"type","text"),D(b,"id","alias1"),D(b,"placeholder","Optional alias"),D(w,"class","control"),D(_,"class","help"),D(g,"class","field"),D(T,"class","label"),D(T,"for","alias2"),D(O,"class","input"),D(O,"type","text"),D(O,"id","alias2"),D(O,"placeholder","Optional alias"),D(E,"class","control"),D(C,"class","field"),D(Z,"class","label"),D(Z,"for","alias3"),D(K,"class","input"),D(K,"type","text"),D(K,"id","alias3"),D(K,"placeholder","Optional alias"),D(W,"class","control"),D(R,"class","field"),D(B,"class","label"),D(B,"for","sex"),Q.__value="",Q.value=Q.__value,ee.__value="Stallion",ee.value=ee.__value,te.__value="Gelding",te.value=te.__value,ne.__value="Mare",ne.value=ne.__value,D(q,"id","sex"),q.required=!0,void 0===t[0].sex&&de((()=>t[6].call(q))),D(V,"class","select is-fullwidth"),D(G,"class","control"),D(X,"class","field"),D(re,"class","label"),D(re,"for","year"),D(ce,"class","input"),D(ce,"type","number"),D(ce,"id","year"),ce.required=!0,D(ce,"placeholder","e.g. 2015"),D(ae,"class","control"),D(se,"class","field"),D(he,"class","label"),D(he,"for","sire"),D(me,"class","input"),D(me,"type","text"),D(me,"id","sire"),D(me,"placeholder","Sire's name (if known)"),D(fe,"class","control"),D(ue,"class","field"),D(ye,"class","label"),D(ye,"for","dam"),D($e,"class","input"),D($e,"type","text"),D($e,"id","dam"),D($e,"placeholder","Dam's name (if known)"),D(be,"class","control"),D(ve,"class","field"),D(ke,"class","label"),D(ke,"for","studbook"),D(Se,"class","input"),D(Se,"type","text"),D(Se,"id","studbook"),D(Se,"placeholder","e.g. KWPN, BWP"),D(Ie,"class","control"),D(xe,"class","field"),D(Ne,"class","label"),D(Ne,"for","lifeNumber"),D(je,"class","input"),D(je,"type","text"),D(je,"id","lifeNumber"),D(je,"placeholder","Unique life number if applicable"),D(Ee,"class","control"),D(He,"class","field"),D(Oe,"class","label"),D(Oe,"for","color"),Ze.__value="",Ze.value=Ze.__value,Fe.__value="Black",Fe.value=Fe.__value,Ue.__value="Bay",Ue.value=Ue.__value,We.__value="Chestnut",We.value=We.__value,D(Ae,"id","color"),void 0===t[0].color&&de((()=>t[12].call(Ae))),D(Re,"class","select is-fullwidth"),D(Le,"class","control"),D(De,"class","field"),D(Xe,"class","label"),D(Xe,"for","height"),D(Ge,"class","input"),D(Ge,"type","number"),D(Ge,"id","height"),Ge.required=!0,D(Ge,"placeholder","e.g. 165"),D(Ye,"class","control"),D(Je,"class","field"),D(Qe,"class","label"),D(Qe,"for","reproduction"),st.__value="",st.value=st.__value,rt.__value="Normal insemination",rt.value=rt.__value,it.__value="Embryo transfer",it.value=it.__value,at.__value="Clone",at.value=at.__value,ct.__value="Twins",ct.value=ct.__value,D(ot,"id","reproduction"),void 0===t[0].reproduction&&de((()=>t[14].call(ot))),D(nt,"class","select is-fullwidth"),D(tt,"class","control"),D(qe,"class","field"),D(dt,"class","label"),D(dt,"for","inbreedingPercentage"),D(ft,"class","input"),D(ft,"type","number"),D(ft,"id","inbreedingPercentage"),D(ft,"step","0.01"),ft.required=!0,D(ft,"placeholder","e.g. 2.50"),D(pt,"class","control"),D(gt,"class","help"),D(ut,"class","field"),D(yt,"class","field mt-5"),D(c,"class","card-content"),D(a,"class","card svelte-1cmgj8x"),D(o,"class","container"),D(n,"class","section")},m(e,r){I(e,n,r),x(n,o),x(o,s),x(o,i),x(o,a),x(a,c),x(c,l),x(l,u),x(u,d),x(u,h),x(u,p),x(p,f),A(f,t[0].name),x(l,m),x(l,g),x(g,v),x(g,y),x(g,w),x(w,b),A(b,t[0].alias1),x(g,$),x(g,_),x(l,k),x(l,C),x(C,T),x(C,N),x(C,E),x(E,O),A(O,t[0].alias2),x(l,z),x(l,R),x(R,Z),x(R,U),x(R,W),x(W,K),A(K,t[0].alias3),x(l,J),x(l,X),x(X,B),x(X,Y),x(X,G),x(G,V),x(V,q),x(q,Q),x(q,ee),x(q,te),x(q,ne),F(q,t[0].sex,!0),x(l,oe),x(l,se),x(se,re),x(se,ie),x(se,ae),x(ae,ce),A(ce,t[0].year),x(l,le),x(l,ue),x(ue,he),x(ue,pe),x(ue,fe),x(fe,me),A(me,t[0].sire),x(l,ge),x(l,ve),x(ve,ye),x(ve,we),x(ve,be),x(be,$e),A($e,t[0].dam),x(l,_e),x(l,xe),x(xe,ke),x(xe,Ce),x(xe,Ie),x(Ie,Se),A(Se,t[0].studbook),x(l,Te),x(l,He),x(He,Ne),x(He,Pe),x(He,Ee),x(Ee,je),A(je,t[0].lifeNumber),x(l,Me),x(l,De),x(De,Oe),x(De,ze),x(De,Le),x(Le,Re),x(Re,Ae),x(Ae,Ze),x(Ae,Fe),x(Ae,Ue),x(Ae,We),F(Ae,t[0].color,!0),x(l,Ke),x(l,Je),x(Je,Xe),x(Je,Be),x(Je,Ye),x(Ye,Ge),A(Ge,t[0].height),x(l,Ve),x(l,qe),x(qe,Qe),x(qe,et),x(qe,tt),x(tt,nt),x(nt,ot),x(ot,st),x(ot,rt),x(ot,it),x(ot,at),x(ot,ct),F(ot,t[0].reproduction,!0),x(l,lt),x(l,ut),x(ut,dt),x(ut,ht),x(ut,pt),x(pt,ft),A(ft,t[0].inbreedingPercentage),x(ut,mt),x(ut,gt),x(l,vt),x(l,yt),wt||(bt=[j(f,"input",t[2]),j(b,"input",t[3]),j(O,"input",t[4]),j(K,"input",t[5]),j(q,"change",t[6]),j(ce,"input",t[7]),j(me,"input",t[8]),j($e,"input",t[9]),j(Se,"input",t[10]),j(je,"input",t[11]),j(Ae,"change",t[12]),j(Ge,"input",t[13]),j(ot,"change",t[14]),j(ft,"input",t[15]),j(l,"submit",M(t[1]))],wt=!0)},p(e,[t]){1&t&&f.value!==e[0].name&&A(f,e[0].name),1&t&&b.value!==e[0].alias1&&A(b,e[0].alias1),1&t&&O.value!==e[0].alias2&&A(O,e[0].alias2),1&t&&K.value!==e[0].alias3&&A(K,e[0].alias3),1&t&&F(q,e[0].sex),1&t&&L(ce.value)!==e[0].year&&A(ce,e[0].year),1&t&&me.value!==e[0].sire&&A(me,e[0].sire),1&t&&$e.value!==e[0].dam&&A($e,e[0].dam),1&t&&Se.value!==e[0].studbook&&A(Se,e[0].studbook),1&t&&je.value!==e[0].lifeNumber&&A(je,e[0].lifeNumber),1&t&&F(Ae,e[0].color),1&t&&L(Ge.value)!==e[0].height&&A(Ge,e[0].height),1&t&&F(ot,e[0].reproduction),1&t&&L(ft.value)!==e[0].inbreedingPercentage&&A(ft,e[0].inbreedingPercentage)},i:e,o:e,d(e){e&&S(n),wt=!1,r(bt)}}}function To(e,t,n){const o=ne();let s={id:Date.now(),name:"",alias1:"",alias2:"",alias3:"",sex:"",year:"",sire:null,dam:null,studbook:"",lifeNumber:"",color:"",height:"",reproduction:"",inbreedingPercentage:"",competitionResults:[]};return[s,()=>{console.log("Dispatching add event with horse:",s),o("add",s),n(0,s={id:Date.now(),name:"",alias1:"",alias2:"",alias3:"",sex:"",year:"",sire:null,dam:null,studbook:"",lifeNumber:"",color:"",height:"",reproduction:"",inbreedingPercentage:"",competitionResults:[]})},function(){s.name=this.value,n(0,s)},function(){s.alias1=this.value,n(0,s)},function(){s.alias2=this.value,n(0,s)},function(){s.alias3=this.value,n(0,s)},function(){s.sex=U(this),n(0,s)},function(){s.year=L(this.value),n(0,s)},function(){s.sire=this.value,n(0,s)},function(){s.dam=this.value,n(0,s)},function(){s.studbook=this.value,n(0,s)},function(){s.lifeNumber=this.value,n(0,s)},function(){s.color=U(this),n(0,s)},function(){s.height=L(this.value),n(0,s)},function(){s.reproduction=U(this),n(0,s)},function(){s.inbreedingPercentage=L(this.value),n(0,s)}]}class Ho extends De{constructor(e){super(),Me(this,e,To,So,a,{})}}function No(t){let n,o,s,i,a,c,l,u,d,h,p,f,m,g,v,y,w,b,$,_,k,C,T,N,E,O,z,R,Z,F,U,W,K,J,X,B,Y,G,V,q,Q,ee,te,ne,oe,se,re,ie,ae,ce,le,ue,de,he,pe,fe,me,ge,ve,ye,we,be,$e,_e,xe,ke,Ce,Ie,Se,Te,He,Ne,Pe,Ee;return{c(){n=H("section"),o=H("div"),s=H("h1"),s.textContent="Add Competition Result",i=P(),a=H("div"),c=H("div"),l=H("form"),u=H("div"),d=H("label"),d.innerHTML='Horse ID<span class="has-text-danger">*</span>',h=P(),p=H("div"),f=H("input"),m=P(),g=H("p"),g.textContent="This must match an existing horse's ID.",v=P(),y=H("div"),w=H("label"),w.innerHTML='Date<span class="has-text-danger">*</span>',b=P(),$=H("div"),_=H("input"),k=P(),C=H("p"),C.textContent="The date of the competition (e.g., 2023-06-15).",T=P(),N=H("div"),E=H("label"),E.innerHTML='City/Show<span class="has-text-danger">*</span>',O=P(),z=H("div"),R=H("input"),Z=P(),F=H("div"),U=H("label"),U.innerHTML='Country<span class="has-text-danger">*</span>',W=P(),K=H("div"),J=H("input"),X=P(),B=H("div"),Y=H("label"),Y.innerHTML='Discipline<span class="has-text-danger">*</span>',G=P(),V=H("div"),q=H("input"),Q=P(),ee=H("p"),ee.textContent="The competition discipline (e.g. Show Jumping, Dressage).",te=P(),ne=H("div"),oe=H("label"),oe.innerHTML='Comp. Nr.<span class="has-text-danger">*</span>',se=P(),re=H("div"),ie=H("input"),ae=P(),ce=H("div"),le=H("label"),le.innerHTML='Rank<span class="has-text-danger">*</span>',ue=P(),de=H("div"),he=H("input"),pe=P(),fe=H("div"),me=H("label"),me.innerHTML='Result<span class="has-text-danger">*</span>',ge=P(),ve=H("div"),ye=H("input"),we=P(),be=H("p"),be.textContent="The horse's score or time, depending on discipline.",$e=P(),_e=H("div"),xe=H("label"),xe.innerHTML='Price (if any)<span class="has-text-danger">*</span>',ke=P(),Ce=H("div"),Ie=H("input"),Se=P(),Te=H("p"),Te.textContent="Monetary prize won (in local currency), if applicable.",He=P(),Ne=H("div"),Ne.innerHTML='<div class="control"><button type="submit" class="button is-primary is-fullwidth">Add Result</button></div>',D(s,"class","title svelte-1cmgj8x"),D(d,"class","label"),D(d,"for","horseId"),D(f,"class","input"),D(f,"type","number"),D(f,"id","horseId"),f.required=!0,D(f,"placeholder","Enter valid Horse ID"),D(p,"class","control"),D(g,"class","help"),D(u,"class","field"),D(w,"class","label"),D(w,"for","date"),D(_,"class","input"),D(_,"type","date"),D(_,"id","date"),_.required=!0,D($,"class","control"),D(C,"class","help"),D(y,"class","field"),D(E,"class","label"),D(E,"for","cityShow"),D(R,"class","input"),D(R,"type","text"),D(R,"id","cityShow"),R.required=!0,D(R,"placeholder","e.g. Aachen CHIO"),D(z,"class","control"),D(N,"class","field"),D(U,"class","label"),D(U,"for","country"),D(J,"class","input"),D(J,"type","text"),D(J,"id","country"),J.required=!0,D(J,"placeholder","e.g. Germany"),D(K,"class","control"),D(F,"class","field"),D(Y,"class","label"),D(Y,"for","discipline"),D(q,"class","input"),D(q,"type","text"),D(q,"id","discipline"),q.required=!0,D(q,"placeholder","e.g. Show Jumping"),D(V,"class","control"),D(ee,"class","help"),D(B,"class","field"),D(oe,"class","label"),D(oe,"for","compNr"),D(ie,"class","input"),D(ie,"type","text"),D(ie,"id","compNr"),ie.required=!0,D(ie,"placeholder","e.g. #25"),D(re,"class","control"),D(ne,"class","field"),D(le,"class","label"),D(le,"for","rank"),D(he,"class","input"),D(he,"type","number"),D(he,"id","rank"),he.required=!0,D(he,"placeholder","e.g. 1 for first place"),D(de,"class","control"),D(ce,"class","field"),D(me,"class","label"),D(me,"for","result"),D(ye,"class","input"),D(ye,"type","number"),D(ye,"step","0.01"),D(ye,"id","result"),ye.required=!0,D(ye,"placeholder","e.g. 75.50"),D(ve,"class","control"),D(be,"class","help"),D(fe,"class","field"),D(xe,"class","label"),D(xe,"for","price"),D(Ie,"class","input"),D(Ie,"type","number"),D(Ie,"step","0.01"),D(Ie,"id","price"),Ie.required=!0,D(Ie,"placeholder","e.g. 2500.00"),D(Ce,"class","control"),D(Te,"class","help"),D(_e,"class","field"),D(Ne,"class","field mt-5"),D(c,"class","card-content"),D(a,"class","card svelte-1cmgj8x"),D(o,"class","container"),D(n,"class","section")},m(e,r){I(e,n,r),x(n,o),x(o,s),x(o,i),x(o,a),x(a,c),x(c,l),x(l,u),x(u,d),x(u,h),x(u,p),x(p,f),A(f,t[0].horseId),x(u,m),x(u,g),x(l,v),x(l,y),x(y,w),x(y,b),x(y,$),x($,_),A(_,t[0].date),x(y,k),x(y,C),x(l,T),x(l,N),x(N,E),x(N,O),x(N,z),x(z,R),A(R,t[0].cityShow),x(l,Z),x(l,F),x(F,U),x(F,W),x(F,K),x(K,J),A(J,t[0].country),x(l,X),x(l,B),x(B,Y),x(B,G),x(B,V),x(V,q),A(q,t[0].discipline),x(B,Q),x(B,ee),x(l,te),x(l,ne),x(ne,oe),x(ne,se),x(ne,re),x(re,ie),A(ie,t[0].compNr),x(l,ae),x(l,ce),x(ce,le),x(ce,ue),x(ce,de),x(de,he),A(he,t[0].rank),x(l,pe),x(l,fe),x(fe,me),x(fe,ge),x(fe,ve),x(ve,ye),A(ye,t[0].result),x(fe,we),x(fe,be),x(l,$e),x(l,_e),x(_e,xe),x(_e,ke),x(_e,Ce),x(Ce,Ie),A(Ie,t[0].price),x(_e,Se),x(_e,Te),x(l,He),x(l,Ne),Pe||(Ee=[j(f,"input",t[2]),j(_,"input",t[3]),j(R,"input",t[4]),j(J,"input",t[5]),j(q,"input",t[6]),j(ie,"input",t[7]),j(he,"input",t[8]),j(ye,"input",t[9]),j(Ie,"input",t[10]),j(l,"submit",M(t[1]))],Pe=!0)},p(e,[t]){1&t&&L(f.value)!==e[0].horseId&&A(f,e[0].horseId),1&t&&A(_,e[0].date),1&t&&R.value!==e[0].cityShow&&A(R,e[0].cityShow),1&t&&J.value!==e[0].country&&A(J,e[0].country),1&t&&q.value!==e[0].discipline&&A(q,e[0].discipline),1&t&&ie.value!==e[0].compNr&&A(ie,e[0].compNr),1&t&&L(he.value)!==e[0].rank&&A(he,e[0].rank),1&t&&L(ye.value)!==e[0].result&&A(ye,e[0].result),1&t&&L(Ie.value)!==e[0].price&&A(Ie,e[0].price)},i:e,o:e,d(e){e&&S(n),Pe=!1,r(Ee)}}}function Po(e,t,n){const o=ne();let s={horseId:null,date:"",cityShow:"",country:"",discipline:"",compNr:"",rank:"",result:"",price:""};return[s,()=>{o("addResult",{horseId:s.horseId,result:s}),n(0,s={horseId:null,date:"",cityShow:"",country:"",discipline:"",compNr:"",rank:"",result:"",price:""})},function(){s.horseId=L(this.value),n(0,s)},function(){s.date=this.value,n(0,s)},function(){s.cityShow=this.value,n(0,s)},function(){s.country=this.value,n(0,s)},function(){s.discipline=this.value,n(0,s)},function(){s.compNr=this.value,n(0,s)},function(){s.rank=L(this.value),n(0,s)},function(){s.result=L(this.value),n(0,s)},function(){s.price=L(this.value),n(0,s)}]}class Eo extends De{constructor(e){super(),Me(this,e,Po,No,a,{})}}function jo(e,t,n){const o=e.slice();return o[25]=t[n][0],o[26]=t[n][1],o}function Mo(e,t,n){const o=e.slice();return o[29]=t[n],o}function Do(e,t,n){const o=e.slice();return o[32]=t[n],o}function Oo(e){let t,n,o,s,i,a,c,l,u,d,h,p,f,m,g,v,y,w,b,$,_,k,C,T,M,O,z,L,Z=e[5]?"Calculating...":"Get Prediction",F=e[8].length>0&&Zo(e),U=e[9].length>0&&Uo(e),W=e[5]&&Ko(),K=e[4]&&!e[5]&&Jo(e);return{c(){t=H("h1"),t.textContent="Match Horses for Breeding",n=P(),o=H("div"),s=H("div"),i=H("div"),a=H("label"),a.textContent="Select Stallion:",c=P(),l=H("div"),u=H("input"),d=P(),F&&F.c(),h=P(),p=H("div"),f=H("div"),m=H("label"),m.textContent="Select Mare:",g=P(),v=H("div"),y=H("input"),w=P(),U&&U.c(),b=P(),$=H("div"),_=H("div"),k=H("button"),C=N(Z),T=P(),W&&W.c(),M=P(),K&&K.c(),O=E(),D(t,"class","title"),D(a,"class","label"),D(u,"class","input"),D(u,"type","text"),D(u,"placeholder","Type Stallion ID"),D(l,"class","control has-icons-right"),D(i,"class","field"),D(s,"class","column"),D(m,"class","label"),D(y,"class","input"),D(y,"type","text"),D(y,"placeholder","Type Mare ID"),D(v,"class","control has-icons-right"),D(f,"class","field"),D(p,"class","column"),D(o,"class","columns"),D(k,"class","button is-primary is-fullwidth"),k.disabled=e[5],D(_,"class","control"),D($,"class","field")},m(r,S){I(r,t,S),I(r,n,S),I(r,o,S),x(o,s),x(s,i),x(i,a),x(i,c),x(i,l),x(l,u),A(u,e[0]),x(l,d),F&&F.m(l,null),x(o,h),x(o,p),x(p,f),x(f,m),x(f,g),x(f,v),x(v,y),A(y,e[1]),x(v,w),U&&U.m(v,null),I(r,b,S),I(r,$,S),x($,_),x(_,k),x(k,C),I(r,T,S),W&&W.m(r,S),I(r,M,S),K&&K.m(r,S),I(r,O,S),z||(L=[j(u,"input",e[16]),j(u,"input",e[11]),j(y,"input",e[18]),j(y,"input",e[13]),j(k,"click",e[15])],z=!0)},p(e,t){1&t[0]&&u.value!==e[0]&&A(u,e[0]),e[8].length>0?F?F.p(e,t):(F=Zo(e),F.c(),F.m(l,null)):F&&(F.d(1),F=null),2&t[0]&&y.value!==e[1]&&A(y,e[1]),e[9].length>0?U?U.p(e,t):(U=Uo(e),U.c(),U.m(v,null)):U&&(U.d(1),U=null),32&t[0]&&Z!==(Z=e[5]?"Calculating...":"Get Prediction")&&R(C,Z),32&t[0]&&(k.disabled=e[5]),e[5]?W?W.p(e,t):(W=Ko(),W.c(),W.m(M.parentNode,M)):W&&(W.d(1),W=null),e[4]&&!e[5]?K?K.p(e,t):(K=Jo(e),K.c(),K.m(O.parentNode,O)):K&&(K.d(1),K=null)},d(e){e&&S(t),e&&S(n),e&&S(o),F&&F.d(),U&&U.d(),e&&S(b),e&&S($),e&&S(T),W&&W.d(e),e&&S(M),K&&K.d(e),e&&S(O),z=!1,r(L)}}}function zo(t){let n;return{c(){n=H("div"),n.innerHTML='<p class="has-text-centered">No horses found.</p>',D(n,"class","empty-state")},m(e,t){I(e,n,t)},p:e,d(e){e&&S(n)}}}function Lo(t){let n;return{c(){n=H("div"),n.innerHTML='<p class="has-text-centered">Loading data...</p> \n      <progress class="progress is-info" max="100"></progress>',D(n,"class","loading-container")},m(e,t){I(e,n,t)},p:e,d(e){e&&S(n)}}}function Ro(e){let t,n;return{c(){t=H("div"),n=N(e[6]),D(t,"class","notification is-danger")},m(e,o){I(e,t,o),x(t,n)},p(e,t){64&t[0]&&R(n,e[6])},d(e){e&&S(t)}}}function Ao(t){let n;return{c(){n=H("p"),n.textContent="Please log in to match horses.",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},p:e,d(e){e&&S(n)}}}function Zo(e){let t,n,o,s=e[8],r=[];for(let t=0;t<s.length;t+=1)r[t]=Fo(Do(e,s,t));return{c(){t=H("div"),n=H("div"),o=H("div");for(let e=0;e<r.length;e+=1)r[e].c();D(o,"class","dropdown-content"),D(n,"class","dropdown-menu"),D(t,"class","dropdown is-active")},m(e,s){I(e,t,s),x(t,n),x(n,o);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(o,null)},p(e,t){if(4352&t[0]){let n;for(s=e[8],n=0;n<s.length;n+=1){const i=Do(e,s,n);r[n]?r[n].p(i,t):(r[n]=Fo(i),r[n].c(),r[n].m(o,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=s.length}},d(e){e&&S(t),T(r,e)}}}function Fo(e){let t,n,o,s,r,i,a,c=e[32].Name+"",l=e[32].HorsetelexID+"";function u(){return e[17](e[32])}return{c(){t=H("a"),n=N(c),o=N(" (ID: "),s=N(l),r=N(")\r\n                      "),D(t,"href","#"),D(t,"class","dropdown-item")},m(e,c){I(e,t,c),x(t,n),x(t,o),x(t,s),x(t,r),i||(a=j(t,"click",u),i=!0)},p(t,o){e=t,256&o[0]&&c!==(c=e[32].Name+"")&&R(n,c),256&o[0]&&l!==(l=e[32].HorsetelexID+"")&&R(s,l)},d(e){e&&S(t),i=!1,a()}}}function Uo(e){let t,n,o,s=e[9],r=[];for(let t=0;t<s.length;t+=1)r[t]=Wo(Mo(e,s,t));return{c(){t=H("div"),n=H("div"),o=H("div");for(let e=0;e<r.length;e+=1)r[e].c();D(o,"class","dropdown-content"),D(n,"class","dropdown-menu"),D(t,"class","dropdown is-active")},m(e,s){I(e,t,s),x(t,n),x(n,o);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(o,null)},p(e,t){if(16896&t[0]){let n;for(s=e[9],n=0;n<s.length;n+=1){const i=Mo(e,s,n);r[n]?r[n].p(i,t):(r[n]=Wo(i),r[n].c(),r[n].m(o,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=s.length}},d(e){e&&S(t),T(r,e)}}}function Wo(e){let t,n,o,s,r,i,a,c=e[29].Name+"",l=e[29].HorsetelexID+"";function u(){return e[19](e[29])}return{c(){t=H("a"),n=N(c),o=N(" (ID: "),s=N(l),r=N(")\r\n                      "),D(t,"href","#"),D(t,"class","dropdown-item")},m(e,c){I(e,t,c),x(t,n),x(t,o),x(t,s),x(t,r),i||(a=j(t,"click",u),i=!0)},p(t,o){e=t,512&o[0]&&c!==(c=e[29].Name+"")&&R(n,c),512&o[0]&&l!==(l=e[29].HorsetelexID+"")&&R(s,l)},d(e){e&&S(t),i=!1,a()}}}function Ko(t){let n,o,s,r;return{c(){n=H("div"),o=H("progress"),s=N(Yo),r=N("%"),D(o,"class","progress is-primary"),o.value=Yo,D(o,"max","100"),D(n,"class","mt-4")},m(e,t){I(e,n,t),x(n,o),x(o,s),x(o,r)},p:e,d(e){e&&S(n)}}}function Jo(e){let t,n,o,s,r,i,a,c,l,u,d,h,p,f,m,g,v,y,w,b,$,_,k,C,E,j,M,O,z,L,A,Z=e[4].result+"",F=e[2].Name+"",U=e[3].Name+"",W=Object.entries(e[4].reg_input),K=[];for(let t=0;t<W.length;t+=1)K[t]=Xo(jo(e,W,t));return{c(){t=H("div"),n=H("header"),n.innerHTML='<p class="card-header-title">Breeding Prediction</p>',o=P(),s=H("div"),r=H("div"),i=H("div"),a=H("div"),c=H("span"),l=N(Z),d=P(),h=H("table"),p=H("tbody"),f=H("tr"),m=H("td"),g=H("strong"),g.textContent="Regression Input Data",v=P(),y=H("table"),w=H("tbody");for(let e=0;e<K.length;e+=1)K[e].c();b=P(),$=H("tr"),_=H("td"),_.innerHTML="<strong>Stallion:</strong>",k=P(),C=H("td"),E=N(F),j=P(),M=H("tr"),O=H("td"),O.innerHTML="<strong>Mare:</strong>",z=P(),L=H("td"),A=N(U),D(n,"class","card-header"),D(c,"class",u=`tag is-large ${e[4].color}`),D(a,"class","column is-narrow"),D(i,"class","columns is-mobile is-centered"),D(y,"class","table is-fullwidth is-bordered is-size-7 mt-2"),D(m,"colspan","2"),D(h,"class","table is-fullwidth mt-4"),D(r,"class","content"),D(s,"class","card-content"),D(t,"class","card mt-4")},m(e,u){I(e,t,u),x(t,n),x(t,o),x(t,s),x(s,r),x(r,i),x(i,a),x(a,c),x(c,l),x(r,d),x(r,h),x(h,p),x(p,f),x(f,m),x(m,g),x(m,v),x(m,y),x(y,w);for(let e=0;e<K.length;e+=1)K[e]&&K[e].m(w,null);x(p,b),x(p,$),x($,_),x($,k),x($,C),x(C,E),x(p,j),x(p,M),x(M,O),x(M,z),x(M,L),x(L,A)},p(e,t){if(16&t[0]&&Z!==(Z=e[4].result+"")&&R(l,Z),16&t[0]&&u!==(u=`tag is-large ${e[4].color}`)&&D(c,"class",u),16&t[0]){let n;for(W=Object.entries(e[4].reg_input),n=0;n<W.length;n+=1){const o=jo(e,W,n);K[n]?K[n].p(o,t):(K[n]=Xo(o),K[n].c(),K[n].m(w,null))}for(;n<K.length;n+=1)K[n].d(1);K.length=W.length}4&t[0]&&F!==(F=e[2].Name+"")&&R(E,F),8&t[0]&&U!==(U=e[3].Name+"")&&R(A,U)},d(e){e&&S(t),T(K,e)}}}function Xo(e){let t,n,o,s,r,i,a,c,l=e[25]+"",u=e[26]+"";return{c(){t=H("tr"),n=H("td"),o=H("strong"),s=N(l),r=P(),i=H("td"),a=N(u),c=P()},m(e,l){I(e,t,l),x(t,n),x(n,o),x(o,s),x(t,r),x(t,i),x(i,a),x(t,c)},p(e,t){16&t[0]&&l!==(l=e[25]+"")&&R(s,l),16&t[0]&&u!==(u=e[26]+"")&&R(a,u)},d(e){e&&S(t)}}}function Bo(t){let n;function o(e,t){return e[10]?e[6]?Ro:e[5]?Lo:0===e[7].length?zo:Oo:Ao}let s=o(t),r=s(t);return{c(){n=H("main"),r.c()},m(e,t){I(e,n,t),r.m(n,null)},p(e,t){s===(s=o(e))&&r?r.p(e,t):(r.d(1),r=s(e),r&&(r.c(),r.m(n,null)))},i:e,o:e,d(e){e&&S(n),r.d()}}}let Yo=0;function Go(e,t,n){let o,s,r;l(e,bn,(e=>n(10,o=e)));let i=null,a=null,c=null,u=!1,d=null,h=[],p=[],f=[],m=[],g=[];function v(e){n(0,s=e.HorsetelexID.toString()),n(2,i=e),n(8,m=[])}function y(e){n(1,r=e.HorsetelexID.toString()),n(3,a=e),n(9,g=[])}ee((async()=>{o&&(n(5,u=!0),await async function(){try{const e=await In();if(!e)return void console.log("Not authenticated, cannot fetch horses");const t=await fetch("http://127.0.0.1:5000/horses?page=1&per_page=9999",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include"});if(!t.ok){const e=await t.text();return void console.error("Failed to fetch horses:",e)}const o=await t.json();n(7,h=o.data),console.log("Fetched all horses:",h.length)}catch(e){console.error("Error fetching horses:",e)}}(),p=h.filter((e=>"Stallion"===e["Horse Type"])),f=h.filter((e=>"Mare"===e["Horse Type"])),n(5,u=!1))}));return[s,r,i,a,c,u,d,h,m,g,o,function(){if(!s)return n(8,m=[]),void n(2,i=null);const e=s.toLowerCase();n(8,m=p.filter((t=>t.HorsetelexID.toString().toLowerCase().includes(e))))},v,function(){if(!r)return n(9,g=[]),void n(3,a=null);const e=r.toLowerCase();n(9,g=f.filter((t=>t.HorsetelexID.toString().toLowerCase().includes(e))))},y,async()=>{if(s&&r)try{n(5,u=!0),n(6,d=null);const e=await In();if(!e)throw new Error("No authentication token available");const t=Number(s),o=Number(r),l=await fetch("http://127.0.0.1:5000/match-pair",{method:"POST",body:JSON.stringify({stallion_id:t,mare_id:o}),headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include"});if(!l.ok){console.error("Response status:",l.status),console.error("Response status text:",l.statusText);const e=await l.text();throw console.error("Error response:",e),new Error("Failed to calculate prediction")}n(4,c=await l.json()),n(2,i=c.stallion),n(3,a=c.mare),function(){const e=c.predicted_jumping_class;let t,o;console.log(e),e<1.3?(t="Poor "+Math.round(100*e)/100,o="is-danger"):e<1.4?(t="Fair "+Math.round(100*e)/100,o="is-warning"):e<1.5?(t="Good "+Math.round(100*e)/100,o="is-success"):(t="Excellent "+Math.round(100*e)/100,o="is-primary");n(4,c={...c,result:t,color:o,compatibility:e}),console.log(c)}()}catch(e){console.error("Error calculating prediction:",e),n(6,d="Failed to calculate prediction. Please try again.")}finally{n(5,u=!1)}else n(4,c=null)},function(){s=this.value,n(0,s)},e=>v(e),function(){r=this.value,n(1,r)},e=>y(e)]}class Vo extends De{constructor(e){super(),Me(this,e,Go,Bo,a,{},null,[-1,-1])}}function qo(e,t,n){const o=e.slice();return o[11]=t[n],o}function Qo(e,t,n){const o=e.slice();return o[14]=t[n],o}function es(e){let t,n,o,s,i,a,c,l,u,d,h,p,f,m=e[4],g=[];for(let t=0;t<m.length;t+=1)g[t]=rs(Qo(e,m,t));let v=e[0]&&is(e);return{c(){t=H("h1"),t.textContent="Find Best Matches",n=P(),o=H("div"),s=H("label"),s.textContent="Select a Horse:",i=P(),a=H("div"),c=H("div"),l=H("select"),u=H("option"),u.textContent="-- Select a Horse --";for(let e=0;e<g.length;e+=1)g[e].c();d=P(),v&&v.c(),h=E(),D(t,"class","title"),D(s,"class","label"),D(s,"for","horse-id"),u.__value="",u.value=u.__value,void 0===e[0]&&de((()=>e[8].call(l))),D(c,"class","select is-fullwidth"),D(a,"class","control"),D(o,"class","field")},m(r,m){I(r,t,m),I(r,n,m),I(r,o,m),x(o,s),x(o,i),x(o,a),x(a,c),x(c,l),x(l,u);for(let e=0;e<g.length;e+=1)g[e]&&g[e].m(l,null);F(l,e[0],!0),I(r,d,m),v&&v.m(r,m),I(r,h,m),p||(f=[j(l,"change",e[8]),j(l,"change",e[6])],p=!0)},p(e,t){if(16&t){let n;for(m=e[4],n=0;n<m.length;n+=1){const o=Qo(e,m,n);g[n]?g[n].p(o,t):(g[n]=rs(o),g[n].c(),g[n].m(l,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=m.length}17&t&&F(l,e[0]),e[0]?v?v.p(e,t):(v=is(e),v.c(),v.m(h.parentNode,h)):v&&(v.d(1),v=null)},d(e){e&&S(t),e&&S(n),e&&S(o),T(g,e),e&&S(d),v&&v.d(e),e&&S(h),p=!1,r(f)}}}function ts(t){let n;return{c(){n=H("div"),n.innerHTML='<p class="has-text-centered">No horses found.</p>',D(n,"class","empty-state")},m(e,t){I(e,n,t)},p:e,d(e){e&&S(n)}}}function ns(t){let n;return{c(){n=H("div"),n.innerHTML='<p class="has-text-centered">Loading data...</p> \n      <progress class="progress is-info" max="100"></progress>',D(n,"class","loading-container")},m(e,t){I(e,n,t)},p:e,d(e){e&&S(n)}}}function os(e){let t,n;return{c(){t=H("div"),n=N(e[3]),D(t,"class","notification is-danger")},m(e,o){I(e,t,o),x(t,n)},p(e,t){8&t&&R(n,e[3])},d(e){e&&S(t)}}}function ss(t){let n;return{c(){n=H("p"),n.textContent="Please log in to find matches.",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},p:e,d(e){e&&S(n)}}}function rs(e){let t,n,o,s,r,i,a=e[14].Name+"",c=e[14].HorsetelexID+"";return{c(){t=H("option"),n=N(a),o=N(" (ID: "),s=N(c),r=N(")"),t.__value=i=e[14].HorsetelexID,t.value=t.__value},m(e,i){I(e,t,i),x(t,n),x(t,o),x(t,s),x(t,r)},p(e,o){16&o&&a!==(a=e[14].Name+"")&&R(n,a),16&o&&c!==(c=e[14].HorsetelexID+"")&&R(s,c),16&o&&i!==(i=e[14].HorsetelexID)&&(t.__value=i,t.value=t.__value)},d(e){e&&S(t)}}}function is(e){let t,n,o,s,r,i,a,c,l=e[1]?"Calculating Matches...":"Find Best Matches";function u(e,t){return e[2].length>0&&!e[1]?cs:!e[1]&&e[0]?as:void 0}let d=u(e),h=d&&d(e);return{c(){t=H("div"),n=H("div"),o=H("button"),s=N(l),r=P(),h&&h.c(),i=E(),D(o,"class","button is-primary is-fullwidth"),o.disabled=e[1],D(n,"class","control"),D(t,"class","field")},m(l,u){I(l,t,u),x(t,n),x(n,o),x(o,s),I(l,r,u),h&&h.m(l,u),I(l,i,u),a||(c=j(o,"click",e[7]),a=!0)},p(e,t){2&t&&l!==(l=e[1]?"Calculating Matches...":"Find Best Matches")&&R(s,l),2&t&&(o.disabled=e[1]),d===(d=u(e))&&h?h.p(e,t):(h&&h.d(1),h=d&&d(e),h&&(h.c(),h.m(i.parentNode,i)))},d(e){e&&S(t),e&&S(r),h&&h.d(e),e&&S(i),a=!1,c()}}}function as(t){let n;return{c(){n=H("p"),n.textContent="No matches found.",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},p:e,d(e){e&&S(n)}}}function cs(e){let t,n,o,s,r,i,a,c,l,u=e[2],d=[];for(let t=0;t<u.length;t+=1)d[t]=ds(qo(e,u,t));return{c(){t=H("div"),n=H("header"),n.innerHTML='<p class="card-header-title">Match Results</p>',o=P(),s=H("div"),r=H("div"),i=H("table"),a=H("thead"),a.innerHTML="<tr><th>Potential Match</th> \n                    <th>Match ID</th> \n                    <th>Result</th></tr>",c=P(),l=H("tbody");for(let e=0;e<d.length;e+=1)d[e].c();D(n,"class","card-header"),D(i,"class","table is-fullwidth is-striped"),D(r,"class","content"),D(s,"class","card-content"),D(t,"class","card mt-4")},m(e,u){I(e,t,u),x(t,n),x(t,o),x(t,s),x(s,r),x(r,i),x(i,a),x(i,c),x(i,l);for(let e=0;e<d.length;e+=1)d[e]&&d[e].m(l,null)},p(e,t){if(5&t){let n;for(u=e[2],n=0;n<u.length;n+=1){const o=qo(e,u,n);d[n]?d[n].p(o,t):(d[n]=ds(o),d[n].c(),d[n].m(l,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=u.length}},d(e){e&&S(t),T(d,e)}}}function ls(e){let t,n,o,s,r,i=e[11].stallion_id+"",a=e[11].stallion_name+"";return{c(){t=H("td"),n=N(i),o=P(),s=H("td"),r=N(a)},m(e,i){I(e,t,i),x(t,n),I(e,o,i),I(e,s,i),x(s,r)},p(e,t){4&t&&i!==(i=e[11].stallion_id+"")&&R(n,i),4&t&&a!==(a=e[11].stallion_name+"")&&R(r,a)},d(e){e&&S(t),e&&S(o),e&&S(s)}}}function us(e){let t,n,o,s,r,i=e[11].mare_id+"",a=e[11].mare_name+"";return{c(){t=H("td"),n=N(i),o=P(),s=H("td"),r=N(a)},m(e,i){I(e,t,i),x(t,n),I(e,o,i),I(e,s,i),x(s,r)},p(e,t){4&t&&i!==(i=e[11].mare_id+"")&&R(n,i),4&t&&a!==(a=e[11].mare_name+"")&&R(r,a)},d(e){e&&S(t),e&&S(o),e&&S(s)}}}function ds(e){let t,n,o,s,r,i,a,c,l=e[11].prediction+"";function u(e,t){return 5&t&&(n=null),null==n&&(n=!(e[11].stallion_id!==Number(e[0]))),n?us:ls}let d=u(e,-1),h=d(e);return{c(){t=H("tr"),h.c(),o=P(),s=H("td"),r=H("span"),i=N(l),c=P(),D(r,"class",a=`tag ${e[11].color}`)},m(e,n){I(e,t,n),h.m(t,null),x(t,o),x(t,s),x(s,r),x(r,i),x(t,c)},p(e,n){d===(d=u(e,n))&&h?h.p(e,n):(h.d(1),h=d(e),h&&(h.c(),h.m(t,o))),4&n&&l!==(l=e[11].prediction+"")&&R(i,l),4&n&&a!==(a=`tag ${e[11].color}`)&&D(r,"class",a)},d(e){e&&S(t),h.d()}}}function hs(t){let n;function o(e,t){return e[5]?e[3]?os:e[1]?ns:0===e[4].length?ts:es:ss}let s=o(t),r=s(t);return{c(){n=H("main"),r.c()},m(e,t){I(e,n,t),r.m(n,null)},p(e,[t]){s===(s=o(e))&&r?r.p(e,t):(r.d(1),r=s(e),r&&(r.c(),r.m(n,null)))},i:e,o:e,d(e){e&&S(n),r.d()}}}function ps(e,t,n){let o,s;l(e,bn,(e=>n(5,o=e)));let r,i=!1,a=[],c=null,u=[];ee((async()=>{o&&(n(1,i=!0),await async function(){try{const e=await fetch("/common_ids.csv");if(!e.ok)throw new Error(`Failed to load CSV file. Status: ${e.status}`);const t=await e.text();n(4,u=function(e){const t=e.trim().split("\n");if(t.length<2)return[];const n=t[0].split(",");return t.slice(1).map((e=>{const t=e.split(",");let o={};return n.forEach(((e,n)=>{o[e.trim()]=(t[n]||"").trim()})),o}))}(t)),console.log("Parsed CSV horses:",u)}catch(e){console.error("Error fetching horses from CSV:",e),n(3,c="Failed to fetch horses from CSV.")}}(),n(1,i=!1))}));return[s,i,a,c,u,o,function(){n(2,a=[])},async()=>{if(s)try{n(1,i=!0),n(3,c=null);const e=await In();if(!e)throw new Error("No authentication token available");const t=Number(s),o=await fetch("http://127.0.0.1:5000/find-matches",{method:"POST",body:JSON.stringify({horse_id:t}),headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include"});if(!o.ok){console.error("Response status:",o.status),console.error("Response status text:",o.statusText);const e=await o.text();throw console.error("Error response:",e),new Error("Failed to get matches")}r=await o.json(),n(2,a=r.matches)}catch(e){console.error("Error fetching matches:",e),n(3,c="Failed to calculate matches. Please try again."),n(2,a=[])}finally{n(1,i=!1)}else n(2,a=null)},function(){s=U(this),n(0,s),n(4,u)}]}class fs extends De{constructor(e){super(),Me(this,e,ps,hs,a,{})}}function ms(e,t,n){const o=e.slice();return o[13]=t[n],o}function gs(e,t,n){const o=e.slice();return o[16]=t[n],o}function vs(e,t,n){const o=e.slice();return o[16]=t[n],o}function ys(e){let t,n,o,s,r,i,a,c,l,u,d,h,p,f,m=e[6]&&bs(e),g=e[0],v=[];for(let t=0;t<g.length;t+=1)v[t]=$s(vs(e,g,t));let y=e[1]&&_s(e);return{c(){t=H("h1"),t.textContent="One vs Many Matching",n=P(),m&&m.c(),o=P(),s=H("div"),r=H("label"),r.textContent="Select a Horse:",i=P(),a=H("div"),c=H("div"),l=H("select"),u=H("option"),u.textContent="Select a horse";for(let e=0;e<v.length;e+=1)v[e].c();d=P(),y&&y.c(),h=E(),D(t,"class","title"),D(r,"class","label"),D(r,"for","horse-select"),u.__value=null,u.value=u.__value,D(l,"id","horse-select"),void 0===e[1]&&de((()=>e[10].call(l))),D(c,"class","select is-fullwidth"),D(a,"class","control"),D(s,"class","field")},m(g,w){I(g,t,w),I(g,n,w),m&&m.m(g,w),I(g,o,w),I(g,s,w),x(s,r),x(s,i),x(s,a),x(a,c),x(c,l),x(l,u);for(let e=0;e<v.length;e+=1)v[e]&&v[e].m(l,null);F(l,e[1],!0),I(g,d,w),y&&y.m(g,w),I(g,h,w),p||(f=j(l,"change",e[10]),p=!0)},p(e,t){if(e[6]?m?m.p(e,t):(m=bs(e),m.c(),m.m(o.parentNode,o)):m&&(m.d(1),m=null),1&t){let n;for(g=e[0],n=0;n<g.length;n+=1){const o=vs(e,g,n);v[n]?v[n].p(o,t):(v[n]=$s(o),v[n].c(),v[n].m(l,null))}for(;n<v.length;n+=1)v[n].d(1);v.length=g.length}3&t&&F(l,e[1]),e[1]?y?y.p(e,t):(y=_s(e),y.c(),y.m(h.parentNode,h)):y&&(y.d(1),y=null)},d(e){e&&S(t),e&&S(n),m&&m.d(e),e&&S(o),e&&S(s),T(v,e),e&&S(d),y&&y.d(e),e&&S(h),p=!1,f()}}}function ws(t){let n;return{c(){n=H("p"),n.textContent="Please log in to use the matching system.",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},p:e,d(e){e&&S(n)}}}function bs(e){let t,n;return{c(){t=H("div"),n=N(e[6]),D(t,"class","notification is-danger")},m(e,o){I(e,t,o),x(t,n)},p(e,t){64&t&&R(n,e[6])},d(e){e&&S(t)}}}function $s(e){let t,n,o,s,r,i,a=e[16].Name+"",c=e[16]["Horse Type"]+"";return{c(){t=H("option"),n=N(a),o=N(" ("),s=N(c),r=N(")"),t.__value=i=e[16],t.value=t.__value},m(e,i){I(e,t,i),x(t,n),x(t,o),x(t,s),x(t,r)},p(e,o){1&o&&a!==(a=e[16].Name+"")&&R(n,a),1&o&&c!==(c=e[16]["Horse Type"]+"")&&R(s,c),1&o&&i!==(i=e[16])&&(t.__value=i,t.value=t.__value)},d(e){e&&S(t)}}}function _s(e){let t,n,o,s,r,i,a,c,l,u,d,h,p,f,m,g,v,y,w,b,$,_,k,C,M,O,z,L,A,Z,F,U,W,K,J,X=e[1].Name+"",B=e[1]["Horse Type"]+"",Y=e[1]["Horse YoB"]+"",G=e[1].HorsetelexID+"",V=e[5]?"Calculating Matches...":"Calculate Matches",q=e[2],Q=[];for(let t=0;t<q.length;t+=1)Q[t]=xs(gs(e,q,t));let ee=e[5]&&ks(),te=e[4].length>0&&!e[5]&&Cs(e);return{c(){t=H("div"),n=H("h2"),o=N("Selected Horse: "),s=N(X),r=P(),i=H("p"),a=H("strong"),a.textContent="Type:",c=P(),l=N(B),u=P(),d=H("p"),h=H("strong"),h.textContent="Year of Birth:",p=P(),f=N(Y),m=P(),g=H("p"),v=H("strong"),v.textContent="ID:",y=P(),w=N(G),b=P(),$=H("div"),_=H("h2"),_.textContent="Select Potential Matches:",k=P(),C=H("div");for(let e=0;e<Q.length;e+=1)Q[e].c();M=P(),O=H("div"),z=H("div"),L=H("button"),A=N(V),F=P(),ee&&ee.c(),U=P(),te&&te.c(),W=E(),D(n,"class","subtitle"),D(t,"class","box"),D(_,"class","subtitle"),D(C,"class","columns is-multiline"),D($,"class","box"),D(L,"class","button is-primary is-fullwidth"),L.disabled=Z=e[5]||0===e[3].length,D(z,"class","control"),D(O,"class","field")},m(S,T){I(S,t,T),x(t,n),x(n,o),x(n,s),x(t,r),x(t,i),x(i,a),x(i,c),x(i,l),x(t,u),x(t,d),x(d,h),x(d,p),x(d,f),x(t,m),x(t,g),x(g,v),x(g,y),x(g,w),I(S,b,T),I(S,$,T),x($,_),x($,k),x($,C);for(let e=0;e<Q.length;e+=1)Q[e]&&Q[e].m(C,null);I(S,M,T),I(S,O,T),x(O,z),x(z,L),x(L,A),I(S,F,T),ee&&ee.m(S,T),I(S,U,T),te&&te.m(S,T),I(S,W,T),K||(J=j(L,"click",e[9]),K=!0)},p(e,t){if(2&t&&X!==(X=e[1].Name+"")&&R(s,X),2&t&&B!==(B=e[1]["Horse Type"]+"")&&R(l,B),2&t&&Y!==(Y=e[1]["Horse YoB"]+"")&&R(f,Y),2&t&&G!==(G=e[1].HorsetelexID+"")&&R(w,G),260&t){let n;for(q=e[2],n=0;n<q.length;n+=1){const o=gs(e,q,n);Q[n]?Q[n].p(o,t):(Q[n]=xs(o),Q[n].c(),Q[n].m(C,null))}for(;n<Q.length;n+=1)Q[n].d(1);Q.length=q.length}32&t&&V!==(V=e[5]?"Calculating Matches...":"Calculate Matches")&&R(A,V),40&t&&Z!==(Z=e[5]||0===e[3].length)&&(L.disabled=Z),e[5]?ee||(ee=ks(),ee.c(),ee.m(U.parentNode,U)):ee&&(ee.d(1),ee=null),e[4].length>0&&!e[5]?te?te.p(e,t):(te=Cs(e),te.c(),te.m(W.parentNode,W)):te&&(te.d(1),te=null)},d(e){e&&S(t),e&&S(b),e&&S($),T(Q,e),e&&S(M),e&&S(O),e&&S(F),ee&&ee.d(e),e&&S(U),te&&te.d(e),e&&S(W),K=!1,J()}}}function xs(e){let t,n,o,s,r,i,a,c,l,u,d,h=e[16].Name+"",p=e[16].HorsetelexID+"";function f(){return e[11](e[16])}return{c(){t=H("div"),n=H("label"),o=H("input"),s=P(),r=N(h),i=N(" ("),a=N(p),c=N(")"),l=P(),D(o,"type","checkbox"),D(n,"class","checkbox"),D(t,"class","column is-one-third")},m(e,h){I(e,t,h),x(t,n),x(n,o),x(n,s),x(n,r),x(n,i),x(n,a),x(n,c),x(t,l),u||(d=j(o,"change",f),u=!0)},p(t,n){e=t,4&n&&h!==(h=e[16].Name+"")&&R(r,h),4&n&&p!==(p=e[16].HorsetelexID+"")&&R(a,p)},d(e){e&&S(t),u=!1,d()}}}function ks(e){let t;return{c(){t=H("div"),t.innerHTML='<progress class="progress is-primary"></progress>',D(t,"class","mt-4")},m(e,n){I(e,t,n)},d(e){e&&S(t)}}}function Cs(e){let t,n,o,s,r,i,a,c,l,u,d,h,p=e[1].Name+"",f=e[4],m=[];for(let t=0;t<f.length;t+=1)m[t]=Is(ms(e,f,t));return{c(){t=H("div"),n=H("header"),o=H("p"),s=N("Match Results for "),r=N(p),i=P(),a=H("div"),c=H("div"),l=H("table"),u=H("thead"),u.innerHTML="<tr><th>Potential Match</th> \n                    <th>Result</th> \n                    <th>Match ID</th> \n                    <th>Common Ancestors</th></tr>",d=P(),h=H("tbody");for(let e=0;e<m.length;e+=1)m[e].c();D(o,"class","card-header-title"),D(n,"class","card-header"),D(l,"class","table is-fullwidth is-striped"),D(c,"class","content"),D(a,"class","card-content"),D(t,"class","card mt-4")},m(e,p){I(e,t,p),x(t,n),x(n,o),x(o,s),x(o,r),x(t,i),x(t,a),x(a,c),x(c,l),x(l,u),x(l,d),x(l,h);for(let e=0;e<m.length;e+=1)m[e]&&m[e].m(h,null)},p(e,t){if(2&t&&p!==(p=e[1].Name+"")&&R(r,p),16&t){let n;for(f=e[4],n=0;n<f.length;n+=1){const o=ms(e,f,n);m[n]?m[n].p(o,t):(m[n]=Is(o),m[n].c(),m[n].m(h,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=f.length}},d(e){e&&S(t),T(m,e)}}}function Is(e){let t,n,o,s,r,i,a,c,l,u,d,h,p,f,m,g=e[13].name+"",v=e[13].result+"",y=e[13].id+"",w=e[13].commonAncestors+"";return{c(){t=H("tr"),n=H("td"),o=N(g),s=P(),r=H("td"),i=H("span"),a=N(v),l=P(),u=H("td"),d=N(y),h=P(),p=H("td"),f=N(w),m=P(),D(i,"class",c=`tag ${e[13].color}`)},m(e,c){I(e,t,c),x(t,n),x(n,o),x(t,s),x(t,r),x(r,i),x(i,a),x(t,l),x(t,u),x(u,d),x(t,h),x(t,p),x(p,f),x(t,m)},p(e,t){16&t&&g!==(g=e[13].name+"")&&R(o,g),16&t&&v!==(v=e[13].result+"")&&R(a,v),16&t&&c!==(c=`tag ${e[13].color}`)&&D(i,"class",c),16&t&&y!==(y=e[13].id+"")&&R(d,y),16&t&&w!==(w=e[13].commonAncestors+"")&&R(f,w)},d(e){e&&S(t)}}}function Ss(t){let n;function o(e,t){return e[7]?ys:ws}let s=o(t),r=s(t);return{c(){n=H("main"),r.c()},m(e,t){I(e,n,t),r.m(n,null)},p(e,[t]){s===(s=o(e))&&r?r.p(e,t):(r.d(1),r=s(e),r&&(r.c(),r.m(n,null)))},i:e,o:e,d(e){e&&S(n),r.d()}}}function Ts(e,t,n){let o;l(e,bn,(e=>n(7,o=e)));let{horses:s=[]}=t,r=null,i=[],a=[],c=[],u=!1,d=null;function h(e){const t=a.findIndex((t=>t.HorsetelexID===e.HorsetelexID));n(3,a=-1===t?[...a,e]:a.filter((t=>t.HorsetelexID!==e.HorsetelexID)))}return e.$$set=e=>{"horses"in e&&n(0,s=e.horses)},e.$$.update=()=>{3&e.$$.dirty&&n(2,i=r?s.filter((e=>{const t=r["Horse Type"],n=e["Horse Type"];return"Stallion"===t&&"Mare"===n||"Mare"===t&&"Stallion"===n})):[])},[s,r,i,a,c,u,d,o,h,async function(){if(r&&0!==a.length)try{n(5,u=!0),n(6,d=null),n(4,c=[]);const e=await In();if(!e)throw new Error("No authentication token available");const t=a.map((async t=>{const n=await fetch("http://127.0.0.1:5000/match-pair",{method:"POST",body:JSON.stringify({stallion_id:"Stallion"===r["Horse Type"]?r.HorsetelexID:t.HorsetelexID,mare_id:"Mare"===r["Horse Type"]?r.HorsetelexID:t.HorsetelexID}),headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include"});if(!n.ok)throw new Error(`Failed to calculate match for horse ${t.Name}`);return await n.json()}));!function(e){n(4,c=e.map((e=>{const t="Stallion"===r["Horse Type"]?e.mare:e.stallion,n=e.stallion_summary,o=e.mare_summary;let s,i;const a=e.common_ancestors.some((e=>e.median_composite_score>450)),c=n.jumping_score_adults_quartile>=3&&o.jumping_score_adults_quartile>=3;return c&&a?(s="Excellent",i="is-primary"):c?(s="Good",i="is-success"):a?(s="Fair",i="is-warning"):(s="Poor",i="is-danger"),{name:t.Name,id:t.HorsetelexID,result:s,color:i,stallionQuartile:n.jumping_score_adults_quartile,mareQuartile:o.jumping_score_adults_quartile,commonAncestors:e.common_ancestors.length}})));const t={Excellent:4,Good:3,Fair:2,Poor:1};c.sort(((e,n)=>t[n.result]-t[e.result]))}(await Promise.all(t))}catch(e){console.error("Error calculating matches:",e),n(6,d="Failed to calculate matches. Please try again.")}finally{n(5,u=!1)}},function(){r=U(this),n(1,r),n(0,s)},e=>h(e)]}class Hs extends De{constructor(e){super(),Me(this,e,Ts,Ss,a,{horses:0})}}function Ns(e,t,n){const o=e.slice();return o[7]=t[n],o}function Ps(e){let t;return{c(){t=H("div"),t.textContent="No messages yet. Start by asking about a horse!",D(t,"class","no-messages")},m(e,n){I(e,t,n)},d(e){e&&S(t)}}}function Es(e){let t,n,o,s,r=e[7].content+"";return{c(){t=H("div"),n=H("div"),o=N(r),D(n,"class","msg-content"),D(t,"class",s="user"===e[7].role?"message user-msg":"message assistant-msg")},m(e,s){I(e,t,s),x(t,n),x(n,o)},p(e,n){2&n&&r!==(r=e[7].content+"")&&R(o,r),2&n&&s!==(s="user"===e[7].role?"message user-msg":"message assistant-msg")&&D(t,"class",s)},d(e){e&&S(t)}}}function js(e){let t;return{c(){t=H("div"),t.innerHTML='<div class="msg-content">Thinking...</div>',D(t,"class","message assistant-msg")},m(e,n){I(e,t,n)},d(e){e&&S(t)}}}function Ms(e){let t,n;return{c(){t=H("div"),n=N(e[3]),D(t,"class","error")},m(e,o){I(e,t,o),x(t,n)},p(e,t){8&t&&R(n,e[3])},d(e){e&&S(t)}}}function Ds(t){let n,o,s,i,a,c,l,u,d,h,p,f,m,g,v,y,w=0===t[1].length&&!t[2]&&!t[3]&&Ps(),b=t[1],$=[];for(let e=0;e<b.length;e+=1)$[e]=Es(Ns(t,b,e));let _=t[2]&&js(),k=t[3]&&Ms(t);return{c(){n=H("div"),o=H("h2"),o.textContent="Horse Chat Assistant",s=P(),i=H("div"),a=H("div"),w&&w.c(),c=P();for(let e=0;e<$.length;e+=1)$[e].c();l=P(),_&&_.c(),u=P(),k&&k.c(),d=P(),h=H("div"),p=H("input"),f=P(),m=H("button"),g=N("Send"),D(o,"class","chat-title"),D(a,"class","messages"),D(p,"type","text"),D(p,"placeholder","Ask about horses..."),m.disabled=t[2],D(h,"class","input-bar"),D(i,"class","chat-container"),D(n,"class","chat-wrapper")},m(e,r){I(e,n,r),x(n,o),x(n,s),x(n,i),x(i,a),w&&w.m(a,null),x(a,c);for(let e=0;e<$.length;e+=1)$[e]&&$[e].m(a,null);x(a,l),_&&_.m(a,null),x(i,u),k&&k.m(i,null),x(i,d),x(i,h),x(h,p),A(p,t[0]),x(h,f),x(h,m),x(m,g),v||(y=[j(p,"input",t[6]),j(p,"keydown",t[5]),j(m,"click",t[4])],v=!0)},p(e,[t]){if(0!==e[1].length||e[2]||e[3]?w&&(w.d(1),w=null):w||(w=Ps(),w.c(),w.m(a,c)),2&t){let n;for(b=e[1],n=0;n<b.length;n+=1){const o=Ns(e,b,n);$[n]?$[n].p(o,t):($[n]=Es(o),$[n].c(),$[n].m(a,l))}for(;n<$.length;n+=1)$[n].d(1);$.length=b.length}e[2]?_||(_=js(),_.c(),_.m(a,null)):_&&(_.d(1),_=null),e[3]?k?k.p(e,t):(k=Ms(e),k.c(),k.m(i,d)):k&&(k.d(1),k=null),1&t&&p.value!==e[0]&&A(p,e[0]),4&t&&(m.disabled=e[2])},i:e,o:e,d(e){e&&S(n),w&&w.d(),T($,e),_&&_.d(),k&&k.d(),v=!1,r(y)}}}function Os(e,t,n){let o="",s=[],r=!1,i=null;async function a(){if(!o.trim())return;n(1,s=[...s,{role:"user",content:o}]);const e=o;n(0,o=""),n(3,i=null),n(2,r=!0);try{const t=await fetch("http://127.0.0.1:5000/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})});if(n(2,r=!1),!t.ok){const e=await t.text();return n(3,i="Error: "+e),void n(1,s=[...s,{role:"assistant",content:"Sorry, I ran into an error."}])}const o=await t.json();n(1,s=[...s,{role:"assistant",content:o.response}])}catch(e){n(2,r=!1),n(3,i="Network error: "+e.message),n(1,s=[...s,{role:"assistant",content:"Sorry, a network error occurred."}])}}return[o,s,r,i,a,function(e){"Enter"===e.key&&(e.preventDefault(),a())},function(){o=this.value,n(0,o)}]}class zs extends De{constructor(e){super(),Me(this,e,Os,Ds,a,{})}}function Ls(e){let t,n;return{c(){t=H("div"),n=N(e[4]),D(t,"class","notification is-danger")},m(e,o){I(e,t,o),x(t,n)},p(e,t){16&t&&R(n,e[4])},d(e){e&&S(t)}}}function Rs(t){let n;return{c(){n=H("div"),n.innerHTML='<p>Loading application...</p> \n    <progress class="progress is-primary"></progress>',D(n,"class","loading-container")},m(e,t){I(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}function As(e){let t,n;return t=new xt({props:{$$slots:{default:[Cr]},$$scope:{ctx:e}}}),{c(){Ne(t.$$.fragment)},m(e,o){Pe(t,e,o),n=!0},p(e,n){const o={};8302&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(xe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Ee(t,e)}}}function Zs(e){let t;return{c(){t=N("View Horses")},m(e,n){I(e,t,n)},d(e){e&&S(t)}}}function Fs(e){let t;return{c(){t=N("My Horses")},m(e,n){I(e,t,n)},d(e){e&&S(t)}}}function Us(e){let t;return{c(){t=N("Match Horses")},m(e,n){I(e,t,n)},d(e){e&&S(t)}}}function Ws(e){let t;return{c(){t=N("Auto Match")},m(e,n){I(e,t,n)},d(e){e&&S(t)}}}function Ks(e){let t;return{c(){t=N("One vs Many")},m(e,n){I(e,t,n)},d(e){e&&S(t)}}}function Js(e){let t;return{c(){t=N("Chat")},m(e,n){I(e,t,n)},d(e){e&&S(t)}}}function Xs(e){let t;return{c(){t=N("Add Horse")},m(e,n){I(e,t,n)},d(e){e&&S(t)}}}function Bs(e){let t;return{c(){t=N("Add Competition Result")},m(e,n){I(e,t,n)},d(e){e&&S(t)}}}function Ys(e){let t,n,o,s,r,i;return{c(){t=H("div"),n=H("button"),o=N("Login"),D(n,"class","button is-light"),n.disabled=s=!e[6],D(t,"class","navbar-item")},m(s,a){I(s,t,a),x(t,n),x(n,o),r||(i=j(n,"click",e[11]),r=!0)},p(e,t){64&t&&s!==(s=!e[6])&&(n.disabled=s)},d(e){e&&S(t),r=!1,i()}}}function Gs(e){let t,n,o,s,r,i,a,c,l,u=(e[5]?.name||"User")+"";return{c(){t=H("div"),n=H("span"),o=N("Welcome, "),s=N(u),r=P(),i=H("div"),a=H("button"),a.textContent="Logout",D(t,"class","navbar-item"),D(a,"class","button is-light"),D(i,"class","navbar-item")},m(u,d){I(u,t,d),x(t,n),x(n,o),x(n,s),I(u,r,d),I(u,i,d),x(i,a),c||(l=j(a,"click",e[10]),c=!0)},p(e,t){32&t&&u!==(u=(e[5]?.name||"User")+"")&&R(s,u)},d(e){e&&S(t),e&&S(r),e&&S(i),c=!1,l()}}}function Vs(e){let t,n;return t=new An({props:{horses:e[2],fetchHorses:e[7],isLoading:e[3]}}),{c(){Ne(t.$$.fragment)},m(e,o){Pe(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.horses=e[2]),8&n&&(o.isLoading=e[3]),t.$set(o)},i(e){n||(xe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Ee(t,e)}}}function qs(t){let n;return{c(){n=H("p"),n.textContent="Please log in to view your horses.",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},i:e,o:e,d(e){e&&S(n)}}}function Qs(e){let t,n;return t=new Qn({}),{c(){Ne(t.$$.fragment)},m(e,o){Pe(t,e,o),n=!0},i(e){n||(xe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Ee(t,e)}}}function er(e){let t,n,o,s;const r=[Qs,qs],i=[];function a(e,t){return e[1]?0:1}return t=a(e),n=i[t]=r[t](e),{c(){n.c(),o=E()},m(e,n){i[t].m(e,n),I(e,o,n),s=!0},p(e,s){let c=t;t=a(e),t!==c&&($e(),ke(i[c],1,1,(()=>{i[c]=null})),_e(),n=i[t],n||(n=i[t]=r[t](e),n.c()),xe(n,1),n.m(o.parentNode,o))},i(e){s||(xe(n),s=!0)},o(e){ke(n),s=!1},d(e){i[t].d(e),e&&S(o)}}}function tr(t){let n;return{c(){n=H("p"),n.textContent="Please log in to use the chat.",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},i:e,o:e,d(e){e&&S(n)}}}function nr(e){let t,n;return t=new zs({}),{c(){Ne(t.$$.fragment)},m(e,o){Pe(t,e,o),n=!0},i(e){n||(xe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Ee(t,e)}}}function or(e){let t,n,o,s;const r=[nr,tr],i=[];function a(e,t){return e[1]?0:1}return t=a(e),n=i[t]=r[t](e),{c(){n.c(),o=E()},m(e,n){i[t].m(e,n),I(e,o,n),s=!0},p(e,s){let c=t;t=a(e),t!==c&&($e(),ke(i[c],1,1,(()=>{i[c]=null})),_e(),n=i[t],n||(n=i[t]=r[t](e),n.c()),xe(n,1),n.m(o.parentNode,o))},i(e){s||(xe(n),s=!0)},o(e){ke(n),s=!1},d(e){i[t].d(e),e&&S(o)}}}function sr(t){let n;return{c(){n=H("p"),n.textContent="Please log in to view horse details.",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}function rr(e){let t,n;return t=new Io({props:{params:e[12]}}),{c(){Ne(t.$$.fragment)},m(e,o){Pe(t,e,o),n=!0},p(e,n){const o={};4096&n&&(o.params=e[12]),t.$set(o)},i(e){n||(xe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Ee(t,e)}}}function ir(e){let t,n,o,s;const r=[rr,sr],i=[];function a(e,t){return e[1]?0:1}return t=a(e),n=i[t]=r[t](e),{c(){n.c(),o=E()},m(e,n){i[t].m(e,n),I(e,o,n),s=!0},p(e,s){let c=t;t=a(e),t===c?i[t].p(e,s):($e(),ke(i[c],1,1,(()=>{i[c]=null})),_e(),n=i[t],n?n.p(e,s):(n=i[t]=r[t](e),n.c()),xe(n,1),n.m(o.parentNode,o))},i(e){s||(xe(n),s=!0)},o(e){ke(n),s=!1},d(e){i[t].d(e),e&&S(o)}}}function ar(t){let n;return{c(){n=H("p"),n.textContent="Please log in to match horses.",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}function cr(e){let t,n;return t=new Vo({props:{horses:e[2]}}),{c(){Ne(t.$$.fragment)},m(e,o){Pe(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.horses=e[2]),t.$set(o)},i(e){n||(xe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Ee(t,e)}}}function lr(e){let t,n,o,s;const r=[cr,ar],i=[];function a(e,t){return e[1]?0:1}return t=a(e),n=i[t]=r[t](e),{c(){n.c(),o=E()},m(e,n){i[t].m(e,n),I(e,o,n),s=!0},p(e,s){let c=t;t=a(e),t===c?i[t].p(e,s):($e(),ke(i[c],1,1,(()=>{i[c]=null})),_e(),n=i[t],n?n.p(e,s):(n=i[t]=r[t](e),n.c()),xe(n,1),n.m(o.parentNode,o))},i(e){s||(xe(n),s=!0)},o(e){ke(n),s=!1},d(e){i[t].d(e),e&&S(o)}}}function ur(t){let n;return{c(){n=H("p"),n.textContent="Please log in to use auto-match.",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}function dr(e){let t,n;return t=new fs({props:{horses:e[2]}}),{c(){Ne(t.$$.fragment)},m(e,o){Pe(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.horses=e[2]),t.$set(o)},i(e){n||(xe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Ee(t,e)}}}function hr(e){let t,n,o,s;const r=[dr,ur],i=[];function a(e,t){return e[1]?0:1}return t=a(e),n=i[t]=r[t](e),{c(){n.c(),o=E()},m(e,n){i[t].m(e,n),I(e,o,n),s=!0},p(e,s){let c=t;t=a(e),t===c?i[t].p(e,s):($e(),ke(i[c],1,1,(()=>{i[c]=null})),_e(),n=i[t],n?n.p(e,s):(n=i[t]=r[t](e),n.c()),xe(n,1),n.m(o.parentNode,o))},i(e){s||(xe(n),s=!0)},o(e){ke(n),s=!1},d(e){i[t].d(e),e&&S(o)}}}function pr(t){let n;return{c(){n=H("p"),n.textContent="Please log in to use one-vs-many matching.",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}function fr(e){let t,n;return t=new Hs({props:{horses:e[2]}}),{c(){Ne(t.$$.fragment)},m(e,o){Pe(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.horses=e[2]),t.$set(o)},i(e){n||(xe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Ee(t,e)}}}function mr(e){let t,n,o,s;const r=[fr,pr],i=[];function a(e,t){return e[1]?0:1}return t=a(e),n=i[t]=r[t](e),{c(){n.c(),o=E()},m(e,n){i[t].m(e,n),I(e,o,n),s=!0},p(e,s){let c=t;t=a(e),t===c?i[t].p(e,s):($e(),ke(i[c],1,1,(()=>{i[c]=null})),_e(),n=i[t],n?n.p(e,s):(n=i[t]=r[t](e),n.c()),xe(n,1),n.m(o.parentNode,o))},i(e){s||(xe(n),s=!0)},o(e){ke(n),s=!1},d(e){i[t].d(e),e&&S(o)}}}function gr(t){let n;return{c(){n=H("p"),n.textContent="Please log in to use the chat.",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},i:e,o:e,d(e){e&&S(n)}}}function vr(e){let t,n;return t=new zs({}),{c(){Ne(t.$$.fragment)},m(e,o){Pe(t,e,o),n=!0},i(e){n||(xe(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Ee(t,e)}}}function yr(e){let t,n,o,s;const r=[vr,gr],i=[];function a(e,t){return e[1]?0:1}return t=a(e),n=i[t]=r[t](e),{c(){n.c(),o=E()},m(e,n){i[t].m(e,n),I(e,o,n),s=!0},p(e,s){let c=t;t=a(e),t!==c&&($e(),ke(i[c],1,1,(()=>{i[c]=null})),_e(),n=i[t],n||(n=i[t]=r[t](e),n.c()),xe(n,1),n.m(o.parentNode,o))},i(e){s||(xe(n),s=!0)},o(e){ke(n),s=!1},d(e){i[t].d(e),e&&S(o)}}}function wr(t){let n;return{c(){n=H("p"),n.textContent="Please log in to add a horse.",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}function br(t){let n,o;return n=new Ho({props:{addHorse:t[8]}}),{c(){Ne(n.$$.fragment)},m(e,t){Pe(n,e,t),o=!0},p:e,i(e){o||(xe(n.$$.fragment,e),o=!0)},o(e){ke(n.$$.fragment,e),o=!1},d(e){Ee(n,e)}}}function $r(e){let t,n,o,s;const r=[br,wr],i=[];function a(e,t){return e[1]?0:1}return t=a(e),n=i[t]=r[t](e),{c(){n.c(),o=E()},m(e,n){i[t].m(e,n),I(e,o,n),s=!0},p(e,s){let c=t;t=a(e),t===c?i[t].p(e,s):($e(),ke(i[c],1,1,(()=>{i[c]=null})),_e(),n=i[t],n?n.p(e,s):(n=i[t]=r[t](e),n.c()),xe(n,1),n.m(o.parentNode,o))},i(e){s||(xe(n),s=!0)},o(e){ke(n),s=!1},d(e){i[t].d(e),e&&S(o)}}}function _r(t){let n;return{c(){n=H("p"),n.textContent="Please log in to add a competition result.",D(n,"class","has-text-centered")},m(e,t){I(e,n,t)},p:e,i:e,o:e,d(e){e&&S(n)}}}function xr(t){let n,o;return n=new Eo({props:{addCompetitionResult:t[9]}}),{c(){Ne(n.$$.fragment)},m(e,t){Pe(n,e,t),o=!0},p:e,i(e){o||(xe(n.$$.fragment,e),o=!0)},o(e){ke(n.$$.fragment,e),o=!1},d(e){Ee(n,e)}}}function kr(e){let t,n,o,s;const r=[xr,_r],i=[];function a(e,t){return e[1]?0:1}return t=a(e),n=i[t]=r[t](e),{c(){n.c(),o=E()},m(e,n){i[t].m(e,n),I(e,o,n),s=!0},p(e,s){let c=t;t=a(e),t===c?i[t].p(e,s):($e(),ke(i[c],1,1,(()=>{i[c]=null})),_e(),n=i[t],n?n.p(e,s):(n=i[t]=r[t](e),n.c()),xe(n,1),n.m(o.parentNode,o))},i(e){s||(xe(n),s=!0)},o(e){ke(n),s=!1},d(e){i[t].d(e),e&&S(o)}}}function Cr(e){let t,n,o,s,r,i,a,c,l,u,d,h,p,f,m,g,v,y,w,b,$,_,k,C,T,N,E,j,M,O,z,L,R,A,Z,F,U,W,K,J,X,B,Y,G;function V(e,t){return e[1]?Gs:Ys}a=new Ve({props:{class:"navbar-item",to:"/",$$slots:{default:[Zs]},$$scope:{ctx:e}}}),l=new Ve({props:{class:"navbar-item",to:"/my-horses",$$slots:{default:[Fs]},$$scope:{ctx:e}}}),d=new Ve({props:{class:"navbar-item",to:"/match",$$slots:{default:[Us]},$$scope:{ctx:e}}}),p=new Ve({props:{class:"navbar-item",to:"/auto-match",$$slots:{default:[Ws]},$$scope:{ctx:e}}}),m=new Ve({props:{class:"navbar-item",to:"/one-vs-many",$$slots:{default:[Ks]},$$scope:{ctx:e}}}),v=new Ve({props:{class:"navbar-item",to:"/chat",$$slots:{default:[Js]},$$scope:{ctx:e}}}),w=new Ve({props:{class:"navbar-item",to:"/add-horse",$$slots:{default:[Xs]},$$scope:{ctx:e}}}),$=new Ve({props:{class:"navbar-item",to:"/add-competition-result",$$slots:{default:[Bs]},$$scope:{ctx:e}}});let q=V(e),Q=q(e);return T=new ct({props:{path:"/",$$slots:{default:[Vs]},$$scope:{ctx:e}}}),E=new ct({props:{path:"/my-horses",$$slots:{default:[er]},$$scope:{ctx:e}}}),M=new ct({props:{path:"/chat",$$slots:{default:[or]},$$scope:{ctx:e}}}),z=new ct({props:{path:"/horses/:selectedHorseId",$$slots:{default:[ir,({params:e})=>({12:e}),({params:e})=>e?4096:0]},$$scope:{ctx:e}}}),R=new ct({props:{path:"/match",$$slots:{default:[lr]},$$scope:{ctx:e}}}),Z=new ct({props:{path:"/auto-match",$$slots:{default:[hr]},$$scope:{ctx:e}}}),U=new ct({props:{path:"/one-vs-many",$$slots:{default:[mr]},$$scope:{ctx:e}}}),K=new ct({props:{path:"/chat",$$slots:{default:[yr]},$$scope:{ctx:e}}}),X=new ct({props:{path:"/add-horse",$$slots:{default:[$r]},$$scope:{ctx:e}}}),Y=new ct({props:{path:"/add-competition-result",$$slots:{default:[kr]},$$scope:{ctx:e}}}),{c(){t=H("main"),n=H("div"),n.innerHTML='<img src="/jumping_horse_logo_transparent.png" alt="Jumping Horse Logo" class="svelte-d039fn"/> \n        <h1 class="title">Horse Breeding App</h1>',o=P(),s=H("nav"),r=H("div"),i=H("div"),Ne(a.$$.fragment),c=P(),Ne(l.$$.fragment),u=P(),Ne(d.$$.fragment),h=P(),Ne(p.$$.fragment),f=P(),Ne(m.$$.fragment),g=P(),Ne(v.$$.fragment),y=P(),Ne(w.$$.fragment),b=P(),Ne($.$$.fragment),_=P(),k=H("div"),Q.c(),C=P(),Ne(T.$$.fragment),N=P(),Ne(E.$$.fragment),j=P(),Ne(M.$$.fragment),O=P(),Ne(z.$$.fragment),L=P(),Ne(R.$$.fragment),A=P(),Ne(Z.$$.fragment),F=P(),Ne(U.$$.fragment),W=P(),Ne(K.$$.fragment),J=P(),Ne(X.$$.fragment),B=P(),Ne(Y.$$.fragment),D(n,"class","logo-container svelte-d039fn"),D(i,"class","navbar-start"),D(k,"class","navbar-end"),D(r,"class","navbar-menu"),D(s,"class","navbar is-info")},m(e,S){I(e,t,S),x(t,n),x(t,o),x(t,s),x(s,r),x(r,i),Pe(a,i,null),x(i,c),Pe(l,i,null),x(i,u),Pe(d,i,null),x(i,h),Pe(p,i,null),x(i,f),Pe(m,i,null),x(i,g),Pe(v,i,null),x(i,y),Pe(w,i,null),x(i,b),Pe($,i,null),x(r,_),x(r,k),Q.m(k,null),x(t,C),Pe(T,t,null),x(t,N),Pe(E,t,null),x(t,j),Pe(M,t,null),x(t,O),Pe(z,t,null),x(t,L),Pe(R,t,null),x(t,A),Pe(Z,t,null),x(t,F),Pe(U,t,null),x(t,W),Pe(K,t,null),x(t,J),Pe(X,t,null),x(t,B),Pe(Y,t,null),G=!0},p(e,t){const n={};8192&t&&(n.$$scope={dirty:t,ctx:e}),a.$set(n);const o={};8192&t&&(o.$$scope={dirty:t,ctx:e}),l.$set(o);const s={};8192&t&&(s.$$scope={dirty:t,ctx:e}),d.$set(s);const r={};8192&t&&(r.$$scope={dirty:t,ctx:e}),p.$set(r);const i={};8192&t&&(i.$$scope={dirty:t,ctx:e}),m.$set(i);const c={};8192&t&&(c.$$scope={dirty:t,ctx:e}),v.$set(c);const u={};8192&t&&(u.$$scope={dirty:t,ctx:e}),w.$set(u);const h={};8192&t&&(h.$$scope={dirty:t,ctx:e}),$.$set(h),q===(q=V(e))&&Q?Q.p(e,t):(Q.d(1),Q=q(e),Q&&(Q.c(),Q.m(k,null)));const f={};8204&t&&(f.$$scope={dirty:t,ctx:e}),T.$set(f);const g={};8194&t&&(g.$$scope={dirty:t,ctx:e}),E.$set(g);const y={};8194&t&&(y.$$scope={dirty:t,ctx:e}),M.$set(y);const b={};12290&t&&(b.$$scope={dirty:t,ctx:e}),z.$set(b);const _={};8198&t&&(_.$$scope={dirty:t,ctx:e}),R.$set(_);const x={};8198&t&&(x.$$scope={dirty:t,ctx:e}),Z.$set(x);const C={};8198&t&&(C.$$scope={dirty:t,ctx:e}),U.$set(C);const I={};8194&t&&(I.$$scope={dirty:t,ctx:e}),K.$set(I);const S={};8194&t&&(S.$$scope={dirty:t,ctx:e}),X.$set(S);const H={};8194&t&&(H.$$scope={dirty:t,ctx:e}),Y.$set(H)},i(e){G||(xe(a.$$.fragment,e),xe(l.$$.fragment,e),xe(d.$$.fragment,e),xe(p.$$.fragment,e),xe(m.$$.fragment,e),xe(v.$$.fragment,e),xe(w.$$.fragment,e),xe($.$$.fragment,e),xe(T.$$.fragment,e),xe(E.$$.fragment,e),xe(M.$$.fragment,e),xe(z.$$.fragment,e),xe(R.$$.fragment,e),xe(Z.$$.fragment,e),xe(U.$$.fragment,e),xe(K.$$.fragment,e),xe(X.$$.fragment,e),xe(Y.$$.fragment,e),G=!0)},o(e){ke(a.$$.fragment,e),ke(l.$$.fragment,e),ke(d.$$.fragment,e),ke(p.$$.fragment,e),ke(m.$$.fragment,e),ke(v.$$.fragment,e),ke(w.$$.fragment,e),ke($.$$.fragment,e),ke(T.$$.fragment,e),ke(E.$$.fragment,e),ke(M.$$.fragment,e),ke(z.$$.fragment,e),ke(R.$$.fragment,e),ke(Z.$$.fragment,e),ke(U.$$.fragment,e),ke(K.$$.fragment,e),ke(X.$$.fragment,e),ke(Y.$$.fragment,e),G=!1},d(e){e&&S(t),Ee(a),Ee(l),Ee(d),Ee(p),Ee(m),Ee(v),Ee(w),Ee($),Q.d(),Ee(T),Ee(E),Ee(M),Ee(z),Ee(R),Ee(Z),Ee(U),Ee(K),Ee(X),Ee(Y)}}}function Ir(e){let t,n,o,s,r,i=e[4]&&Ls(e);const a=[As,Rs],c=[];function l(e,t){return e[0]?0:1}return n=l(e),o=c[n]=a[n](e),{c(){i&&i.c(),t=P(),o.c(),s=E()},m(e,o){i&&i.m(e,o),I(e,t,o),c[n].m(e,o),I(e,s,o),r=!0},p(e,[r]){e[4]?i?i.p(e,r):(i=Ls(e),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null);let u=n;n=l(e),n===u?c[n].p(e,r):($e(),ke(c[u],1,1,(()=>{c[u]=null})),_e(),o=c[n],o?o.p(e,r):(o=c[n]=a[n](e),o.c()),xe(o,1),o.m(s.parentNode,s))},i(e){r||(xe(o),r=!0)},o(e){ke(o),r=!1},d(e){i&&i.d(e),e&&S(t),c[n].d(e),e&&S(s)}}}function Sr(e,t,n){let o,s,r;l(e,bn,(e=>n(1,o=e))),l(e,$n,(e=>n(5,s=e))),l(e,xn,(e=>n(6,r=e)));let i=[],a=!1,c=!1,u=null;const d=async(e,t,s={})=>{if(o)try{n(3,a=!0),n(4,u=null);const o=await In();if(console.log("Token:",o?.substring(0,10)+"..."),!o)throw new Error("No authentication token available");const r=Object.entries(s).reduce(((e,[t,n])=>`${e}&${t}=${n}`),""),c=await fetch(`http://127.0.0.1:5000/horses?page=${e}&per_page=${t}${r}`,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},credentials:"include"});if(!c.ok){console.error("Response status:",c.status),console.error("Response status text:",c.statusText);const e=await c.text();throw console.error("Error response:",e),new Error("Failed to fetch horses")}const l=await c.json();n(2,i=l.data)}catch(e){console.error("Error fetching horses:",e),e="Failed to fetch horses. Please try again.",n(2,i=[])}finally{n(3,a=!1)}else console.log("User not authenticated")};ee((async()=>{try{await Cn(),console.log("Auth initialized"),bn.subscribe((e=>{console.log("Authentication state changed:",e)})),$n.subscribe((e=>{console.log("User state changed:",e)})),n(0,c=!0)}catch(e){console.error("Error in onMount:",e),e="Failed to initialize application. Please refresh the page."}}));return e.$$.update=()=>{3&e.$$.dirty&&o&&c&&d(1,100)},[c,o,i,a,u,s,r,d,async e=>{try{const t=await In();if(!t)throw new Error("No authentication token available");if(!(await fetch("http://127.0.0.1:5000/my_horses",{method:"POST",body:JSON.stringify({horse_id:e.detail.id}),headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"})).ok)throw new Error("Failed to add horse");n(2,i=[...i,e.detail]),console.log("Horse added successfully:",e.detail)}catch(e){console.error("Error adding horse:",e)}},e=>{let t=i.find((t=>t.id===e.detail.horseId));t&&(t.competitionResults=[...t.competitionResults,e.detail.result],n(2,i=[...i]),console.log("Competition result added:",e.detail))},()=>{console.log("Logout clicked"),async function(){try{await kn.logout({logoutParams:{returnTo:"http://localhost:8080"}}),bn.set(!1),$n.set(null)}catch(e){console.error("Logout error:",e)}}()},()=>{console.log("Login clicked"),async function(){try{await kn.loginWithRedirect({authorizationParams:{redirect_uri:"http://localhost:8080"}})}catch(e){console.error("Login error:",e)}}()}]}return new class extends De{constructor(e){super(),Me(this,e,Sr,Ir,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
